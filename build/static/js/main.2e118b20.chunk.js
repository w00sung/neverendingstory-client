(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1015:function(e,t,a){},1016:function(e,t,a){},1017:function(e,t,a){},1019:function(e,t,a){},1020:function(e,t,a){},1021:function(e,t,a){},1022:function(e,t,a){},1023:function(e,t,a){},1024:function(e,t,a){},1025:function(e,t,a){},1030:function(e,t,a){},1031:function(e,t,a){},1032:function(e,t,a){},1033:function(e,t,a){},1034:function(e,t,a){},1035:function(e,t,a){},1036:function(e,t,a){},1037:function(e,t,a){},1038:function(e,t,a){},1039:function(e,t,a){},1040:function(e,t,a){},1042:function(e,t,a){},1048:function(e,t,a){},1049:function(e,t,a){},1050:function(e,t,a){},1088:function(e,t,a){"use strict";a.r(t);a(328),a(340),a(341),a(342),a(343),a(344),a(345),a(346),a(347),a(348),a(349),a(350),a(351),a(352),a(353),a(538),a(539),a(540),a(541),a(542),a(543),a(544),a(545),a(546),a(357),a(547),a(548),a(196),a(549),a(550),a(551),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(561),a(562),a(563),a(565),a(567),a(568),a(366),a(198),a(569),a(570),a(571),a(572),a(573),a(574),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(371),a(585),a(586),a(587),a(588),a(589),a(590),a(591),a(592),a(593),a(595),a(596),a(598),a(599),a(600),a(601),a(602),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(610),a(611),a(612),a(613),a(614),a(615),a(616),a(275),a(618),a(619),a(620),a(621),a(622),a(624),a(625),a(626),a(627),a(628),a(629),a(630),a(631),a(632),a(633),a(634),a(383),a(635),a(636),a(277),a(637),a(638),a(639),a(640),a(206),a(641),a(642),a(643),a(644),a(645),a(646),a(647),a(648),a(649),a(650),a(651),a(652),a(653),a(654),a(655),a(656),a(657),a(658),a(659),a(660),a(661),a(662),a(663),a(664),a(665),a(666),a(668),a(669),a(670),a(671),a(672),a(673),a(674),a(675),a(676),a(677),a(678),a(679),a(680),a(681),a(682),a(683),a(684),a(685),a(686),a(687),a(688),a(689),a(690),a(691),a(692),a(693),a(694),a(695),a(696),a(697),a(698),a(699),a(700),a(282),a(701),a(702),a(703),a(704),a(705),a(706),a(707),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(710),a(711),a(712),a(713),a(714),a(715),a(716),a(717),a(718),a(719),a(720),a(721),a(722),a(723),a(724),a(725),a(727),a(728),a(729),a(730),a(731),a(732),a(733),a(734),a(735),a(736),a(737),a(409),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(738),a(739),a(740),a(742),a(428),a(429),a(430),a(743),a(744),a(745),a(746),a(747),a(748),a(749),a(750),a(432),a(751),a(752),a(753),a(755),a(434),a(756),a(435);var n=a(0),c=a.n(n),r=a(8),l=a.n(r),i=(a(766),a(53)),s=a(9),o=a.n(s);function u(){return{type:"auth_user",payload:o.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var m=a(15),d=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(r){var l=Object(m.c)((function(e){return e.user})),i=Object(m.b)();return Object(n.useEffect)((function(){i(u()).then((function(e){e.payload.isAuth?(a&&!e.payload.isAdmin||!1===t)&&r.history.replace("/"):t&&r.history.push("/login")}))}),[]),c.a.createElement(e,Object.assign({},r,{user:l}))}return r},p=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];function t(t){var a=Object(i.g)();return Object(n.useEffect)((function(){void 0===a.state&&t.history.replace("/")}),[]),a.state?c.a.createElement(e,t):c.a.createElement("div",null,"\uc798\ubabb\ub41c \uc811\uadfc\uc785\ub2c8\ub2e4\u314b\u314b")}return t},f=a(60),g=a.n(f),b=a(106),v=a(3),E=a(1108),h=(a(789),{arrow_1:"M-1.73589e-06 5.2875L16.6883 22.5L-2.31124e-07 39.7125L5.13765 45L27 22.5L5.13765 -2.24574e-07L-1.73589e-06 5.2875Z"});function y(e){var t=e.src,a=e.color,n=e.width,r=e.height;return c.a.createElement("svg",{width:n||"auto",height:r||"auto",viewBox:"0 0 27 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:h[t],fill:a}))}function _(e){return c.a.createElement("svg",{width:"15",height:"3",viewBox:"0 0 15 3",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("rect",{width:"15",height:"3",fill:"white"}))}var O={id:"recent_gameList",pos:0,limit:3},j={id:"popular_gameList",pos:0,limit:2};function k(e){if(e.pos<e.limit-1){console.log(e.pos);var t=document.getElementById(e.id.split("_")[0]+"_bar"+String(e.pos));if(t.style.filter="brightness(50%)",e.pos+=1,document.getElementById(e.id).style.transform="translate(".concat(-1267*e.pos,"px, 0px)"),(t=document.getElementById(e.id.split("_")[0]+"_bar"+String(e.pos))).style.filter="brightness(100%)",e.pos==e.limit-1){var a=document.getElementById(e.id.split("_")[0]+"_right_arrow");a.style.display="none"}(a=document.getElementById(e.id.split("_")[0]+"_left_arrow")).style.display=""}}function N(e){if(e.pos>0){var t=document.getElementById(e.id.split("_")[0]+"_bar"+String(e.pos));if(t.style.filter="brightness(50%)",e.pos-=1,document.getElementById(e.id).style.transform="translate(".concat(-1267*e.pos,"px, 0px)"),(t=document.getElementById(e.id.split("_")[0]+"_bar"+String(e.pos))).style.filter="brightness(100%)",0==e.pos){var a=document.getElementById(e.id.split("_")[0]+"_left_arrow");a.style.display="none"}(a=document.getElementById(e.id.split("_")[0]+"_right_arrow")).style.display=""}}var S=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),r=a[0],l=a[1];Object(n.useEffect)((function(){o.a.get("/api/game/getgames").then((function(e){e.data.success?l(e.data.games):alert("game load\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var i=function(){var t=Object(b.a)(g.a.mark((function t(){var a,n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/api/game/uploadgameframe");case 2:if((a=t.sent).data.success){t.next=6;break}return alert("game Frame\uc81c\uc791 \uc2e4\ud328"),t.abrupt("return");case 6:return n={gameId:a.data.game._id,prevSceneId:null,sceneDepth:0,isFirst:1,title:""},t.next=9,o.a.post("/api/scene/create",n);case 9:if((c=t.sent).data.success){t.next=13;break}return alert("scene Frame\uc81c\uc791 \uc2e4\ud328"),t.abrupt("return");case 13:E.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 \ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){e.history.replace({pathname:"/scene/make",state:{gameId:a.data.game._id,sceneId:c.data.sceneId}})}),1e3);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=0,u=r.map((function(e,t){return e.title?(s+=1,c.a.createElement("div",{key:t,className:"gamelist-game"},c.a.createElement("a",{href:"/game/".concat(e._id)},c.a.createElement("img",{className:"game-image",src:e.thumbnail,alt:e.title}),c.a.createElement("div",{className:"game-title"},e.title)),c.a.createElement("div",{className:"game-category"},e.category))):null}));return c.a.createElement("div",{className:"mainPage_container"},c.a.createElement("div",{className:"box-container"},c.a.createElement("button",{className:"button-newgame",onClick:i},"NEW \uac8c\uc784 \ub9cc\ub4e4\uae30")),c.a.createElement("div",{className:"box-container game-box"},c.a.createElement("div",{className:"box-title"},"\ucd5c\uadfc \ud50c\ub808\uc774\ud55c \uac8c\uc784"),c.a.createElement("div",{className:"box-positionBar"},c.a.createElement("div",{id:"recent_bar2",className:"bar"},c.a.createElement(_,null)),c.a.createElement("div",{id:"recent_bar1",className:"bar"},c.a.createElement(_,null)),c.a.createElement("div",{id:"recent_bar0",className:"bar",style:{filter:"brightness(100%)"}},c.a.createElement(_,null))),c.a.createElement("div",{className:"box-gameList"},c.a.createElement("div",{id:"recent_gameList",className:"gamelist-container",style:{width:335*s+"px"}},u),c.a.createElement("div",{id:"recent_left_arrow",className:"gamelist-left-arrow",style:{display:"none"},onClick:function(){N(O)}},c.a.createElement(y,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"})),c.a.createElement("div",{id:"recent_right_arrow",className:"gamelist-right-arrow",onClick:function(){k(O)}},c.a.createElement(y,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"})))),c.a.createElement("div",{className:"box-container game-box"},c.a.createElement("div",{className:"box-title"},"\uc778\uae30 \uac8c\uc784"),c.a.createElement("div",{className:"box-positionBar"},c.a.createElement("div",{id:"popular_bar1",className:"bar"},c.a.createElement(_,null)),c.a.createElement("div",{id:"popular_bar0",className:"bar",style:{filter:"brightness(100%)"}},c.a.createElement(_,null))),c.a.createElement("div",{className:"box-gameList"},c.a.createElement("div",{id:"popular_gameList",className:"gamelist-container",style:{width:335*s+"px"}},u),c.a.createElement("div",{id:"popular_left_arrow",className:"gamelist-left-arrow",style:{display:"none"},onClick:function(){N(j)}},c.a.createElement(y,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"})),c.a.createElement("div",{id:"popular_right_arrow",className:"gamelist-right-arrow",onClick:function(){k(j)}},c.a.createElement(y,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"})))))},x=a(1103),w=a(1101),I=a(151),C=a.n(I),L=a(71);a(829);var B=function(e,t){var a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t})),Object(n.useEffect)((function(){function t(t){t.code!==e||t.shiftKey||a.current(t)}return document.addEventListener("keypress",t),function(){return document.removeEventListener("keypress",t)}}),[e])};a(830),a(831);var T=function e(t){var a=t.gameId,r=t.comment,l=t.updateToggle_comment,i=Object(m.c)((function(e){return e.user})),s=Object(m.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),u=Object(m.c)((function(e){return e.user.userData?e.user.userData._id:null})),d=Object(n.useRef)(),p=Object(n.useState)(!0),f=Object(v.a)(p,2),g=f[0],b=f[1],h=Object(n.useState)(""),y=Object(v.a)(h,2),_=y[0],O=y[1],j=Object(n.useState)([]),k=Object(v.a)(j,2),N=k[0],S=k[1],x=Object(n.useState)(!1),w=Object(v.a)(x,2),I=w[0],C=w[1],L=function(){b((function(e){return!e}))},B={gameId:a,responseTo:r._id.toString()};Object(n.useEffect)((function(){o.a.post("/api/comment/getReply",B).then((function(e){e.data.success?S(e.data.result):E.a.error("\ub300\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[g]);var T=N.map((function(t,n){return c.a.createElement("div",{key:n,style:{marginLeft:"10px"}},t&&c.a.createElement(e,{updateToggle_comment:L,gameId:a,comment:t}))}));return c.a.createElement("div",{className:"container_box"},c.a.createElement("div",{className:"comment_container"},c.a.createElement("img",{src:r.writer.image,alt:"img",className:"img"}),c.a.createElement("div",{className:"comment_contents"},c.a.createElement("div",{className:"nickname"},r.writer.nickname),c.a.createElement("div",{className:"content"},r.content),c.a.createElement("div",{className:"comment_info"},c.a.createElement("div",{className:"comment_like"},"\uc88b\uc544\uc694 : 0 "),c.a.createElement("div",{className:"comment_dislike"},"\uc2eb\uc5b4\uc694 : 0 "),N.length?c.a.createElement("div",{onClick:function(){"block"===d.current.style.display?d.current.style.display="none":d.current.style.display="block"},className:"comment_displayReplyToggle"},"\ub313\uae00 ",N.length,"\uac1c \ubcf4\uae30"):c.a.createElement("div",null),c.a.createElement("div",{onClick:function(){C((function(e){return!e}))},className:"comment_writeReplyToggle"},"\ub313\uae00 \uc791\uc131"),r.writer._id===u&&c.a.createElement("div",{onClick:function(){o.a.post("/api/comment/removeComment",{commentId:r._id}).then((function(e){e.data.success?(E.a.success("\ub313\uae00\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),l()):E.a.error("\ub313\uae00 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},className:"comment_delete"},"\ub313\uae00 \uc0ad\uc81c")),s&I?c.a.createElement("form",{className:"form"},c.a.createElement("textarea",{className:"textarea",onChange:function(e){O(e.currentTarget.value)},value:_,placeholder:"\ucf54\uba58\ud2b8\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694."}),c.a.createElement("button",{className:"btn",onClick:function(e){if(e.preventDefault(),""!==_){var t={content:_,writer:i.userData._id,gameId:a,responseTo:r._id.toString()};o.a.post("/api/comment/saveComment",t).then((function(e){e.data.success?(E.a.success("\ub313\uae00 \uac10\uc0ac\ud569\ub2c8\ub2e4!"),L(),O(""),"block"!==d.current.style.display&&(d.current.style.display="block")):E.a.error("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}}},"\ub313\uae00 \uc791\uc131")):c.a.createElement("div",null))),c.a.createElement("div",{ref:d,className:"reply_container"},T))};var D=function(e){var t=e.gameId,a=Object(m.c)((function(e){return e.user})),r=Object(m.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),l=Object(n.useState)(!0),i=Object(v.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)(""),p=Object(v.a)(d,2),f=p[0],g=p[1],b=Object(n.useState)([]),h=Object(v.a)(b,2),y=h[0],_=h[1],O=function(){u((function(e){return!e}))};Object(n.useEffect)((function(){o.a.post("/api/comment/getComment",{gameId:t}).then((function(e){e.data.success?_(e.data.result):E.a.error("\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[s]);var j=function(e){if(e.preventDefault(),""!==f){var n={content:f,writer:a.userData._id,gameId:t,responseTo:""};o.a.post("/api/comment/saveComment",n).then((function(e){e.data.success?(E.a.success("\ub313\uae00 \uac10\uc0ac\ud569\ub2c8\ub2e4!"),O(),g("")):E.a.error("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},k=y.map((function(e,a){return c.a.createElement("div",{key:a},e&&c.a.createElement(T,{updateToggle_comment:O,gameId:t,comment:e}))}));return c.a.createElement("div",{className:"container"},c.a.createElement("br",null),r&&c.a.createElement("form",{className:"form"},c.a.createElement("textarea",{className:"textarea",onChange:function(e){g(e.currentTarget.value)},value:f,placeholder:"\ucf54\uba58\ud2b8\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694."}),c.a.createElement("button",{className:"btn",onClick:j},"\ub313\uae00 \uc791\uc131")),c.a.createElement("br",null),c.a.createElement("div",null,"\ub313\uae00 ",y.length,"\uac1c"),c.a.createElement("hr",null),k,c.a.createElement("br",null))};var M=function(e){var t=e.match.params.gameId,a={gameId:t},r=Object(n.useState)([]),l=Object(v.a)(r,2),i=l[0],s=l[1],u=Object(n.useState)([]),m=Object(v.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),g=Object(v.a)(f,2),b=g[0],h=g[1];return Object(n.useEffect)((function(){o.a.post("/api/game/getgamedetail",a).then((function(e){e.data.success?s(e.data.gameDetail):E.a.error("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),Object(n.useEffect)((function(){o.a.get("/api/game/gamestart/".concat(t)).then((function(e){e.data.success?(p(e.data.sceneId),h(e.data.isMaking)):E.a.error("\ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694.")}))}),[]),c.a.createElement("div",{className:"detailPage__container"},i.thumbnail&&c.a.createElement("img",{style:{width:"30%",height:"30%"},src:i.thumbnail,alt:"thumbnail"}),c.a.createElement("div",null,"\uc81c\ubaa9: ",i.title),c.a.createElement("div",null,"\uce74\ud14c\uace0\ub9ac : ",i.category),c.a.createElement("div",null,"\ud06c\ub9ac\uc5d0\uc774\ud130: ",i.creator),c.a.createElement("div",null,i.description),c.a.createElement("br",null),c.a.createElement(L.b,{style:{color:"#f05454"},to:{pathname:b?"/scene/make":"/gameplay",state:{gameId:t,sceneId:d}}},"\uac8c\uc784 \uc2dc\uc791\ud558\uae30"),c.a.createElement(D,{gameId:t}))};x.a.Title,w.a.Meta;var F=a(251),P=a(81),z=a(1102),R=a(1109),U=a(19),H=a(1106),A=a(120),G=x.a.Title;var q=Object(i.h)((function(e){var t=Object(m.b)(),a=!!localStorage.getItem("rememberMe"),r=Object(n.useState)(""),l=Object(v.a)(r,2),i=l[0],s=l[1],u=Object(n.useState)(a),d=Object(v.a)(u,2),p=d[0],f=d[1],g=function(){f(!p)},b=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return c.a.createElement(F.a,{initialValues:{email:b,password:""},validationSchema:P.object().shape({email:P.string().email("Email is invalid").required("Email is required"),password:P.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,n){var c=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return{type:"login_user",payload:o.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===p?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.replace("/")):s("Check out your Account or Password again")})).catch((function(e){s("Check out your Account or Password again"),setTimeout((function(){s("")}),3e3)})),c(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,r=e.isSubmitting,l=e.handleChange,s=e.handleBlur,o=e.handleSubmit;return c.a.createElement("div",{className:"app"},c.a.createElement(G,{level:2},"Log In"),c.a.createElement("form",{onSubmit:o,style:{width:"350px"}},c.a.createElement(z.a.Item,{required:!0},c.a.createElement(R.a,{id:"email",prefix:c.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:l,onBlur:s,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&c.a.createElement("div",{className:"input-feedback"},n.email)),c.a.createElement(z.a.Item,{required:!0},c.a.createElement(R.a,{id:"password",prefix:c.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:l,onBlur:s,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&c.a.createElement("div",{className:"input-feedback"},n.password)),i&&c.a.createElement("label",null,c.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},i)),c.a.createElement(z.a.Item,null,c.a.createElement(H.a,{id:"rememberMe",onChange:g,checked:p},"Remember me"),c.a.createElement("a",{className:"login-form-forgot",href:"/reset_user",style:{float:"right"}},"forgot password"),c.a.createElement("div",null,c.a.createElement(A.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:r,onSubmit:o},"Log in")),"Or ",c.a.createElement("a",{href:"/register"},"register now!"))))}))})),W={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},X={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var Q=function(e){var t=Object(m.b)();return c.a.createElement(F.a,{initialValues:{email:"",nickname:"",password:"",confirmPassword:""},validationSchema:P.object().shape({nickname:P.string().required("Name is required"),email:P.string().email("Email is invalid").required("Email is required"),password:P.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:P.string().oneOf([P.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,n){var c=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password,nickname:a.nickname,image:"http://gravatar.com/avatar/".concat(C()().unix(),"?d=identicon")};t(function(e){return{type:"register_user",payload:o.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)})),c(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,r=e.isSubmitting,l=e.handleChange,i=e.handleBlur,s=e.handleSubmit;return c.a.createElement("div",{className:"app"},c.a.createElement("h2",null,"Sign up"),c.a.createElement(z.a,Object.assign({style:{minWidth:"375px"}},W,{onSubmit:s}),c.a.createElement(z.a.Item,{required:!0,label:"Name"},c.a.createElement(R.a,{id:"nickname",placeholder:"Enter your name",type:"text",value:t.nickname,onChange:l,onBlur:i,className:n.nickname&&a.nickname?"text-input error":"text-input"}),n.nickname&&a.nickname&&c.a.createElement("div",{className:"input-feedback"},n.nickname)),c.a.createElement(z.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},c.a.createElement(R.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:l,onBlur:i,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&c.a.createElement("div",{className:"input-feedback"},n.email)),c.a.createElement(z.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},c.a.createElement(R.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:l,onBlur:i,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&c.a.createElement("div",{className:"input-feedback"},n.password)),c.a.createElement(z.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},c.a.createElement(R.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:l,onBlur:i,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&c.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),c.a.createElement(z.a.Item,X,c.a.createElement(A.a,{onClick:s,type:"primary",disabled:r},"Submit"))))}))};a(1015);var Y=function(){var e=Object(m.c)((function(e){return e.user.userData}));if(e){return c.a.createElement("div",null,c.a.createElement("img",{src:e.image,alt:""}),c.a.createElement("div",null,e.email),c.a.createElement("div",null,e.nickname),function(e){return e.makingGameList.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,e.gameId),c.a.createElement(L.b,{to:{pathname:"/scene/make}",state:{gameId:e.gameId,sceneId:e.sceneId}},key:t},"\uac8c\uc784 \ub9cc\ub4e4\ub7ec\uac00\uae30.."))}))}(e))}return c.a.createElement("div",null,"loading...")},V=a(110),J=(a(1016),R.a.TextArea),K=x.a.Title,Z=[{value:0,label:"Private"},{value:1,label:"Public"}],$=[{value:0,label:"\uc0b4\uc544\ub0a8\uae30"},{value:1,label:"\ub85c\ub9e8\uc2a4"},{value:2,label:"\uc2a4\ud1a0\ub9ac"},{value:3,label:"\ucd94\ub9ac"},{value:4,label:"\ubcd1\ub9db"}];"".concat(9/16),"".concat(16/9);var ee=function(e){var t=Object(m.c)((function(e){return e.user})),a=Object(n.useState)(""),r=Object(v.a)(a,2),l=r[0],i=r[1],s=Object(n.useState)(""),u=Object(v.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)(0),g=Object(v.a)(f,2),b=g[0],h=g[1],y=Object(n.useState)("\uc0b4\uc544\ub0a8\uae30"),_=Object(v.a)(y,2),O=_[0],j=_[1],k=Object(n.useState)(!0),N=Object(v.a)(k,2),S=N[0],x=N[1],w=Object(n.useState)(""),I=Object(v.a)(w,2),C=I[0],L=I[1],B=function(e){x((function(e){return!e}))},T=function(a){if(a.preventDefault(),""!==l&&""!==d&&""!==C){var n;n=S?9/16:16/9;var c={creator:t.userData._id,title:l,description:d,thumbnail:C,privacy:b,category:O,ratio:n,writer:[t.userData._id],character:[],background:[],bgm:[],sound:[]};o.a.post("/api/game/uploadgame",c).then((function(t){t.data.success?(E.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 +\ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){e.history.replace("/game/upload/".concat(t.data.game._id))}),1e3)):alert("game\uc81c\uc791 \uc2e4\ud328")}))}else alert("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")};return c.a.createElement("div",{style:{maxWidth:"700px",margin:"2rem auto"}},c.a.createElement("div",{style:{textAlign:"center",marginBottom:"2rem"}},c.a.createElement(K,{level:2},"Upload Game")),c.a.createElement(z.a,{onSubmit:T},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement(V.a,{onDrop:function(e){if(e[0]){var t=new FormData;t.append("file",e[0]),o.a.post("/api/game/uploadfiles",t,{header:{"content-type":"multipart/form-data"}}).then((function(e){e.data.success?L(e.data.location):alert("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))}else alert("\uc190\uc0c1\ub41c \ud30c\uc77c\uc785\ub2c8\ub2e4.")},multiple:!1,maxSize:1e9},(function(e){var t=e.getRootProps,a=e.getInputProps;return c.a.createElement("div",Object.assign({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),c.a.createElement("input",a()),c.a.createElement(U.a,{type:"plus",style:{fontSize:"3rem"}}))})),C&&c.a.createElement("div",null,c.a.createElement("img",{className:"thumbnail__img",src:C,alt:"thumbnail"}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,"Title"),c.a.createElement(R.a,{onChange:function(e){i(e.currentTarget.value)},value:l}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,"Description"),c.a.createElement(J,{onChange:function(e){p(e.currentTarget.value)},value:d}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("select",{onChange:function(e){h(e.currentTarget.value)}},Z.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("select",{onChange:function(e){var t=e.currentTarget.value;j(e.currentTarget[t].text)}},$.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"ratio",checked:S,onChange:B}),"\ucef4\ud4e8\ud130"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"ratio",checked:!S,onChange:B}),"\uc2a4\ub9c8\ud2b8\ud3f0"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(A.a,{type:"primary",size:"large",onClick:T},"Next Step")))};a(82),a(153),x.a.Title;var te=a(27),ae=a(17),ne=(a(1017),a(1018),a(1019),a(1020),function(e){var t=e.characterList.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",{className:"CharacterBlock",style:{left:"".concat(e.posX,"%")}},c.a.createElement("div",{className:"character__container",style:{height:"".concat(e.size,"%"),top:"".concat(e.posY,"%")}},c.a.createElement("img",{className:"characterImg",src:e.image,alt:"img"}))))}));return c.a.createElement("div",{className:"CharacterBlocks"},t)}),ce=(a(1021),a(1105)),re=z.a.create({name:"modal_form"})((function(e){var t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form,l=e.remainTime,i=r.getFieldDecorator;return B("Enter",(function(){n()})),t?c.a.createElement(ce.a,{visible:!0,title:"\uc120\ud0dd\uc9c0 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694 (".concat(l,")"),okText:"Submit",onCancel:a,onOk:n},c.a.createElement(z.a,{layout:"vertical"},c.a.createElement(z.a.Item,{label:"Title"},i("title",{rules:[{required:!0,message:"Please input the title of collection!"}]})(c.a.createElement(R.a,{ref:function(e){return e&&e.focus()}}))))):""}));function le(e){return{type:"gameLoading_gamePlay",payload:e}}function ie(e){return{type:"pause_gamePlay",payload:e}}var se=function(e){var t,a=e.scene_id,r=e.scene_depth,l=e.game_id,s=e.scene_next_list,u=Object(m.b)(),d=Object(i.f)(),p=Object(m.c)((function(e){return e.user})),f=Object(m.c)((function(e){return e.sync.emptyNum})),E=p.userData._id.toString(),h=Object(n.useState)(!1),y=Object(v.a)(h,2),_=y[0],O=y[1],j=Object(n.useState)(null),k=Object(v.a)(j,2),N=k[0],S=k[1],x=Object(n.useState)(0),w=Object(v.a)(x,2),I=w[0],C=w[1],L=Object(n.useState)(null),B=Object(v.a)(L,2),T=B[0],D=B[1],M=Object(n.useState)(1),F=Object(v.a)(M,2),P=F[0],z=F[1],R=Object(n.useCallback)((function(e){null!==e&&S(e)}),[]),U=function(){Ft.emit("empty_num_increase",{scene_id:a,user_id:E}),clearTimeout(T),console.log("deleted -- ",T),O(!1),u(ie(!1))},H=Object(n.useState)(0),A=Object(v.a)(H,2),G=A[0],q=A[1];Object(n.useEffect)((function(){Ft.off("validated"),Ft.on("validated",(function(e){z(-1*P)})),Ft.off("decrease_failed"),Ft.on("decrease_failed",(function(){O(!1),q(0),q(1)})),Ft.emit("validate_empty_num",{scene_id:a})}),[a]),Object(n.useEffect)((function(){G&&(clearTimeout(T),console.log("failed.. deleted -- ",T),console.log("visible false"))}),[G]);var W=Object(n.useState)(),X=Object(v.a)(W,2),Q=X[0],Y=X[1];return Object(n.useEffect)((function(){var e=(Array.isArray(s)?s.length:0)+f;e>=0&&e<=4&&(console.log("working Cnt : ",e),Y(Object(ae.a)(Array(4-e)).map((function(e,t){return c.a.createElement("div",{key:t},"\uc791\uc5c5\uc911..",c.a.createElement("br",null))}))))}),[f,s]),c.a.createElement(c.a.Fragment,null,Q,f>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"choice",onClick:function(){u(ie(!0)),clearTimeout(T),console.log("deleted -- ",T);var e=30;C(e),t=setInterval((function(){if(console.log("timer is not deleted~~~~~~~~~~~"),0===--e)return console.log("tick\uc774 0\uc774\ub77c\uc11c \uc2e4\ud589\ud569\ub2c8\ub2e4."),clearInterval(t),void U();C(e)}),970),console.log("made -- ",t),D(t),Ft.emit("empty_num_decrease",{scene_id:a,user_id:E}),O(!0)},style:{color:"red"}},"\uc120\ud0dd\uc758 \uae38...")),c.a.createElement(re,{ref:R,visible:_,onCancel:U,onCreate:function(){N.validateFields(function(){var e=Object(b.a)(g.a.mark((function e(t,n){var c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(T),console.log("deleted -- ",T),!t&&_){e.next=4;break}return e.abrupt("return");case 4:return c={gameId:l,prevSceneId:a,isFirst:0,sceneDepth:r+1,title:n.title},e.next=7,o.a.post("/api/scene/create",c);case 7:i=e.sent,Ft.emit("created_choice",{sceneId:a,userId:E,exp:i.data.exp}),N.resetFields(),O(!1),d.replace({pathname:"/scene/make",state:{gameId:l,sceneId:i.data.sceneId}});case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},remainTime:I}))},oe=a(533);var ue=function(e,t){var a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t})),Object(n.useEffect)((function(){function t(e){a.current(e)}return document.addEventListener(e,t),function(){return document.removeEventListener(e,t)}}),[])};var me=function(e){var t=e.cut_script,a=e.setIsTyping,r=Object(n.useState)(!1),l=Object(v.a)(r,2),i=l[0],s=l[1],o=Object(oe.a)(t,{pace:function(){return 150},onFinished:function(){s(!0)}}),u=Object(v.a)(o,2),m=u[0],d=u[1].skip;function p(e){d()}return B("Enter",p),B("Space",p),ue("mouseup",p),Object(n.useEffect)((function(){return function(){a(!1)}}),[i]),t?c.a.createElement("div",null,m):c.a.createElement("div",null)},de=function(e){var t=e.cut_name,a=e.cut_script,n=e.setIsTyping,r=e.isTyping;return c.a.createElement("div",{className:"text_container"},c.a.createElement("div",{className:"name_block"},t),c.a.createElement("hr",{className:"text_line"}),c.a.createElement("br",null),c.a.createElement("div",{className:"text_block"},c.a.createElement("div",null,r?c.a.createElement(me,{cut_script:a,setIsTyping:n}):a)))},pe=function(e){var t=e.game_id,a=e.cut_name,n=e.cut_script,r=e.scene_next_list,l=e.scene_id,i=e.scene_depth,s=e.setIsTyping,o=e.isTyping,u=r.map((function(e,a){return c.a.createElement(L.b,{to:{pathname:"/gameplay",key:a,state:{gameId:t,sceneId:e.sceneId}},key:a},e.script," ",c.a.createElement("br",null))}));return c.a.createElement("div",{className:"text_container"},c.a.createElement("div",{className:"name_block"},a),c.a.createElement("hr",{className:"text_line"}),c.a.createElement("div",{className:"text_block"},o?c.a.createElement(me,{cut_script:n,setIsTyping:s}):n,c.a.createElement("br",null),c.a.createElement("div",null,u),c.a.createElement("br",null),r.length<4?c.a.createElement("div",null,c.a.createElement(se,{scene_id:l,scene_depth:i,game_id:t,scene_next_list:r})):c.a.createElement("div",null)))};a(1022);var fe=function(e){var t=e.gameId,a=e.sceneId,r=e.trigger,l=e.setTrigger,i=Object(m.c)((function(e){return e.user})),s=Object(n.useState)(""),u=Object(v.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(v.a)(f,2),b=g[0],h=g[1];return r?c.a.createElement("div",{className:"dislike_popup"},c.a.createElement("div",{className:"dislike_inner"},c.a.createElement("button",{className:"close_btn",onClick:function(){return l((function(e){return!e}))}},"close"),c.a.createElement("label",null,"Title"),c.a.createElement("input",{onChange:function(e){p(e.currentTarget.value)},value:d}),c.a.createElement("label",null,"Description"),c.a.createElement("textarea",{onChange:function(e){h(e.currentTarget.value)},value:b}),c.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault();var n={title:d,description:b,user:i.userData._id,sceneId:a,gameId:t};o.a.post("/api/complaint/save",n).then((function(e){e.data.success?(E.a.success("\uac10\uc0ac\ud569\ub2c8\ub2e4. \uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),l((function(e){return!e}))):E.a.error("\uc2e0\uace0\ud558\ub294\ub370 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}))}},"\uc2e0\uace0\ud558\uae30"))):""};a(1023);function ge(){var e=document.getElementsByClassName("HistoryMap_inner")[0],t=window.getComputedStyle(e).getPropertyValue("transform"),a="none"!==t?parseInt(t.split(",")[4]):0;e.style.transform="translate(".concat(a+250,"px, 0px)")}function be(){var e=document.getElementsByClassName("HistoryMap_inner")[0],t=window.getComputedStyle(e).getPropertyValue("transform"),a="none"!==t?parseInt(t.split(",")[4]):0;e.style.transform="translate(".concat(a-250,"px, 0px)")}var ve=function(e){var t=e.userhistory,a=e.setTrigger,r=e.history,l=r.gameId,i=r.sceneId,s=Object(n.useState)(null),u=Object(v.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=Object(v.a)(p,2),g=f[0],b=f[1],h=Object(n.useState)(null),y=Object(v.a)(h,2),_=y[0],O=y[1];function j(e,t,a){b(setTimeout((function(){!function(e){var t=e.index,a=e.scene,n=e.setSceneInfo;o.a.get("/api/game/getSceneInfo/".concat(a)).then((function(e){if(e.data.success){var a=e.data.scene.cutList,c=a[a.length-1];console.log("cutlist : ",a),console.log("lastcut : ",c),n({sceneindex:t,background:null===c||void 0===c?void 0:c.background,name:null===c||void 0===c?void 0:c.name,script:null===c||void 0===c?void 0:c.script})}else alert("Scene \uc815\ubcf4 \uc5c6\uc74c...")}))}({index:e,scene:t,setSceneInfo:a})}),300))}var k=i.map((function(e,t){return c.a.createElement("div",{className:"HistoryMap_scene",key:t+1,onMouseEnter:function(){return j(t,e,O)},onMouseLeave:function(){return O(null),void clearTimeout(g)},onClick:function(){return d(t+1)}},_&&_.sceneindex===t?c.a.createElement("div",null,c.a.createElement("div",{className:"HistoryMap_scene_num"}," #",t+1),c.a.createElement("img",{className:"HistoryMap_scene_img",src:_.background}),c.a.createElement("div",{className:"HistoryMap_scene_name"},_.name,":"),c.a.createElement("div",{className:"HistoryMap_scene_text"},'"',_.script,'"')):c.a.createElement("div",null,c.a.createElement("div",{className:"HistoryMap_scene_num"}," #",t+1)))}));return e.trigger?c.a.createElement("div",{className:"HistoryMap_popup"},c.a.createElement("button",{className:"close_btn",onClick:function(){a(!1)}},"close"),c.a.createElement("div",{className:"toleft_btn",onClick:ge},"to left \ub098\uc911\uc5d0 \uc774\ubbf8\uc9c0\ub85c \ub300\uccb4"),c.a.createElement("div",{className:"toright_btn",onClick:be},"to right \ub098\uc911\uc5d0 \uc774\ubbf8\uc9c0\ub85c \ub300\uccb4"),c.a.createElement("div",{className:"HistoryMap_inner"},k),m?c.a.createElement("div",{className:"warning_popup"},c.a.createElement("button",{className:"ok_btn",onClick:function(){return function(e){var t=e.userhistory,a=e.gameId,n=e.sceneId,c=e.GoScene,r={data:{sceneIndex:c-1}};o.a.post("/api/game/refreshHistory",r).then((function(e){if(e.data.success){t.replace({pathname:"/gameplay",state:{sceneId:n[c-1],gameId:a}});for(var r=document.getElementsByClassName("close_btn"),l=r.length-1;l>=0;l--)r[l].click()}else E.a.error("Scene \ubcc0\uacbd \uc694\uccad \uc2e4\ud328")}))}({userhistory:t,gameId:l,sceneId:i,GoScene:m})}},"ok"),c.a.createElement("button",{className:"close_btn",onClick:function(){return d(null)}},"close"),c.a.createElement("div",{className:"warning_text"},"are you sure? \ub2e4\uc2dc\ub294 \ub3cc\uc544\uc62c \uc218 \uc5c6\ub2e4?")):null):null},Ee=(a(1024),0),he=1,ye=2,_e=3,Oe=4,je=5,ke=function(){switch(Object(m.c)((function(e){return e.gameplay.loadingType}))){case Ee:return null;case he:return c.a.createElement("div",{style:{animation:"1.5s ease-out 0s 1 basic"},className:"loading_page"},c.a.createElement("div",{className:"loading_icon"},"loading....."));case ye:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideLeft"},className:"loading_page"});case _e:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideRight"},className:"loading_page"});case Oe:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideUp"},className:"loading_page"});case je:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideDown"},className:"loading_page"});default:return null}};function Ne(e){return console.log(e),{type:"load_empty_num",payload:void 0!==e.emptyNum?e.emptyNum:o.a.get("/api/game/getSceneInfo/".concat(e.sceneId)).then((function(e){return console.log(e.data),e.data.scene.sceneTmp.emptyNum}))}}function Se(e){return{type:"navbar_control",payload:e}}function xe(){if("undefined"!==typeof document.fullscreenElement)return"fullscreenElement";if("undefined"!==typeof document.mozFullScreenElement)return"mozFullScreenElement";if("undefined"!==typeof document.msFullscreenElement)return"msFullscreenElement";if("undefined"!==typeof document.webkitFullscreenElement)return"webkitFullscreenElement";throw new Error("fullscreenElement is not supported by this browser")}a(1025);var we=[{sceneId:1,link:null},{sceneId:2,link:null},{sceneId:3,link:null},{sceneId:4,link:null},{sceneId:null,link:null},{sceneId:null,link:null},{sceneId:7,link:null},{sceneId:8,link:null},{sceneId:9,link:null},{sceneId:10,link:null},{sceneId:11,link:null},{sceneId:12,link:null},{sceneId:13,link:null},{sceneId:14,link:null},{sceneId:15,link:null},{sceneId:16,link:null},{sceneId:17,link:null},{sceneId:18,link:null},{sceneId:19,link:null},{sceneId:20,link:null},{sceneId:21,link:null},{sceneId:22,link:null}],Ie=[0,0],Ce=[50,0],Le=!1;var Be=function(e){var t=e.trigger,a=(e.userhistory,e.setTrigger),r=e.history,l=(r.gameId,r.sceneId,Object(n.useState)()),i=Object(v.a)(l,2),s=i[0],o=i[1];function u(e){Ie=[e.pageX,e.pageY],Le=!0,e.preventDefault()}function m(e){Le=!1,e.preventDefault()}function d(e){Le&&(Ie[0]===e.pageX&&Ie[1]===e.pageY||(Ce=[Ce[0]-(Ie[0]-e.pageX),Ce[1]-(Ie[1]-e.pageY)],o(Ce),Ie=[e.pageX,e.pageY])),e.preventDefault()}!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Object(n.useState)(!1),a=Object(v.a)(t,2),c=a[0],r=a[1];c||(e(),r(!0))}((function(){o(Ce)})),Object(n.useEffect)((function(){var e=document.getElementsByClassName("TreeMap_popup");t?(e[0].addEventListener("mousedown",u),e[0].addEventListener("mouseup",m),e[0].addEventListener("mousemove",d)):e[0]&&(e[0].removeEventListener("mousedown",u),e[0].removeEventListener("mouseup",m),e[0].removeEventListener("mousemove",d))}),[t]);var p=1,f=1,g=0,b=we.map((function(e,t){return g===f&&(p+=1,g=0,f*=4),g+=1,c.a.createElement("div",{className:"TreeMap_nodeContainer",style:{width:"25%",height:1/f*100+"%",left:(p-1)/4*100+"%",top:(g-1)/f*100+"%"}},c.a.createElement("div",{className:"TreeMap_node",style:{width:"1rem",height:"1rem"}}),4!==p?c.a.createElement(n.Fragment,null,c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"12.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"37.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"62.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"87.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"50%",top:"50%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine_vertical"})):null)}));return t?c.a.createElement("div",{className:"TreeMap_popup"},c.a.createElement("button",{className:"close_btn",onClick:function(){a(!1)}},"close"),c.a.createElement("div",{className:"TreeMap_inner",style:{width:"40%",height:5*Math.pow(4,3)+"%",left:s[0],top:s[1]}},b)):null},Te=a(324),De=a(527),Me=a.n(De),Fe=a(526),Pe=a.n(Fe),ze=a(525),Re=a.n(ze),Ue=a(325),He=new Audio;He.volume=.5;var Ae=new Audio;Ae.volume=.5;var Ge=function(e){var t,a,r,l=Object(i.g)().state,s=l.gameId,u=l.sceneId,d=e.history,p=Object(m.b)(),f=Object(m.c)((function(e){return e.gameplay.isPause})),g=Object(n.useState)(window.innerWidth),b=Object(v.a)(g,2),h=b[0],y=b[1],_=Object(n.useState)(window.innerHeight),O=Object(v.a)(_,2),j=O[0],k=O[1],N=Object(n.useState)(0),S=Object(v.a)(N,2),x=S[0],w=S[1],I=Object(n.useState)({}),C=Object(v.a)(I,2),L=C[0],T=C[1],D=Object(n.useState)(!1),M=Object(v.a)(D,2),F=M[0],P=M[1],z=Object(n.useState)({}),R=Object(v.a)(z,2),U=R[0],H=R[1],A=Object(n.useState)(!1),G=Object(v.a)(A,2),q=G[0],W=G[1],X=Object(n.useState)(!1),Q=Object(v.a)(X,2),Y=Q[0],V=Q[1],J=Object(m.c)((function(e){return e.sync.prevSceneId})),K=Object(n.useRef)(null);!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Object(n.useState)(!1),a=Object(v.a)(t,2),c=a[0],r=a[1];c||(e(),r(!0))}((function(){console.log("")}));try{var Z=function(e){var t=c.a.useState(null!=document[xe()]),a=Object(v.a)(t,2),n=a[0],r=a[1];return c.a.useLayoutEffect((function(){return document.onfullscreenchange=function(){return r(null!=document[xe()])},function(){return document.onfullscreenchange=void 0}})),[n,function(){null!=e.current&&e.current.requestFullscreen().then((function(){r(null!=document[xe()])})).catch((function(){r(!1)}))}]}(K),$=Object(v.a)(Z,2);t=$[0],a=$[1]}catch(qe){r="Fullscreen not supported",t=!1,a=void 0}B("Enter",De),B("Space",De),B("Digit1",Fe),B("Digit2",Fe),B("Digit3",Fe),B("Digit4",Fe),Object(n.useEffect)((function(){Ft.off("accept_final_change"),Ft.on("accept_final_change",(function(e){var t=e.sceneId,a=e.title,n=L.nextList?Object(ae.a)(L.nextList):[];n.push({sceneId:t,script:a});var c=Object(te.a)({},L,{nextList:n});T(c)}))}),[L]);var ee=Object(n.useState)(.5),ce=Object(v.a)(ee,2),re=ce[0],se=ce[1],oe=Object(n.useState)(!1),ue=Object(v.a)(oe,2),me=ue[0],ge=ue[1],be=Object(n.useRef)(.5),Ee=function(e){se(e),ge(0===e),He.volume=e,Ae.volume=e},he=Object(n.useState)(!0),ye=Object(v.a)(he,2),_e=ye[0],Oe=ye[1];function je(e){_e&&Oe(!1),L.cutList[e].bgm.music&&(e>0&&L.cutList[e-1].bgm.music==L.cutList[e].bgm.music||(He.pause(),He.src=L.cutList[e].bgm.music,He.play())),L.cutList[e].sound.music&&(Ae.pause(),Ae.src=L.cutList[e].sound.music,Ae.play())}var we=Object(n.useState)(!0),Ie=Object(v.a)(we,2),Ce=Ie[0],Le=Ie[1];function De(e){!Ce&&x<L.cutList.length-1&&!f&&(je(x+1),w(x+1),Le(!0))}function Fe(e){if(x===L.cutList.length-1&&!f)if(L.nextList[parseInt(e.key)-1])d.replace({pathname:"/gameplay",state:{sceneId:L.nextList[parseInt(e.key)-1].sceneId,gameId:s}});else if(parseInt(e.key)-1===L.nextList.length){p(ie(!0)),e.preventDefault();var t=document.getElementById("choice");t&&t.click()}}Object(n.useEffect)((function(){Ft.emit("leave room",{room:J}),Ft.emit("room",{room:u}),p({type:"SAVE_PREV_SCENE",payload:{prevSceneId:u}.prevSceneId}),Ft.off("empty_num_changed"),Ft.on("empty_num_changed",(function(e){p(Ne({sceneId:u,emptyNum:e.emptyNum}))})),Ft.emit("validate_empty_num",{scene_id:u})}),[u]),Object(n.useEffect)((function(){p(Se(!1))}),[]),Object(n.useEffect)((function(){p(ie(!!(q||F||Y)))}),[q,F,Y]),Object(n.useEffect)((function(){o.a.get("/api/game/getnextscene/".concat(s,"/").concat(u)).then((function(t){if(t.data.success){var a={gameId:s,sceneId:t.data.sceneIdList};H(a),w(0),He.pause(),Ae.pause(),Oe(!0),T(t.data.scene),p(ie(!1)),p(le(0)),p(le(6))}else E.a.error("Scene \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),e.history.replace("/game/".concat(s))}))}),[u]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){y(window.innerWidth),k(window.innerHeight)}))}),[window.innerWidth,window.inner]);var ze,Ge=t?0:.1;return ze=.5625*h>j?{width:"".concat(j*(1-2*Ge)/.5625,"px"),height:"".concat(j*(1-2*Ge),"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(h*(1-2*Ge),"px"),height:"".concat(h*(1-2*Ge)*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")},Object(n.useEffect)((function(){return p(Ne({sceneId:u})),function(){He.pause(),Ae.pause()}}),[]),L.cutList?(0==x&&_e&&je(0),c.a.createElement("div",{className:"".concat(t?"gamePlay__container_fullscreen":"gamePlay__container"),ref:K},c.a.createElement("div",{className:"".concat(t?"gamePlay__mainContainer_fullscreen":"gamePlay__mainContainer")},c.a.createElement("div",{className:"".concat(t?"backgroundImg_container_fullscreen":"backgroundImg_container"),style:ze,onClick:function(e){return De()}},c.a.createElement(ke,null),L.cutList[x]&&L.cutList[x].background?c.a.createElement("img",{className:"backgroundImg",src:L.cutList[x].background,alt:"Network Error"}):c.a.createElement("div",null),c.a.createElement(ne,{characterList:L.cutList[x].characterList}),x===L.cutList.length-1?c.a.createElement(pe,{game_id:s,cut_name:L.cutList[x].name,cut_script:L.cutList[x].script,scene_depth:L.depth,scene_id:L._id,scene_next_list:L.nextList,setIsTyping:Le,isTyping:Ce}):c.a.createElement(de,{cut_name:L.cutList[x].name,cut_script:L.cutList[x].script,setIsTyping:Le,isTyping:Ce}),c.a.createElement(ve,{userhistory:d,history:U,trigger:q,setTrigger:W}),c.a.createElement(Be,{userhistory:d,history:U,trigger:Y,setTrigger:V}))),c.a.createElement("div",{className:"gamePlay__btn_container"},c.a.createElement("div",{className:"gamePlay__btn",onClick:function(){me?(ge(!1),Ee(be.current)):(be.current=re,ge(!0),Ee(0))}},me?c.a.createElement(Pe.a,null):c.a.createElement(Me.a,null)),c.a.createElement("div",{style:{width:"80px"}},c.a.createElement(Re.a,{min:0,max:1,step:.02,value:re,onChange:function(e){Ee(e)}})),c.a.createElement("div",null,c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){return W((function(e){return!e}))}},"\ubbf8\ub2c8\ub9f5"),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){V((function(e){return!e}))}},"\ud2b8\ub9ac\ub9f5"),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){return P((function(e){return!e}))}},"\uc2e0\uace0")),r?c.a.createElement("button",{onClick:function(){return alert("Fullscreen is unsupported by this browser, please try another browser.")},className:"gamePlay__btn"},r):t?c.a.createElement("button",{onClick:function(){return document.exitFullscreen()},className:"gamePlay__btn"},c.a.createElement(Te.a,{icon:Ue.a})):c.a.createElement("button",{onClick:a,className:"gamePlay__btn"},c.a.createElement(Te.a,{icon:Ue.b}))),c.a.createElement(fe,{sceneId:u,gameId:s,trigger:F,setTrigger:P}))):c.a.createElement(ke,null)};a(1030);var qe=function(e){var t=e.imgUrl,a=e.setBackgroundImg;return c.a.createElement("div",{onClick:function(){a(t)}},c.a.createElement("img",{src:"".concat(t),alt:"img"}))};var We=function(e){var t=e.gameDetail,a=e.setBackgroundImg,n=e.setMakeModalState,r=t.background.map((function(e,t){return c.a.createElement("div",{className:"background",key:"".concat(t)},c.a.createElement(qe,{imgUrl:e.image,setBackgroundImg:a}))}));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){n(2)}},"\ucd94\uac00"),c.a.createElement("div",null,r))};function Xe(e){return{type:"select_character",payload:e}}var Qe=function(e){var t=e.character,a=e.index,n=Object(m.b)();return c.a.createElement("div",null,c.a.createElement("div",{onClick:function(){n(Xe(Object(te.a)({},t,{index:a})))}},c.a.createElement("img",{src:"".concat(t.image_array[0]),alt:"img"})))};var Ye=function(e){var t=e.gameDetail,a=e.setCharacterList,n=e.setMakeModalState,r=e.setName,l=t.character.map((function(e,t){return c.a.createElement("div",{className:"character",key:"".concat(t)},c.a.createElement(Qe,{character:e,index:t,setCharacterList:a,setName:r}))}));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){n(1)}},"\ucd94\uac00"),c.a.createElement("div",null,l))};a(1031);var Ve=function(e){var t=e.bgm_audio,a=e.bgm,n=e.setBgmFile;return c.a.createElement("div",{onClick:function(){n(a),t.src=a.music,t.play()}},c.a.createElement("img",{src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),a.name)};var Je=function(e){var t=e.gameDetail,a=e.bgm_audio,n=e.setBgmFile,r=e.setMakeModalState,l=t.bgm.map((function(e,t){return c.a.createElement("div",{className:"bgm",key:"".concat(t)},c.a.createElement(Ve,{bgm_audio:a,bgm:e,setBgmFile:n}))}));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){r(3)}},"\ucd94\uac00"),c.a.createElement("div",null,l))};a(1032);var Ke=function(e){var t=e.sound_audio,a=e.sound,n=e.setSoundFile;return c.a.createElement("div",{onClick:function(){n(a),t.src=a.music,t.play()}},c.a.createElement("img",{src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),a.name)};var Ze=function(e){var t=e.gameDetail,a=e.sound_audio,n=e.setSoundFile,r=e.setMakeModalState,l=t.sound.map((function(e,t){return c.a.createElement("div",{className:"sound",key:"".concat(t)},c.a.createElement(Ke,{sound_audio:a,sound:e,setSoundFile:n}))}));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){r(4)}},"\ucd94\uac00"),c.a.createElement("div",null,l))},$e=(a(181),function(e){var t=e.setTag,a=e.tag;return c.a.createElement("div",{className:"tabs"},c.a.createElement("div",{className:"".concat(1===a?"tab is-selected":"tab"),onClick:function(){return t(1)}},"Character"),c.a.createElement("div",{className:"".concat(2===a?"tab is-selected":"tab"),onClick:function(){return t(2)}},"Background"),c.a.createElement("div",{className:"".concat(3===a?"tab is-selected":"tab"),onClick:function(){return t(3)}},"Bgm"),c.a.createElement("div",{className:"".concat(4===a?"tab is-selected":"tab"),onClick:function(){return t(4)}},"Sound"))}),et=a(1110);a(1033);var tt=function(e){var t=e.onDrop,a=e.multiple,n=e.maxSize,r=e.accept;return c.a.createElement(V.a,{onDrop:t,multiple:a,maxSize:n,accept:r},(function(e){var t=e.getRootProps,a=e.getInputProps;return c.a.createElement("div",Object.assign({className:"dropzone"},t()),c.a.createElement("input",a()),c.a.createElement(et.a,{className:"dropzone-icon"}))}))},at=a(1111),nt=a(1112),ct=(a(1034),R.a.TextArea);var rt=function(e){var t=e.blobGame,a=e.setBlobGame,r=e.charPageNum,l=e.setCharFileQueue,i=e.setCharBlobList,s=Object(n.useState)([]),o=Object(v.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(0),p=Object(v.a)(d,2),f=p[0],g=p[1],b=Object(n.useRef)(0),h=function(e){a((function(t){return t.character[r.current].name=e.currentTarget.value,t})),g((function(e){return e+1}))},y=function(e){a((function(t){return t.character[r.current].description=e.currentTarget.value,t})),g((function(e){return e+1}))},_=function(e){for(var n=function(){if(!e[c])return E.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694."),{v:void 0};var n=URL.createObjectURL(e[c]);i((function(e){return[].concat(Object(ae.a)(e),[n])})),"-1"===b.current?(a((function(e){return e.character=[].concat(Object(ae.a)(e.character),[{name:"",description:"",image_array:[n]}]),e})),b.current=t.character.length-1):a((function(e){return e.character[b.current].image_array=[].concat(Object(ae.a)(e.character[b.current].image_array),[n]),e}))},c=0;c<e.length;c++){var r=n();if("object"===typeof r)return r.v}l((function(t){return[].concat(Object(ae.a)(t),[{index:Number(b.current),array:e}])})),g((function(e){return e+1}))};return Object(n.useEffect)((function(){if(t.character&&r.current<t.character.length){var e=t.character[r.current].image_array.map((function(e,a){return c.a.createElement("div",{id:r.current,className:"largeBox",key:a},c.a.createElement("img",{className:"smallBox",src:e,alt:"img"}),0===a&&c.a.createElement(z.a,null,c.a.createElement("label",null,"\uc774\ub984"),c.a.createElement(R.a,{onChange:h,value:t.character[r.current].name}),c.a.createElement("label",null,"\uc0c1\uc138\uc124\uc815"),c.a.createElement(ct,{onChange:y,value:t.character[r.current].description})),a===t.character[r.current].image_array.length-1&&c.a.createElement(tt,{onDrop:_,multiple:!0,maxSize:10485761,accept:"image/*"}))}));m(e)}else m("")}),[f,t]),ue("mousedown",(function(e){for(var t=0;t<e.path.length;t++)if(e.path[t].id)return void(b.current=e.path[t].id)})),c.a.createElement("div",null,c.a.createElement("div",{className:"character-container"},0!==u&&c.a.createElement("div",null,u)),t.character&&r.current===t.character.length&&c.a.createElement("div",{id:-1},c.a.createElement(tt,{onDrop:_,multiple:!0,maxSize:10485761,accept:"image/*"})),0!==r.current&&c.a.createElement(at.a,{style:{fontSize:"3rem"},onClick:function(){r.current--,g((function(e){return e+1}))},twoToneColor:"#52c41a"}),t.character&&r.current!==t.character.length&&c.a.createElement(nt.a,{style:{fontSize:"3rem"},onClick:function(){r.current++,g((function(e){return e+1}))},twoToneColor:"#52c41a"}),t.character&&c.a.createElement("div",null," ",r.current,"/",t.character.length))};a(1035);var lt=function(e){var t=e.game,a=e.setFileQueue,r=e.setTypeQueue,l=e.setBackBlobList,i=e.backBlobList,s=Object(n.useState)([]),o=Object(v.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)([]),p=Object(v.a)(d,2),f=p[0],g=p[1];return Object(n.useEffect)((function(){t.background&&m(t.background.map((function(e,t){return c.a.createElement("div",{className:"largeBox1",key:t},c.a.createElement("img",{className:"smallBox12",src:e.image,alt:"img"}))})))}),[t]),Object(n.useEffect)((function(){i&&g(i.map((function(e,t){return c.a.createElement("div",{className:"largeBox1",key:t},c.a.createElement("img",{className:"smallBox12",src:e,alt:"img"}))})))}),[i]),c.a.createElement("div",null,c.a.createElement(tt,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void E.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),r((function(e){return[].concat(Object(ae.a)(e),[1])})),l((function(a){return[].concat(Object(ae.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"image/*"}),c.a.createElement("div",{className:"background-container"},0!==u&&c.a.createElement("div",null,u),0!==f&&c.a.createElement("div",null,f)))};a(495);var it=function(e){var t=e.game,a=e.setFileQueue,r=e.setTypeQueue,l=e.setBgmBlobList,i=e.bgmBlobList,s=e.setBgmBlobNames,o=e.bgmBlobNames,u=Object(n.useState)([]),m=Object(v.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)([]),g=Object(v.a)(f,2),b=g[0],h=g[1];return Object(n.useEffect)((function(){t.bgm&&p(t.bgm.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),e.name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),e.name))})))}),[t]),Object(n.useEffect)((function(){i&&h(i.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),o[t].name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),o[t].name))})))}),[i]),c.a.createElement("div",null,c.a.createElement(tt,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void E.a.error("10MB \uc774\ud558\uc758 \uc74c\uc6d0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),r((function(e){return[].concat(Object(ae.a)(e),[2])})),s((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),l((function(a){return[].concat(Object(ae.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"audio/*"}),c.a.createElement("div",{className:"music-container"},0!==d&&c.a.createElement("div",null,d),0!==b&&c.a.createElement("div",null,b)))};var st=function(e){var t=e.game,a=e.setFileQueue,r=e.setTypeQueue,l=e.setSoundBlobList,i=e.soundBlobList,s=e.setSoundBlobNames,o=e.soundBlobNames,u=Object(n.useState)([]),m=Object(v.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)([]),g=Object(v.a)(f,2),b=g[0],h=g[1];return Object(n.useEffect)((function(){t.sound&&p(t.sound.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),e.name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),e.name))})))}),[t]),Object(n.useEffect)((function(){i&&h(i.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),o[t].name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"https://neverending.s3.ap-northeast-2.amazonaws.com/original/music_icon.jpg",alt:"img"}),o[t].name))})))}),[i]),c.a.createElement("div",null,c.a.createElement(tt,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void E.a.error("10MB \uc774\ud558\uc758 \uc74c\uc6d0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),r((function(e){return[].concat(Object(ae.a)(e),[3])})),s((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),l((function(a){return[].concat(Object(ae.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"audio/*"}),c.a.createElement("div",{className:"music-container"},0!==d&&c.a.createElement("div",null,d),0!==b&&c.a.createElement("div",null,b)))},ot=a(318),ut=a.n(ot),mt=function(e){var t=e.gameId,a=e.visible,r=e.setTag,l=e.tag,i=e.setReload,s=Object(n.useState)([]),u=Object(v.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)([]),f=Object(v.a)(p,2),g=f[0],b=f[1],h=Object(n.useState)([]),y=Object(v.a)(h,2),_=y[0],O=y[1],j=Object(n.useState)([]),k=Object(v.a)(j,2),N=k[0],S=k[1],x=Object(n.useState)([]),w=Object(v.a)(x,2),I=w[0],C=w[1],L=Object(n.useState)([]),B=Object(v.a)(L,2),T=B[0],D=B[1],M=Object(n.useState)([]),F=Object(v.a)(M,2),P=F[0],z=F[1],R=Object(n.useState)([]),U=Object(v.a)(R,2),H=U[0],A=U[1],G=Object(n.useState)([]),q=Object(v.a)(G,2),W=q[0],X=q[1],Q=Object(n.useRef)(0),Y=Object(n.useState)([]),V=Object(v.a)(Y,2),J=V[0],K=V[1],Z=Object(n.useState)([]),$=Object(v.a)(Z,2),ee=$[0],te=$[1],ae={gameId:t};Object(n.useEffect)((function(){o.a.post("/api/game/getgamedetail",ae).then((function(e){e.data.success?(d(e.data.gameDetail),X(ut.a.cloneDeep(e.data.gameDetail))):alert("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var ne=function(){ee.forEach((function(e){e&&URL.revokeObjectURL(e)})),N.forEach((function(e){e&&URL.revokeObjectURL(e)})),I.forEach((function(e){e&&URL.revokeObjectURL(e)})),P.forEach((function(e){e&&URL.revokeObjectURL(e)}))},re=!1,le=function(){var e,t;J.length?function(){var a=Array.from({length:W.character.length},(function(){return 0})),n=new FormData;for(e=0;e<W.character.length;e++)for(t=0;t<J.length;t++)J[t].index===e&&(a[e]+=J[t].array.length,J[t].array.forEach((function(e){n.append("files",e)})));o.a.post("/api/game/uploadfile",n,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?ie(a,e.data.files):alert("\uce90\ub9ad\ud130 DB \uc5c5\ub85c\ub4dc \uc2e4\ud328")}))}():ie(null,null)},ie=function(e,a){for(var n=0,c=0;c<W.character.length;c++)if(m.character[c]||m.character.push({name:"",description:"",image_array:[]}),m.character[c].name=W.character[c].name,m.character[c].description=W.character[c].description,e){for(var l=n;l<n+e[c];l++)console.log(a[l].location),m.character[c].image_array.push(a[l].location);n+=e[c]}var s={gameId:t,character:m.character};o.a.post("/api/game/putCharDB",s).then((function(e){e.data.success?g.length||(i((function(e){return e+1})),r(0)):E.a.error("DB \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328")}))},se=function(){var e=new FormData;g.forEach((function(t){e.append("files",t)}));o.a.post("/api/game/uploadfile",e,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?oe(e.data.files):alert("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))},oe=function(e){for(var a={gameId:t,background:[],bgm:[],sound:[]},n=0;n<e.length;n++)switch(console.log(e[n]),_[n]){case 1:a.background.push({name:e[n].originalname,image:e[n].location});break;case 2:a.bgm.push({name:e[n].originalname,music:e[n].location});break;case 3:a.sound.push({name:e[n].originalname,music:e[n].location});break;default:E.a.error("\uc815\uc758\ub418\uc9c0 \uc54a\uc740 \uc5c5\ub85c\ub4dc \ubc84\ud2bc\uc785\ub2c8\ub2e4.")}o.a.post("/api/game/putDB",a).then((function(e){e.data.success?(i((function(e){return e+1})),r(0)):E.a.error("DB \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328")}))};return c.a.createElement(ce.a,{className:"scenemake_modal",visible:a,okText:"Upload",onCancel:function(){ne(),r(0)},onOk:function(){re||(re=!0,ne(),le(),g.length&&se())},width:1e3,style:{top:20}},c.a.createElement($e,{setTag:r,tag:l}),1===l&&c.a.createElement(rt,{blobGame:W,setBlobGame:X,charPageNum:Q,setCharFileQueue:K,setCharBlobList:te}),2===l&&c.a.createElement(lt,{game:m,setFileQueue:b,setTypeQueue:O,setBackBlobList:S,backBlobList:N}),3===l&&c.a.createElement(it,{game:m,setFileQueue:b,setTypeQueue:O,setBgmBlobList:C,bgmBlobList:I,setBgmBlobNames:D,bgmBlobNames:T}),4===l&&c.a.createElement(st,{game:m,setFileQueue:b,setTypeQueue:O,setSoundBlobList:z,soundBlobList:P,setSoundBlobNames:A,soundBlobNames:H}))},dt=R.a.TextArea,pt=[{value:0,label:"Private"},{value:1,label:"Public"}],ft=[{value:0,label:"\uc0b4\uc544\ub0a8\uae30"},{value:1,label:"\ub85c\ub9e8\uc2a4"},{value:2,label:"\uc2a4\ud1a0\ub9ac"},{value:3,label:"\ucd94\ub9ac"},{value:4,label:"\ubcd1\ub9db"}],gt=function(e){var t=e.gameId,a=e.visible,r=e.setUploadModalState,l=e.onSubmit_saveScene,i=Object(m.c)((function(e){return e.user})),s=Object(n.useState)(""),u=Object(v.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(v.a)(f,2),b=g[0],h=g[1],y=Object(n.useState)(0),_=Object(v.a)(y,2),O=_[0],j=_[1],k=Object(n.useState)(ft[0].label),N=Object(v.a)(k,2),S=N[0],x=N[1],w=Object(n.useState)(""),I=Object(v.a)(w,2),C=I[0],L=I[1],B=Object(n.useState)([]),T=Object(v.a)(B,2),D=T[0],M=T[1],F=function(e){e.preventDefault(),""!==d&&""!==b&&""!==C?(P(),r(!1),l()):E.a.error("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},P=function(){URL.revokeObjectURL(C);var e=new FormData;D.forEach((function(t){e.append("files",t)})),o.a.post("/api/game/uploadfile",e,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?U(e.data.files[0].location):E.a.error("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))},U=function(e){var a={gameId:t,creator:i.userData._id,title:d,description:b,thumbnail:e,privacy:O,category:S,writer:[i.userData._id]};o.a.post("/api/game/uploadgameInfo",a).then((function(e){e.data.success||E.a.error("game\uc81c\uc791 \uc2e4\ud328")}))};return c.a.createElement(ce.a,{className:"scenemake_modal",visible:a,okText:"Upload",onCancel:function(){C&&URL.revokeObjectURL(C),r(!1)},onOk:F,width:1e3,style:{top:20}},c.a.createElement("div",null,c.a.createElement("label",null,"Upload Game"),c.a.createElement(z.a,{onSubmit:F},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(tt,{onDrop:function(e){e[0]?(URL.revokeObjectURL(C),L(URL.createObjectURL(e[0])),M(e)):E.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.")},multiple:!1,maxSize:10485761,accept:"image/*"}),C&&c.a.createElement("div",null,c.a.createElement("img",{className:"thumbnail__img",src:C,alt:"thumbnail"}))),c.a.createElement("label",null,"Title"),c.a.createElement(R.a,{onChange:function(e){p(e.currentTarget.value)},value:d}),c.a.createElement("label",null,"Description"),c.a.createElement(dt,{onChange:function(e){h(e.currentTarget.value)},value:b}),c.a.createElement("select",{onChange:function(e){j(e.currentTarget.value)}},pt.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("select",{onChange:function(e){var t=e.currentTarget.value;x(e.currentTarget[t].text)}},ft.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))))))},bt=(a(1036),{}),vt=function(e,t,a,n){e in bt||(bt[e]={}),t in bt[e]||(bt[e][t]=[]),bt[e][t].push([a,n]),e.addEventListener(t,a,n)},Et=function(e,t){if(e in bt){var a=bt[e];if(t in a)for(var n=a[t],c=n.length;c--;){var r=n[c];e.removeEventListener(t,r[0],r[1])}}};var ht=Object(n.memo)((function(e){var t=Object(m.b)(),a=e.charSchema,r=e.GameCharacterList,l=e.setCharacterList,i=e.index,s=(e.CharacterList,Object(n.useRef)()),o=Object(n.useRef)(),u=Object(n.useState)(!0),d=Object(v.a)(u,2),p=d[0],f=(d[1],Object(n.useState)(!0)),g=Object(v.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)(!1),y=Object(v.a)(h,2),_=y[0],O=y[1],j=Object(n.useState)(0),k=Object(v.a)(j,2),N=k[0],S=k[1],x=document.getElementById("backgroundImg_container"),w=[0,0],I=!1;function C(e){var t=[e.pageX,e.pageY];if(I&&p&&b){if(w[0]-e.pageX>3||w[1]-e.pageY>3||w[0]-e.pageX<-3||w[1]-e.pageY<-3){var a=x.offsetWidth,n=x.offsetHeight,c=Number(s.current.style.left.replace(/%/g,"")),r=Number(o.current.style.top.replace(/%/g,"").replace(/px/g,"")),l=c+100*(e.pageX-w[0])/a,u=r+100*(e.pageY-w[1])/n;s.current.style.left=String(l)+"%",o.current.style.top=String(u)+"%",w=t}}else if(I&&p&&_&&(w[0]-e.pageX>7||w[0]-e.pageX<-7)){var m=document.getElementById("".concat(i)).offsetWidth,d=Number(o.current.style.height.replace(/%/g,"")),f=0;(f=(w[0],d*(m-1*(w[0]-t[0]))/m))>20&&(o.current.style.height=String(f)+"%"),w=t}S(document.getElementById("".concat(i)).offsetWidth),e.stopPropagation(),e.preventDefault()}Object(n.useEffect)((function(){return vt(x,"mousemove",C,!1),vt(x,"mouseup",B,!1),S(document.getElementById("".concat(i)).offsetWidth),function(){Et(x,"mousemove"),Et(x,"mouseup")}}),[]);var L=function(e){vt(x,"mousemove",C,!1),vt(x,"mouseup",B,!1),w=[e.pageX,e.pageY],I=!0},B=function(e){Et(x,"mousemove"),Et(x,"mouseup"),l((function(e){return[].concat(Object(ae.a)(e.slice(0,i)),[Object(te.a)({},e[i],{posX:Number(s.current.style.left.replace(/%/g,"")),posY:Number(o.current.style.top.replace(/%/g,"").replace(/px/g,""))})],Object(ae.a)(e.slice(i+1,4)))})),l((function(e){return[].concat(Object(ae.a)(e.slice(0,i)),[Object(te.a)({},e[i],{size:Number(o.current.style.height.replace(/%/g,""))})],Object(ae.a)(e.slice(i+1,4)))})),w=[e.pageX,e.pageY],I=!1,O(!1),E(!0),t(Xe(Object(te.a)({},r[a.index],{index:a.index})))};return c.a.createElement("div",{ref:s,key:i,className:"CharacterBlock",style:{left:"".concat(a.posX,"%")}},c.a.createElement("div",{ref:o,className:"character__container",style:{height:"".concat(a.size,"%"),top:"".concat(a.posY,"%")}},c.a.createElement("img",{onMouseDown:L,className:"".concat(p?"characterImg_clicked":"characterImg"),id:"".concat(i),src:a.image,alt:"img"}),c.a.createElement("div",{className:"".concat(_?"btn_sizing_clicked":"btn_sizing"),onMouseOver:function(e){E(!1),O(!0)},onMouseOut:function(e){E(!0),O(!1)},onMouseDown:L,style:{left:"".concat(N-3,"px")}})))})),yt=(a(1037),Object(n.memo)((function(e){var t=e.onRemove_character,a=e.CharacterList,n=e.GameCharacterList,r=e.setCharacterList,l=a.map((function(e,l){return c.a.createElement("div",{key:l},c.a.createElement(ht,{setCharacterList:r,GameCharacterList:n,onRemove_character:t,CharacterList:a,index:l,charSchema:e}))}));return a.length>0&&c.a.createElement("div",{className:"CharacterBlocks",id:"CharacterBlocks"},l)})));a(1038);var _t=function(e){var t=e.setName,a=e.character,n=e.setCharacterList,r=e.CharacterList,l=e.GameCharacterList,i=Object(m.b)(),s=r.map((function(e,a){return c.a.createElement("div",{key:a,className:"characterList_Info",onClick:function(){!function(e){t(l[e].name),i(Xe(Object(te.a)({},l[e],{index:e})))}(e.index)}},c.a.createElement("img",{src:e.image,alt:"",className:"characterList_Image"}))})),o=a.image_array.map((function(e,r){return c.a.createElement("div",{key:r,onClick:function(){!function(e,c){var r={index:a.index,image:c,posX:0,posY:0,reverse:0,size:50};n((function(e){for(var t=0;t<e.length;t++)if(e[t].index===a.index)return[].concat(Object(ae.a)(e.slice(0,t)),[Object(te.a)({},e[t],{image:c})],Object(ae.a)(e.slice(t+1,4)));return e.length>=3?(E.a.info("\uc778\ubb3c\uc740 \ucd5c\ub300 \uc138\uba85\uae4c\uc9c0 \ucd94\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4."),e):[].concat(Object(ae.a)(e),[r])})),t(a.name)}(0,e)}},c.a.createElement("img",{src:e,alt:"img"}))}));return c.a.createElement("div",{className:"characterInfo__container"},c.a.createElement("div",{className:"characterList__container"},s),c.a.createElement("div",null,"\uc774\ub984 : ",a.name),c.a.createElement("div",null,"\uc815\ubcf4 : ",a.description),c.a.createElement("img",{src:a.image_array[0],alt:"",className:"main_img"}),c.a.createElement("div",{className:"image_array__container"},o))};a(1039);var Ot=function(e){var t=e.setCharacterList,a=e.CharacterList,r=e.GameCharacterList,l=e.setName,i=Object(m.b)(),s=Object(m.c)((function(e){return e.character})),o=Object(n.useState)(!1),u=Object(v.a)(o,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){for(var e=0,t=0;t<a.length;t++)if(a[t].index===s.characterSelected.index){e=1;break}p(1===e)}),[s,a]),c.a.createElement("div",{className:"modal_Character"},c.a.createElement("div",{onClick:function(){i({type:"detach_character"})}},"\uce90\ub9ad\ud130 \uc120\ud0dd \ud574\uc81c"),d&&c.a.createElement("div",{onClick:function(){t((function(e){for(var t=0;t<e.length;t++)if(e[t].index===s.characterSelected.index)return E.a.info("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),[].concat(Object(ae.a)(e.slice(0,t)),Object(ae.a)(e.slice(t+1,4)))})),l("")}},"\uc0ad\uc81c"),c.a.createElement(_t,{setName:l,GameCharacterList:r,character:s.characterSelected,setCharacterList:t,CharacterList:a}))},jt=a(1100);a(1040);var kt=function(e){var t=e.CutList,a=e.CutNumber,n=e.displayCut,r=e.setCutNumber,l=e.Hover,i=e.setHover,s=e.EmptyCutList,o=e.saveCut,u=function(e){if(a>29)return n(e),void r(e);a!==e&&(o(),n(e),r(e))},m=t.map((function(e,t){return a===t?c.a.createElement("div",{className:"sceneMake__CurrentSceneBox",key:"".concat(t)}):l?c.a.createElement("div",{className:"sceneMake__SceneBox_color",key:"".concat(t),onMouseOver:function(){return u(t)}}):c.a.createElement("div",{className:"sceneMake__SceneBox_color",key:"".concat(t),onClick:function(){return u(t)}})})),d=s.map((function(e,n){return a-t.length===n?c.a.createElement("div",{className:"sceneMake__CurrentSceneBox",key:"".concat(n)}):c.a.createElement("div",{className:"sceneMake__EmptySceneBox",key:"".concat(n)})}));return c.a.createElement("div",{className:"sceneMake__sceneBox_container"},c.a.createElement("div",{className:"sceneMake__sceneBox"},m,d),c.a.createElement("div",null,c.a.createElement(jt.a,{checked:l,checkedChildren:a,unCheckedChildren:a,onChange:function(){i((function(e){return!e}))},size:"small"})))},Nt=a(1113),St=a(1114),xt=a(1115),wt=(a(1042),new Audio),It=new Audio,Ct=function(e){var t=Object(m.b)(),a=Object(i.f)(),r=Object(i.g)(),l=r.state,s=l.gameId,u=l.sceneId;void 0===r.state&&window.history.back();var d,p=Object(m.c)((function(e){return e.user})),f=Object(n.useState)(window.innerWidth),h=Object(v.a)(f,2),y=h[0],_=h[1],O=Object(n.useState)(window.innerHeight),j=Object(v.a)(O,2),k=j[0],N=j[1],S=Object(n.useState)({}),x=Object(v.a)(S,2),w=x[0],I=x[1],C=Object(n.useState)(0),L=Object(v.a)(C,2),T=L[0],D=L[1],M=Object(n.useState)(1),F=Object(v.a)(M,2),P=F[0],z=F[1],R=Object(n.useState)(!1),U=Object(v.a)(R,2),H=U[0],G=U[1],q=Object(n.useState)(!0),W=Object(v.a)(q,2),X=W[0],Q=W[1],Y=Object(n.useState)([]),V=Object(v.a)(Y,2),J=V[0],K=V[1],Z=Object(n.useState)("https://neverending.s3.ap-northeast-2.amazonaws.com/original/defaultBackground.png"),$=Object(v.a)(Z,2),ee=$[0],te=$[1],ne=Object(n.useState)(""),ce=Object(v.a)(ne,2),re=ce[0],ie=ce[1],se=Object(n.useState)(""),oe=Object(v.a)(se,2),ue=oe[0],me=oe[1],de=Object(n.useState)({name:"",music:""}),pe=Object(v.a)(de,2),fe=pe[0],ge=pe[1],be=Object(n.useState)({name:"",music:""}),ve=Object(v.a)(be,2),Ee=ve[0],he=ve[1],ye=Object(n.useState)(!1),_e=Object(v.a)(ye,2),Oe=_e[0],je=_e[1],ke=Object(n.useState)(0),Ne=Object(v.a)(ke,2),xe=Ne[0],we=Ne[1],Ie=Object(n.useState)(!1),Ce=Object(v.a)(Ie,2),Le=Ce[0],Be=Ce[1],Te=Object(n.useState)([]),De=Object(v.a)(Te,2),Me=De[0],Fe=De[1],Pe=Object(n.useState)(Array.from({length:30},(function(){return 0}))),ze=Object(v.a)(Pe,2),Re=ze[0],Ue=ze[1];Object(n.useEffect)((function(){t(Se(!1))}),[]),Object(n.useEffect)((function(){p.userData&&(Ft.emit("leave room",{room:p.userData._id.toString()}),Ft.emit("room",{room:p.userData._id.toString()})),Ft.off("timeout_making"),Ft.on("timeout_making",(function(t){e.history.replace("/")}))}),[p]),Object(n.useEffect)((function(){Object(b.a)(g.a.mark((function a(){var n,c,r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.get("/api/game/getSceneInfo/".concat(u));case 2:if(!(n=a.sent).data.success){a.next=7;break}d=n.data.scene,a.next=9;break;case 7:return e.history.replace("/"),a.abrupt("return");case 9:d.cutList.length?(d.isFirst&&je(!0),Fe(d.cutList),c=d.cutList[0],K(c.characterList),te(c.background),me(c.name),ie(c.script),we(d.cutList.length-1),t(le(0)),t(le(1))):d.isFirst?je(!0):(r={sceneId:d.prevSceneId},o.a.post("/api/scene/scenedetail",r).then((function(e){if(e.data.success){var a=e.data.lastCut;K(a.characterList),te(a.background),me(a.name),t(le(0)),t(le(1))}else E.a.error("\uc774\uc804 Scene\uc758 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})));case 10:case"end":return a.stop()}}),a)})))()}),[]);var He=Object(n.useRef)(),Ae=Object(n.useRef)(),Ge=Object(n.useRef)(),qe=Object(n.useRef)(),Xe=function(e){Qe(),e.current.style.display="block"},Qe=function(){He.current.style.display="none",Ae.current.style.display="none",Ge.current.style.display="none",qe.current.style.display="none"};B("Enter",(function(e){$e(e)}));var Ve=function(){var e={characterList:J,background:ee,script:re,name:ue,bgm:fe,sound:Ee};ge({name:"",music:""}),he({name:"",music:""}),Fe((function(t){return[].concat(Object(ae.a)(t.slice(0,xe)),[e],Object(ae.a)(t.slice(xe+1,31)))})),Me.length===xe&&Ue((function(e){return Object(ae.a)(e.slice(0,Re.length-1))}))},Ke=function(e){K(Me[e].characterList),te(Me[e].background),ie(Me[e].script),me(Me[e].name),ge(Me[e].bgm),he(Me[e].sound),Me[e].bgm.music?(wt.src=Me[e].bgm.music,wt.play()):wt.pause(),Me[e].sound.music?(It.src=Me[e].sound.music,It.play()):It.pause()},$e=function(e){e.preventDefault(),xe>29?E.a.error("\ub354\uc774\uc0c1 Cut\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):(24===xe&&E.a.warning("\uc0dd\uc131 \uac00\ub2a5\ud55c Cut\uc774 5\uac1c \ub0a8\uc558\uc2b5\ub2c8\ub2e4."),Ve(),xe<Me.length-1?Ke(xe+1):ie(""),we((function(e){return e+1})))},et=function(){var n=Object(b.a)(g.a.mark((function n(c){var r,l,i,m,d,f=arguments;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:0,!(Me.length<1)){n.next=4;break}return E.a.error("\ucd5c\uc18c 2\uac1c\uc758 \ucef7\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694."),n.abrupt("return");case 4:if(l={characterList:J,background:ee,script:re,name:ue,bgm:fe,sound:Ee},i=[].concat(Object(ae.a)(Me.slice(0,xe)),[l],Object(ae.a)(Me.slice(xe+1,31))),!window.confirm("\uac8c\uc784 \uc81c\uc791\uc744 \uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){n.next=25;break}return m={gameId:s,sceneId:u,cutList:i,isTmp:r},n.next=10,o.a.post("/api/scene/save",m);case 10:if(!(d=n.sent).data.success){n.next=16;break}t({type:"detach_character"}),E.a.loading("\uac8c\uc784 \uc5c5\ub85c\ub4dc \uc911..",1).then((function(){r?E.a.success("\uc5c5\ub85c\ub4dc \uc131\uacf5."):E.a.success("\uac8c\uc784 \uc81c\uc791\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",1)})).then((function(){!r&&Oe?a.replace("/game/".concat(s)):r||(Ft.emit("final_submit",{prevSceneId:d.data.scene.prevSceneId,sceneId:d.data.scene._id,title:d.data.scene.title,userId:p.userData._id.toString()}),a.replace({pathname:"/gameplay",state:{sceneId:d.data.scene._id,gameId:s}}))})),n.next=23;break;case 16:if("expired"!==d.data.msg){n.next=22;break}return E.a.error("\uc81c\uc791 \uc720\ud6a8\uae30\uac04\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4..",1),e.history.replace({pathname:"/gameplay",state:{sceneId:d.data.prevSceneId,gameId:s}}),n.abrupt("return");case 22:E.a.error("DB\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4.");case 23:n.next=26;break;case 25:E.a.error("\uc81c\ucd9c \ucde8\uc18c\uc694");case 26:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),tt=Object(n.useState)([]),at=Object(v.a)(tt,2),nt=at[0],ct=at[1],rt=Object(n.useState)([]),lt=Object(v.a)(rt,2),it=lt[0],st=lt[1];return Object(n.useEffect)((function(){o.a.post("/api/game/getgamedetail",{gameId:s}).then((function(e){e.data.success?ct(e.data.gameDetail):alert("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[P,s]),Object(n.useEffect)((function(){nt.character&&st(c.a.createElement("div",{className:"scenemake__toggleBar"},c.a.createElement("div",{ref:He},c.a.createElement(Ye,{gameDetail:nt,setMakeModalState:D,setCharacterList:K,setName:me})),c.a.createElement("div",{ref:Ae,style:{display:"none"}},c.a.createElement(We,{gameDetail:nt,setBackgroundImg:te,setMakeModalState:D})),c.a.createElement("div",{ref:Ge,style:{display:"none"}},c.a.createElement(Je,{gameDetail:nt,bgm_audio:wt,setBgmFile:ge,setMakeModalState:D})),c.a.createElement("div",{ref:qe,style:{display:"none"}},c.a.createElement(Ze,{gameDetail:nt,sound_audio:It,setSoundFile:he,setMakeModalState:D}))))}),[nt,J,P]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){_(window.innerWidth),N(window.innerHeight)})),I(.5625*y>k?{width:"".concat(.8*k/.5625,"px"),height:"".concat(.8*k,"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(.8*y,"px"),height:"".concat(.8*y*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")})}),[window.innerWidth,window.innerHeight]),c.a.createElement("div",{className:"scene__container"},c.a.createElement("div",null,c.a.createElement("div",{className:"backgroundImg_container",id:"backgroundImg_container",style:w},c.a.createElement("img",{className:"backgroundImg",src:"".concat(ee),alt:"img"}),c.a.createElement(yt,{GameCharacterList:nt.character,CharacterList:J,setCharacterList:K,onRemove_character:function(e){K((function(t){return[].concat(Object(ae.a)(t.slice(0,e)),Object(ae.a)(t.slice(e+1,4)))}))}}),X&&c.a.createElement("div",{className:"sceneMake__text_container"},c.a.createElement("input",{onChange:function(e){me(e.currentTarget.value)},value:ue,className:"sceneMake__name_block"}),c.a.createElement("hr",{className:"sceneMake__text_line"}),c.a.createElement("textarea",{onChange:function(e){ie(e.currentTarget.value)},value:re,className:"sceneMake__text_block",ref:function(e){return e&&e.focus()}})))),c.a.createElement(Ot,{setName:me,setCharacterList:K,CharacterList:J,GameCharacterList:nt.character}),c.a.createElement(kt,{CutList:Me,CutNumber:xe,displayCut:Ke,setCutNumber:we,Hover:Le,setHover:Be,EmptyCutList:Re,saveCut:Ve}),c.a.createElement("div",{className:"sceneMake__sound_container"},fe.name?c.a.createElement("div",{className:"scene__SoundBox_container",onClick:function(){wt.paused?wt.play():wt.pause(),z((function(e){return e+1}))}},fe.name&&wt.paused&&c.a.createElement(Nt.a,{style:{fontSize:"20px"}}),fe.name&&!wt.paused&&c.a.createElement(St.a,{style:{fontSize:"20px"}}),fe.name):c.a.createElement("div",null,c.a.createElement(xt.a,{style:{fontSize:"20px"}}),"BGM"),Ee.name?c.a.createElement("div",{className:"scene__SoundBox_container",onClick:function(){It.paused?It.play():It.pause(),z((function(e){return e+1}))}},fe.name&&It.paused&&c.a.createElement(Nt.a,{style:{fontSize:"20px"}}),fe.name&&!It.paused&&c.a.createElement(St.a,{style:{fontSize:"20px"}}),Ee.name):c.a.createElement("div",null,c.a.createElement(xt.a,{style:{fontSize:"20px"}}),"Sound")),c.a.createElement("div",{className:"sceneMake__btn_container"},c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(e){et(e,1)}},"\uc784\uc2dc\uc800\uc7a5"),c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){Me.length-1<=xe?E.a.info("\ub9c8\uc9c0\ub9c9 \ucef7 \uc785\ub2c8\ub2e4."):(E.a.success("".concat(xe+1,"\ubc88\uc9f8 \ucef7\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),Fe((function(e){return[].concat(Object(ae.a)(e.slice(0,xe)),Object(ae.a)(e.slice(xe+1,31)))})),Ue((function(e){return[0].concat(Object(ae.a)(e))})),Ke(xe+1))}},"\ucef7 \uc0ad\uc81c"),xe<29&&c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:$e},"\ub2e4\uc74c \ucef7"),Oe?c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){G(!0)}},"\uc5c5\ub85c\ub4dc"):c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:et},"\uc5c5\ub85c\ub4dc"),c.a.createElement(gt,{gameId:s,visible:H,setUploadModalState:G,onSubmit_saveScene:et})),c.a.createElement("div",{className:"scenemake__sideBar_container"},0!==it&&it,c.a.createElement("div",{className:"scenemake__toggleButton_container"},c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===He.current.style.display?Xe(He):Qe()}},"char"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===Ae.current.style.display?Xe(Ae):Qe()}},"back"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){Q(!X)}},"script"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===Ge.current.style.display?Xe(Ge):Qe()}},"bgm"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===qe.current.style.display?Xe(qe):Qe()}},"sound"))),0!==T&&c.a.createElement(mt,{gameId:s,visible:Boolean(T),setTag:D,tag:T,setReload:z}))},Lt=a(1104);Lt.a.SubMenu,Lt.a.ItemGroup;var Bt=Object(i.h)((function(e){var t=Object(m.c)((function(e){return e.user})),a=function(){var t=Object(b.a)(g.a.mark((function t(){var a,n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/api/game/uploadgameframe");case 2:if((a=t.sent).data.success){t.next=6;break}return alert("game Frame\uc81c\uc791 \uc2e4\ud328"),t.abrupt("return");case 6:return n={gameId:a.data.game._id,prevSceneId:null,sceneDepth:0,isFirst:1,title:""},t.next=9,o.a.post("/api/scene/create",n);case 9:if((c=t.sent).data.success){t.next=13;break}return alert("scene Frame\uc81c\uc791 \uc2e4\ud328"),t.abrupt("return");case 13:E.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 \ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){e.history.replace({pathname:"/scene/make",state:{gameId:a.data.game._id,sceneId:c.data.sceneId}})}),1e3);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t.userData&&!t.userData.isAuth?c.a.createElement(Lt.a,{mode:e.mode},c.a.createElement(Lt.a.Item,{key:"mail"},c.a.createElement("a",{href:"/login"},"Signin")),c.a.createElement(Lt.a.Item,{key:"app"},c.a.createElement("a",{href:"/register"},"Signup"))):c.a.createElement(Lt.a,{mode:e.mode},c.a.createElement(Lt.a.Item,{key:"upload"},c.a.createElement("a",{onClick:a},"Game Upload")),c.a.createElement(Lt.a.Item,{key:"profile"},c.a.createElement("a",{href:"/profile"},"Profile")),c.a.createElement(Lt.a.Item,{key:"logout"},c.a.createElement("a",{onClick:function(){o.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))}},"Logout")))})),Tt=a(1107);a(1048);var Dt=function(){var e=Object(n.useState)(!1),t=Object(v.a)(e,2),a=t[0],r=t[1],l={};return l=Object(m.c)((function(e){return e.controlpage.navbarOn}))?{position:"fixed",zIndex:5,width:"100%"}:{position:"fixed",zIndex:5,width:"100%",opacity:0,animation:"0.8s ease-out 0s 1 hide"},c.a.createElement("nav",{className:"menu",style:l},c.a.createElement("div",{className:"menu__logo"},c.a.createElement("a",{href:"/"},"REGANOP")),c.a.createElement("div",{className:"menu__container"},c.a.createElement("div",{className:"menu_rigth"},c.a.createElement(Bt,{mode:"horizontal"})),c.a.createElement(A.a,{className:"menu__mobile-button",type:"primary",onClick:function(){r(!0)}},c.a.createElement(U.a,{type:"align-right"})),c.a.createElement(Tt.a,{title:"REGANOP",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){r(!1)},visible:a},c.a.createElement(Bt,{mode:"inline"}))))};a(1049);var Mt=function(){return c.a.createElement("div",{className:"footer_container"},c.a.createElement("p",null,"Mutsad \ud654\uc774\ud305 ",c.a.createElement(U.a,{type:"smile"})))},Ft=(a(1050),a(1051)("http://13.124.130.199:5001",{transports:["websocket"]}));window.onpopstate=function(){window.location.reload()};var Pt=function(){return c.a.createElement(n.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(Dt,null),c.a.createElement("div",{className:"app"},c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:d(S,null)}),c.a.createElement(i.a,{exact:!0,path:"/login",component:d(q,!1)}),c.a.createElement(i.a,{exact:!0,path:"/register",component:d(Q,!1)}),c.a.createElement(i.a,{exact:!0,path:"/profile",component:d(Y,!0)}),c.a.createElement(i.a,{exact:!0,path:"/game/upload",component:d(ee,!0)}),c.a.createElement(i.a,{path:"/game/:gameId",component:d(M,null)}),c.a.createElement(i.a,{path:"/gameplay",component:p(d(Ge,null))}),c.a.createElement(i.a,{exact:!0,path:"/scene/make",component:p(d(Ct,!0))}))),c.a.createElement(Mt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var zt=a(136),Rt={navbarOn:!0},Ut={loadingType:0,isPause:!1},Ht={description:"",image:"",image_array:[],name:"",_id:"",index:-1},At={index:-1},Gt={movingTarget:-1},qt=Object(zt.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(te.a)({},e,{register:t.payload});case"login_user":return Object(te.a)({},e,{loginSucces:t.payload});case"auth_user":return Object(te.a)({},e,{userData:t.payload});case"logout_user":return Object(te.a)({},e);default:return e}},controlpage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"navbar_control":return Object(te.a)({},e,{navbarOn:t.payload});default:return e}},gameplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gameLoading_gamePlay":return Object(te.a)({},e,{loadingType:t.payload});case"pause_gamePlay":return Object(te.a)({},e,{isPause:t.payload});default:return e}},sync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_empty_num":return Object(te.a)({},e,{emptyNum:t.payload});case"SAVE_PREV_SCENE":return Object(te.a)({},e,{prevSceneId:t.payload});default:return e}},character:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{characterSelected:Ht},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_character":return Object(te.a)({},e,{characterSelected:t.payload});case"detach_character":return Object(te.a)({},e,{characterSelected:Ht});default:return e}},characterDisplayed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{characterDisplayed:At},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_displayed":return Object(te.a)({},e,{characterDisplayed:t.payload});default:return e}},movingTarget:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_movingtarget":case"detach_movingtarget":return Object(te.a)({},e,{movingTarget:t.payload});default:return e}}}),Wt=a(531),Xt=a.n(Wt),Qt=a(532),Yt=Object(zt.a)(Xt.a,Qt.a)(zt.d);l.a.render(c.a.createElement(m.a,{store:Yt(qt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},c.a.createElement(L.a,null,c.a.createElement(Pt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},181:function(e,t,a){},495:function(e,t,a){},537:function(e,t,a){e.exports=a(1088)},766:function(e,t,a){},789:function(e,t,a){},829:function(e,t,a){},830:function(e,t,a){},831:function(e,t,a){}},[[537,1,2]]]);
//# sourceMappingURL=main.2e118b20.chunk.js.map