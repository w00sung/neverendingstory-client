(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1050:function(e,t,a){},1051:function(e,t,a){},1052:function(e,t,a){},1053:function(e,t,a){},1054:function(e,t,a){},1055:function(e,t,a){},1056:function(e,t,a){},1057:function(e,t,a){},1059:function(e,t,a){},1061:function(e,t,a){},1062:function(e,t,a){},1063:function(e,t,a){},1064:function(e,t,a){},1065:function(e,t,a){},1066:function(e,t,a){},1067:function(e,t,a){},1072:function(e,t,a){},1073:function(e,t,a){},1074:function(e,t,a){},1075:function(e,t,a){},1076:function(e,t,a){},1077:function(e,t,a){},1078:function(e,t,a){},1079:function(e,t,a){},1080:function(e,t,a){},1081:function(e,t,a){},1082:function(e,t,a){},1083:function(e,t,a){},1084:function(e,t,a){},1091:function(e,t,a){},1092:function(e,t,a){},1093:function(e,t,a){},1097:function(e,t,a){"use strict";a.r(t);a(327),a(339),a(340),a(341),a(342),a(343),a(344),a(345),a(346),a(347),a(348),a(349),a(350),a(351),a(352),a(541),a(542),a(543),a(544),a(545),a(546),a(547),a(548),a(549),a(356),a(550),a(551),a(195),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(561),a(562),a(563),a(564),a(565),a(566),a(568),a(570),a(571),a(365),a(197),a(572),a(573),a(574),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(585),a(586),a(587),a(370),a(588),a(589),a(590),a(591),a(592),a(593),a(594),a(595),a(596),a(598),a(599),a(601),a(602),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(610),a(611),a(612),a(613),a(614),a(615),a(616),a(617),a(618),a(619),a(275),a(621),a(622),a(623),a(624),a(625),a(627),a(628),a(629),a(630),a(631),a(632),a(633),a(634),a(635),a(636),a(637),a(382),a(638),a(639),a(277),a(640),a(641),a(642),a(643),a(205),a(644),a(645),a(646),a(647),a(648),a(649),a(650),a(651),a(652),a(653),a(654),a(655),a(656),a(657),a(658),a(659),a(660),a(661),a(662),a(663),a(664),a(665),a(666),a(667),a(668),a(669),a(671),a(672),a(673),a(674),a(675),a(676),a(677),a(678),a(679),a(680),a(681),a(682),a(683),a(684),a(685),a(686),a(687),a(688),a(689),a(690),a(691),a(692),a(693),a(694),a(695),a(696),a(697),a(698),a(699),a(700),a(701),a(702),a(703),a(282),a(704),a(705),a(706),a(707),a(708),a(709),a(710),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(713),a(714),a(715),a(716),a(717),a(718),a(719),a(720),a(721),a(722),a(723),a(724),a(725),a(726),a(727),a(728),a(730),a(731),a(732),a(733),a(734),a(735),a(736),a(737),a(738),a(739),a(740),a(408),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(741),a(742),a(743),a(745),a(427),a(428),a(429),a(746),a(747),a(748),a(749),a(750),a(751),a(752),a(753),a(431),a(754),a(755),a(756),a(758),a(433),a(759),a(434);var n=a(0),c=a.n(n),r=a(10),i=a.n(r),l=(a(769),a(47)),s=a(514),o=a.n(s),u=a(5),m=a.n(u);function d(e){return{type:"register_user",payload:m.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}function f(){return{type:"auth_user",payload:m.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var p=a(9),g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(r){var i=Object(p.c)((function(e){return e.user})),l=Object(p.b)();return Object(n.useEffect)((function(){l(f()).then((function(e){e.payload.isAuth?(a&&!e.payload.isAdmin||!1===t)&&r.history.replace("/"):t&&r.history.push("/login")}))}),[]),c.a.createElement(e,Object.assign({},r,{user:i}))}return r},b=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];function t(t){var a=Object(l.g)();return Object(n.useEffect)((function(){void 0===a.state&&t.history.replace("/")}),[]),a.state?c.a.createElement(e,t):c.a.createElement("div",null,"\uc798\ubabb\ub41c \uc811\uadfc\uc785\ub2c8\ub2e4\u314b\u314b")}return t},v=a(3);a(824),a(825);function E(){return c.a.createElement("div",{className:"banner-container banner-main1"},c.a.createElement("div",{className:"banner-main1-slogan1"},"NEVER ENDING"),c.a.createElement("div",{className:"banner-main1-slogan2"},"\ud568\uaed8 \ub9cc\ub4dc\ub294 \ubb34\ud55c\ud55c \uc774\uc57c\uae30"))}var h=a(34),_=a.n(h),y=a(54),O=(a(827),a(828),a(1117)),j=a(829).TitleModalForm;function k(e){var t=e.replace,a=Object(n.useState)(!1),r=Object(v.a)(a,2),i=r[0],l=r[1],s=Object(n.useState)(null),o=Object(v.a)(s,2),u=o[0],d=o[1],f=function(){var e=Object(y.a)(_.a.mark((function e(a,n){var c,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Asdfasdf"),e.next=3,m.a.post("/api/game/uploadgameframe",{title:a,description:n});case 3:if((c=e.sent).data.success){e.next=7;break}return alert("game Frame\uc81c\uc791 \uc2e4\ud328"),e.abrupt("return");case 7:return r={gameId:c.data.game._id,prevSceneId:null,sceneDepth:0,isFirst:1,title:""},e.next=10,m.a.post("/api/scene/create",r);case 10:if((i=e.sent).data.success){e.next=14;break}return alert("scene Frame\uc81c\uc791 \uc2e4\ud328"),e.abrupt("return");case 14:O.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 \ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){t({pathname:"/scene/make",state:{gameId:c.data.game._id,sceneId:i.data.sceneId}})}),1e3);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=Object(n.useCallback)((function(e){null!==e&&d(e)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"button-newgame",onClick:function(){return l(!0)}},"NEW \uac8c\uc784 \ub9cc\ub4e4\uae30"),c.a.createElement(j,{ref:p,visible:i,onCancel:function(){return l(!1)},onCreate:function(){null===u||void 0===u||u.validateFields((function(e,t){e||(f(t.title,t.description),null===u||void 0===u||u.resetFields(),l(!1))}))}}))}var N={arrow_1:"M-1.73589e-06 5.2875L16.6883 22.5L-2.31124e-07 39.7125L5.13765 45L27 22.5L5.13765 -2.24574e-07L-1.73589e-06 5.2875Z",close_1:"M11 0C4.917 0 0 4.917 0 11C0 17.083 4.917 22 11 22C17.083 22 22 17.083 22 11C22 4.917 17.083 0 11 0ZM16.5 14.949L14.949 16.5L11 12.551L7.051 16.5L5.5 14.949L9.449 11L5.5 7.051L7.051 5.5L11 9.449L14.949 5.5L16.5 7.051L12.551 11L16.5 14.949Z",close_2:"M10 0.600006C4.47 0.600006 0 5.07001 0 10.6C0 16.13 4.47 20.6 10 20.6C15.53 20.6 20 16.13 20 10.6C20 5.07001 15.53 0.600006 10 0.600006ZM15 14.19L13.59 15.6L10 12.01L6.41 15.6L5 14.19L8.59 10.6L5 7.01001L6.41 5.60001L10 9.19001L13.59 5.60001L15 7.01001L11.41 10.6L15 14.19Z"};function S(e){var t=e.src,a=e.color,n=e.width,r=e.height;return c.a.createElement("svg",{width:n||"auto",height:r||"auto",viewBox:"0 0 27 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:N[t],fill:a}))}function w(e){return c.a.createElement("svg",{width:"15",height:"3",viewBox:"0 0 15 3",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("rect",{width:"15",height:"3",fill:"white"}))}function I(e){return c.a.createElement("svg",{width:"15",height:"15",id:"fi_93839",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 348.462 348.462"},c.a.createElement("g",null,c.a.createElement("path",{fill:"white",d:"M330.725,112.541H83.178l238.875-64.006c0.038-0.01,0.074-0.025,0.111-0.036c0.035-0.009,0.07-0.013,0.105-0.023\r c4.001-1.072,6.375-5.185,5.304-9.186l-9.038-33.731c-0.515-1.921-1.772-3.559-3.495-4.554c-1.723-0.995-3.771-1.264-5.691-0.749\r L15.798,78.913c-4.001,1.072-6.375,5.185-5.304,9.185l8.824,32.931v219.932c0,4.142,3.358,7.5,7.5,7.5h303.907\r c4.142,0,7.5-3.358,7.5-7.5V120.041C338.225,115.898,334.867,112.541,330.725,112.541z M323.225,147.305h-31.319l19.764-19.764\r h11.555V147.305z M34.318,147.305v-19.764h33.354l-19.764,19.764H34.318z M88.885,127.541h33.858l-19.616,19.616\r c-0.048,0.048-0.088,0.099-0.134,0.148H69.121L88.885,127.541z M143.956,127.541h35.859l-19.764,19.764h-35.859L143.956,127.541z\r M201.028,127.541h34.359l-19.764,19.764h-34.359L201.028,127.541z M256.305,127.835c0.095-0.095,0.178-0.196,0.266-0.294h33.886\r l-19.764,19.764h-33.858L256.305,127.835z M93.614,73.591c0.111,0.072,0.218,0.149,0.334,0.216l24.038,13.878l-33.67,9.022\r L59.917,82.62L93.614,73.591z M147.748,59.086l24.399,14.087l-33.67,9.022l-24.4-14.087L147.748,59.086z M201.91,44.573\r l24.399,14.087l-33.671,9.022l-24.399-14.087L201.91,44.573z M256.069,30.061l24.399,14.087l-33.698,9.029\r c-0.115-0.075-0.225-0.154-0.345-0.223L222.4,39.083L256.069,30.061z M311.143,35.929l-10.185,2.729l-24.399-14.087l29.428-7.885\r L311.143,35.929z M39.427,88.111l24.399,14.087l-31.745,8.506L26.924,91.46L39.427,88.111z M34.318,333.462V162.305h288.907\r v171.157H34.318z"}),c.a.createElement("path",{fill:"white",d:"M290.354,207.162c4.142,0,7.5-3.358,7.5-7.5c0-4.142-3.358-7.5-7.5-7.5H63.825c-4.142,0-7.5,3.358-7.5,7.5\r c0,4.142,3.358,7.5,7.5,7.5h56.421v53.321H63.825c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h226.528\r c4.142,0,7.5-3.358,7.5-7.5c0-4.142-3.358-7.5-7.5-7.5H239.54v-53.321H290.354z M224.54,260.483h-89.293v-53.321h89.293V260.483z"})))}a(948);var x=a(32);a(145);function C(e){var t=e.data,a=e.games;t.length=0;var n=a.map((function(e,a){var n;return e.first_scene?(t.length+=1,n=e.thumbnail,c.a.createElement("div",{className:"gamelist-game",key:a},c.a.createElement(x.b,{to:"/game/".concat(e._id)},c.a.createElement("img",{className:"game-image",src:n,alt:e.title}),c.a.createElement("div",{className:"game-title"},e.title)),c.a.createElement("div",{className:"game-sceneNum"},e.sceneCnt),c.a.createElement("div",{className:"game-sceneIcon"},c.a.createElement(I,null)),c.a.createElement("div",{className:"game-category"},e.category))):null}));t.limit=Math.round(t.length/4);for(var r=[],i=t.limit-1;i>0;i--)r.push(c.a.createElement("div",{id:"".concat(t.id,"_bar").concat(i),className:"bar",key:"".concat(i)},c.a.createElement(w,null)));return r.push(c.a.createElement("div",{id:"".concat(t.id,"_bar0"),className:"bar",style:{filter:"brightness(100%)"},key:0},c.a.createElement(w,null))),c.a.createElement("div",{className:"box-container game-box"},c.a.createElement("div",{className:"box-title"},t.category),c.a.createElement("div",{className:"box-positionBar"},r),c.a.createElement("div",{className:"box-gameList",onMouseEnter:function(){!function(e){var t,a=document.getElementById(e.id+"_right_arrow");if(e.pos<e.limit-1){if(null===a)throw Error("can not find target arrow");a.style.display="block"}if(a=document.getElementById(e.id+"_left_arrow"),e.pos>0){if(null===a)throw Error("can not find target arrow");a.style.display="block"}for(var n=0;n<e.limit;n++){if(null===(t=document.getElementById(e.id+"_bar"+String(n))))throw Error("can not find target bar");t.style.transform="opacity(1)",t.style.opacity="1"}}(t)},onMouseLeave:function(){!function(e){var t,a=document.getElementById(e.id+"_right_arrow");if(null===a)throw Error("can not find target arrow");if(a.style.display="none",a=document.getElementById(e.id+"_left_arrow"),e.pos>0){if(null===a)throw Error("can not find target arrow");a.style.display="none"}for(var n=0;n<e.limit;n++){if(null===(t=document.getElementById(e.id+"_bar"+String(n))))throw Error("can not find target bar");t.style.transform="opacity(0)",t.style.opacity="0"}}(t)}},c.a.createElement("div",{id:"".concat(t.id,"_gameList"),className:"gamelist-container",style:{width:335*t.length+"px"}},n),c.a.createElement("div",{id:"".concat(t.id,"_left_arrow"),className:"gamelist-left-arrow",onClick:function(){!function(e){if(e.pos>0){var t=document.getElementById(e.id+"_bar"+String(e.pos));if(null===t)throw Error("can not find target bar");t.style.filter="brightness(50%)",e.pos-=1;var a=document.getElementById(e.id+"_gameList");if(null===a)throw Error("can not find target container");if(a.style.transform="translate(".concat(-1336*e.pos,"px, 0px)"),null===(t=document.getElementById(e.id+"_bar"+String(e.pos))))throw Error("can not find target bar");if(t.style.filter="brightness(100%)",0==e.pos){var n=document.getElementById(e.id+"_left_arrow");if(null===n)throw Error("can not find target arrow");n.style.display="none"}if(null===(n=document.getElementById(e.id+"_right_arrow")))throw Error("can not find target arrow");n.style.display="block"}}(t)}},c.a.createElement(S,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"})),c.a.createElement("div",{id:"".concat(t.id,"_right_arrow"),className:"gamelist-right-arrow",onClick:function(){!function(e){if(e.pos<e.limit-1){var t=document.getElementById(e.id+"_bar"+String(e.pos));if(null===t)throw Error("can not find target bar");t.style.filter="brightness(50%)",e.pos+=1;var a=document.getElementById(e.id+"_gameList");if(null===a)throw Error("can not find target container");if(a.style.transform="translate(".concat(-1336*e.pos,"px, 0px)"),null===(t=document.getElementById(e.id+"_bar"+String(e.pos))))throw Error("can not find target bar");if(t.style.filter="brightness(100%)",e.pos==e.limit-1){var n=document.getElementById(e.id+"_right_arrow");if(null===n)throw Error("can not find target arrow");n.style.display="none"}if(null===(n=document.getElementById(e.id+"_left_arrow")))throw Error("can not find target arrow");n.style.display="block"}}(t)}},c.a.createElement(S,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"}))))}function L(e){return{type:"navbar_control",payload:e}}var B={recent_games:{category:"\ucd5c\uadfc \ud50c\ub808\uc774\ud55c \uac8c\uc784",id:"recent",length:0,pos:0,limit:0},popular_games:{category:"\uc778\uae30 \uac8c\uc784",id:"popular",length:0,pos:0,limit:0}};var T=function(e){var t=Object(p.b)(),a=Object(n.useState)([]),r=Object(v.a)(a,2),i=r[0],l=r[1];return Object(n.useEffect)((function(){t(L(!0)),m.a.get("/api/game/getgames").then((function(e){e.data.success?l(e.data.games):alert("game load\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),c.a.createElement("div",{className:"mainPage_container"},c.a.createElement("div",{className:"box-container"},c.a.createElement(E,null),c.a.createElement(k,{replace:e.history.replace})),c.a.createElement(C,{data:B.recent_games,games:i}),c.a.createElement(C,{data:B.popular_games,games:i}))},D=a(251),M=a(80),F=a(257),R=a(536),z=a(18),P=a(1115);a(1050);var H=Object(l.h)((function(e){var t=Object(p.b)(),a=!!localStorage.getItem("rememberMe"),r=Object(n.useState)(""),i=Object(v.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)(a),u=Object(v.a)(o,2),d=u[0],f=u[1],g=function(){f(!d)},b=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):void 0;return c.a.createElement(D.a,{initialValues:{email:b,password:""},validationSchema:M.object().shape({email:M.string().email("\uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.").required("\uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694."),password:M.string().min(6,"\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uae00\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.").required("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.")}),onSubmit:function(a,n){var c=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return{type:"login_user",payload:m.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.loginSuccess?(!0===d&&a.email?window.localStorage.setItem("rememberMe",a.email):localStorage.removeItem("rememberMe"),e.history.replace("/")):s("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574 \uc8fc\uc138\uc694.")})).catch((function(e){s("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574 \uc8fc\uc138\uc694."),setTimeout((function(){s("")}),3e3)})),c(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,r=e.isSubmitting,i=e.handleChange,s=e.handleBlur,o=e.handleSubmit;return c.a.createElement("div",{className:"loginPage-container"},c.a.createElement("div",{className:"loginDiv-container"},c.a.createElement("div",{className:"login-Title"},"\ub85c\uadf8\uc778"),c.a.createElement("div",{className:"login-newUser"},"\uc2e0\uaddc \uc0ac\uc6a9\uc790\uc774\uc2e0\uac00\uc694? ",c.a.createElement(x.b,{className:"login-register",to:"/register"},"\uacc4\uc815\ub9cc\ub4e4\uae30")),c.a.createElement("form",{onSubmit:o,style:{width:"600px"}},c.a.createElement(F.a.Item,{required:!0},c.a.createElement(R.a,{id:"email",prefix:c.a.createElement(z.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\uc774\uba54\uc77c \uc8fc\uc18c",type:"email",value:t.email,onChange:i,onBlur:s,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&c.a.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},n.email)),c.a.createElement(F.a.Item,{required:!0},c.a.createElement(R.a,{id:"password",prefix:c.a.createElement(z.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\ube44\ubc00\ubc88\ud638",type:"password",value:t.password,onChange:i,onBlur:s,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&c.a.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},n.password)),l&&c.a.createElement("label",null,c.a.createElement("p",{className:"login-error"},l)),c.a.createElement(F.a.Item,null,c.a.createElement(P.a,{className:"rememberMe",onChange:g,checked:d,style:{color:"white"}},"\uc544\uc774\ub514 \uae30\uc5b5\ud558\uae30"),c.a.createElement("div",null,c.a.createElement("button",{type:"submit",className:"login-button",disabled:r,onSubmit:function(){return o()}},"\ub85c\uadf8\uc778"))))))}))}));a(1051);var U=function(e){var t=Object(p.b)();return n.createElement(D.a,{initialValues:{email:"",nickname:"",password:"",confirmPassword:""},validationSchema:M.object().shape({nickname:M.string().required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4."),email:M.string().email("\uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc544\ub2d9\ub2c8\ub2e4.").required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4."),password:M.string().min(6,"\ud328\uc2a4\uc6cc\ub4dc\ub294 \ucd5c\uc18c 6\uae00\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c\ud569\ub2c8\ub2e4.").required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4."),confirmPassword:M.string().oneOf([M.ref("password"),void 0],"\ud328\uc2a4\uc6cc\ub4dc\uac00 \ud2c0\ub9bd\ub2c8\ub2e4.").required("\ud328\uc2a4\uc6cc\ub4dc\ub97c \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694.")}),onSubmit:function(a,n){var c=n.setSubmitting;setTimeout(Object(y.a)(_.a.mark((function n(){var r,i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.post("api/users/email-check",{email:a.email}).then((function(e){r=e.data.usedEmail}));case 2:if(!r){n.next=5;break}return alert("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \uc544\uc774\ub514 \uc785\ub2c8\ub2e4."),n.abrupt("return");case 5:return i={email:a.email,password:a.password,nickname:a.nickname,image:"https://icon-library.com/images/default-user-icon/default-user-icon-8.jpg"},n.next=8,t(d(i)).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)}));case 8:c(!1);case 9:case"end":return n.stop()}}),n)}))),500)}},(function(e){var t=e.values,a=e.touched,c=e.errors,r=e.isSubmitting,i=e.handleChange,l=e.handleBlur,s=e.handleSubmit;return n.createElement("div",{className:"registerPage-container"},n.createElement("div",{className:"registerDiv-container"},n.createElement("div",{className:"register-Title"},"\ud68c\uc6d0\uac00\uc785"),n.createElement("div",{className:"register-oldUser"},"\uae30\uc874 \uc0ac\uc6a9\uc790\uc774\uc2e0\uac00\uc694? ",n.createElement(x.b,{className:"register-login",to:"/login"},"\ub85c\uadf8\uc778\ud558\uae30")),n.createElement(F.a,{onSubmit:s,labelAlign:"left",labelCol:{span:5},wrapperCol:{span:19}},n.createElement(F.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ub2c9\ub124\uc784")},n.createElement(R.a,{id:"nickname",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694",type:"text",value:t.nickname,onChange:i,onBlur:l,className:c.nickname&&a.nickname?"text-input error":"text-input"}),c.nickname&&a.nickname&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.nickname)),n.createElement(F.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \uc774\uba54\uc77c"),hasFeedback:!0,validateStatus:c.email&&a.email?"error":"success"},n.createElement(R.a,{id:"email",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.",type:"email",value:t.email,onChange:i,onBlur:l,className:c.email&&a.email?"text-input error":"text-input"}),c.email&&a.email&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.email)),n.createElement(F.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ube44\ubc00\ubc88\ud638"),hasFeedback:!0,validateStatus:c.password&&a.password?"error":"success"},n.createElement(R.a,{id:"password",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",type:"password",value:t.password,onChange:i,onBlur:l,className:c.password&&a.password?"text-input error":"text-input"}),c.password&&a.password&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.password)),n.createElement(F.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ube44\ubc00\ubc88\ud638 \uc7ac\ud655\uc778"),hasFeedback:!0},n.createElement(R.a,{id:"confirmPassword",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc7ac\uc785\ub825\ud558\uc138\uc694",type:"password",value:t.confirmPassword,onChange:i,onBlur:l,className:c.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),c.confirmPassword&&a.confirmPassword&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.confirmPassword)),n.createElement(F.a.Item,null,n.createElement("div",null,n.createElement("button",{type:"submit",className:"register-button",disabled:r,onSubmit:function(){return s()}},"\ud68c\uc6d0\uac00\uc785"))))))}))};a(1052);var G=function(e){var t=e.match.params.userId,a=Object(p.c)((function(e){return e.user.userData})),r=!1,i=Object(n.useState)({makingGameList:[],image:"",email:"",nickname:"",_id:"",contributedSceneList:[],contributedGameList:[]}),l=Object(v.a)(i,2),s=l[0],o=l[1];return Object(n.useEffect)((function(){m.a.post("/api/users/profile",{userId:t}).then((function(e){e.data.success?o(e.data.user):O.a.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),(null===a||void 0===a?void 0:a._id)===t&&(r=!0),console.log(s),a?c.a.createElement("div",{className:"profile"},c.a.createElement("img",{src:a.image,alt:""}),c.a.createElement("div",null,a.email),c.a.createElement("div",null,a.nickname),c.a.createElement("div",null,"displayMAkingGame",function(e){var t=e.makingGameList;return t?t.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",null,e.gameId),c.a.createElement(x.b,{to:{pathname:"/scene/make",state:{gameId:e.gameId,sceneId:e.sceneId}},key:t},"\uac8c\uc784 \ub9cc\ub4e4\ub7ec\uac00\uae30.."))})):c.a.createElement("div",null,"\ub9cc\ub4dc\ub294 \uc911\uc778 \uac8c\uc784\uc774 \uc5c6\uc2b5\ub2c8\ub2e4..")}(a)),c.a.createElement("div",null,"displayContributedGame",function(){var e=s.contributedGameList;if(e)return e.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("a",{href:"/game/".concat(e.gameId)},c.a.createElement("img",{src:"http://".concat("localhost",":5000/").concat(e.thumbnail),alt:e.title}),c.a.createElement("div",null,e.title)),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}))}()),c.a.createElement("div",null,"displayContributedScene",function(){var e=s.contributedSceneList;if(e)return e.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("a",{href:"/game/".concat(e.gameId)},c.a.createElement("img",{src:"http://".concat("localhost",":5000/").concat(e.thumbnail),alt:e.title}),c.a.createElement("div",null,e.title),c.a.createElement("div",null,e.sceneCnt)))}))}()),r?c.a.createElement("div",null,"isuser"):c.a.createElement("div",null,"isnt user")):c.a.createElement("div",null,"loading...")},A=a(117);a(1053),a(1054),a(1055);var W=Object(n.memo)((function(e){var t=e.comment,a=e.updateToggle_comment,r=e.gameId,i=Object(p.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),l=Object(p.c)((function(e){return e.user.userData?e.user.userData._id:null})),s=Object(n.useState)(!1),o=Object(v.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)(""),g=Object(v.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)(0),_=Object(v.a)(h,2),y=_[0],j=_[1],k=Object(n.useState)(!0),N=Object(v.a)(k,2),S=N[0],w=N[1],I=function(){w((function(e){return!e}))};return Object(n.useEffect)((function(){var e={gameId:r,userId:l,commentId:t._id};m.a.post("/api/like/",e).then((function(e){e.data.success?j(e.data.result.length):O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[S]),c.a.createElement("div",{className:"container_box",id:t._id},c.a.createElement("div",{className:"comment_container"},c.a.createElement("img",{src:t.writer.image,alt:"img",className:"SingleReply__img"}),c.a.createElement("div",{className:"comment_contents"},c.a.createElement("div",{className:"SingleReply__nickname"},t.writer.nickname),i&u?c.a.createElement("div",{className:"edit_container"},c.a.createElement(R.a,{className:"comment_input",onChange:function(e){E(e.currentTarget.value)},value:b}),c.a.createElement("button",{className:"edit_btn",onClick:function(e){e.preventDefault(),m.a.post("/api/comment/edit-comment",{commentId:t._id,comment:b}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),I()):O.a.error("\ub313\uae00 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),d((function(e){return!e}))}},"\uc218\uc815")):c.a.createElement("div",{className:"content"},t.content),c.a.createElement("div",{className:"SingleReply__comment_info"},c.a.createElement("div",{onClick:function(){if(!1!==i){var e={gameId:r,userId:l,commentId:t._id};m.a.post("/api/like/setlike",e).then((function(e){e.data.success?(console.log(e.data.result),I()):O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},className:"comment_like"},"\uc88b\uc544\uc694 : ",y),t.writer._id===l&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{onClick:function(){d((function(e){return!e})),E(t.content)},className:"comment_option"},u?"\uc218\uc815 \ucde8\uc18c":"\ub313\uae00 \uc218\uc815"),c.a.createElement("div",{onClick:function(){d(!1),m.a.post("/api/comment/remove-comment",{commentId:t._id}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),a()):O.a.error("\ub313\uae00 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},className:"comment_option"},"\ub313\uae00 \uc0ad\uc81c"))))))}));a(1056);var X=Object(n.memo)((function(e){var t=e.gameId,a=e.comment,r=e.updateToggle_comment,i=Object(p.c)((function(e){return e.user})),l=Object(p.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),s=Object(p.c)((function(e){return e.user.userData?e.user.userData._id:null})),o=Object(n.useRef)(),u=Object(n.useState)(!0),d=Object(v.a)(u,2),f=d[0],g=d[1],b=Object(n.useState)(""),E=Object(v.a)(b,2),h=E[0],_=E[1],y=Object(n.useState)([]),j=Object(v.a)(y,2),k=j[0],N=j[1],S=Object(n.useState)(!1),w=Object(v.a)(S,2),I=w[0],x=w[1],C=Object(n.useState)(!1),L=Object(v.a)(C,2),B=L[0],T=L[1],D=Object(n.useState)(""),M=Object(v.a)(D,2),F=M[0],z=M[1],P=Object(n.useState)(!1),H=Object(v.a)(P,2),U=H[0],G=H[1],A=Object(n.useState)(0),X=Object(v.a)(A,2),V=X[0],q=X[1],Y=function(){g((function(e){return!e}))};Object(n.useEffect)((function(){var e={gameId:t,responseTo:a._id.toString()};m.a.post("/api/comment/get-reply",e).then((function(e){e.data.success?N(e.data.result):O.a.error("\ub300\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}));var n={gameId:t,userId:s,commentId:a._id};m.a.post("/api/like/",n).then((function(e){e.data.success?q(e.data.result.length):O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[f]);var Q=function(){"block"===o.current.style.display?(o.current.style.display="none",G(!1)):(o.current.style.display="block",G(!0))},Z=k.map((function(e,a){return c.a.createElement("div",{key:a,style:{marginLeft:"10px"}},e&&c.a.createElement(W,{updateToggle_comment:Y,gameId:t,comment:e}))}));return c.a.createElement("div",{className:"container_box",id:a._id},c.a.createElement("div",{className:"comment_container"},c.a.createElement("img",{src:a.writer.image,alt:"img",className:"img"}),c.a.createElement("div",{className:"comment_contents"},c.a.createElement("div",{className:"nickname"},a.writer.nickname),B?c.a.createElement("div",{className:"edit_container"},c.a.createElement(R.a,{className:"comment_input",onChange:function(e){z(e.currentTarget.value)},value:F}),c.a.createElement("button",{className:"edit_btn",onClick:function(e){e.preventDefault(),m.a.post("/api/comment/edit-comment",{commentId:a._id,comment:F}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r()):O.a.error("\ub313\uae00 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),T((function(e){return!e}))}},"\uc218\uc815")):c.a.createElement("div",{className:"content"},a.content),c.a.createElement("div",{className:"comment_info"},c.a.createElement("div",{onClick:function(){if(!1!==l){var e={gameId:t,userId:s,commentId:a._id};m.a.post("/api/like/setlike",e).then((function(e){e.data.success?Y():O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},className:"comment_like"},"\uc88b\uc544\uc694 : ",V),k.length?c.a.createElement(c.a.Fragment,null,U?c.a.createElement("div",{onClick:Q,className:"comment_displayReplyToggle"},"\ub313\uae00 \ub2eb\uae30"):c.a.createElement("div",{onClick:Q,className:"comment_displayReplyToggle"},"\ub313\uae00 ",k.length,"\uac1c \ubcf4\uae30")):c.a.createElement("div",null),c.a.createElement("div",{onClick:function(){x((function(e){return!e}))},className:"comment_option"},I?"\uc791\uc131 \ucde8\uc18c":"\ub313\uae00 \uc791\uc131"),a.writer._id===s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{onClick:function(){T((function(e){return!e})),z(a.content)},className:"comment_option"},B?"\uc218\uc815 \ucde8\uc18c":"\ub313\uae00 \uc218\uc815"),c.a.createElement("div",{onClick:function(){T(!1),m.a.post("/api/comment/remove-comment",{commentId:a._id}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r()):O.a.error("\ub313\uae00 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},className:"comment_option"},"\ub313\uae00 \uc0ad\uc81c"))),l&I?c.a.createElement("form",{className:"form"},c.a.createElement("textarea",{className:"textarea",onChange:function(e){_(e.currentTarget.value)},value:h,placeholder:"\ucf54\uba58\ud2b8\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694."}),c.a.createElement("button",{className:"comment_btn",onClick:function(e){if(e.preventDefault(),""!==h){var n={content:h,writer:i.userData._id,gameId:t,responseTo:a._id.toString()};m.a.post("/api/comment/save-comment",n).then((function(e){e.data.success?(O.a.success("\ub313\uae00 \uac10\uc0ac\ud569\ub2c8\ub2e4!"),Y(),_(""),"block"!==o.current.style.display&&(o.current.style.display="block",G(!0))):O.a.error("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}}},"\ub313\uae00 \uc791\uc131")):c.a.createElement("div",null))),c.a.createElement("div",{ref:o,className:"reply_container"},Z))}));var V=Object(n.memo)((function(e){var t=e.gameId,a=Object(p.c)((function(e){return e.user})),r=Object(p.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),i=Object(n.useState)(!0),l=Object(v.a)(i,2),s=l[0],o=l[1],u=Object(n.useState)(""),d=Object(v.a)(u,2),f=d[0],g=d[1],b=Object(n.useState)([]),E=Object(v.a)(b,2),h=E[0],j=E[1],k=Object(n.useState)(!1),N=Object(v.a)(k,2),S=N[0],w=N[1],I=Object(n.useState)([]),x=Object(v.a)(I,2),C=x[0],L=x[1],B=Object(n.useState)(8),T=Object(v.a)(B,2),D=T[0],M=T[1],F=function(){var e=Object(y.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),j(C.slice(0,D+8)),M((function(e){return e+8})),w(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=document.documentElement.scrollHeight;document.documentElement.scrollTop+1.5*document.documentElement.clientHeight>=e&&!1===S&&F()};Object(n.useEffect)((function(){return window.addEventListener("scroll",R),function(){window.removeEventListener("scroll",R)}}));var z=function(){o((function(e){return!e}))};Object(n.useEffect)((function(){m.a.post("/api/comment/get-comment",{gameId:t}).then((function(e){e.data.success?(L(e.data.result),j(e.data.result.slice(0,D))):O.a.error("\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[s]);var P=h.map((function(e,a){return c.a.createElement("div",{key:a},e&&c.a.createElement(X,{updateToggle_comment:z,gameId:t,comment:e}))}));return c.a.createElement("div",{className:"container"},c.a.createElement("br",null),r&&c.a.createElement("form",{className:"form"},c.a.createElement("textarea",{className:"textarea",onChange:function(e){g(e.currentTarget.value)},value:f,placeholder:"\ucf54\uba58\ud2b8\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694."}),c.a.createElement("button",{className:"comment_btn",onClick:function(e){if(e.preventDefault(),""!==f){var n={content:f,writer:a.userData._id,gameId:t,responseTo:""};m.a.post("/api/comment/save-comment",n).then((function(e){e.data.success?(O.a.success("\ub313\uae00 \uac10\uc0ac\ud569\ub2c8\ub2e4!"),z(),g("")):O.a.error("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}}},"\ub313\uae00 \uc791\uc131")),c.a.createElement("br",null),c.a.createElement("div",null,"\ub313\uae00 ",C.length,"\uac1c"),c.a.createElement("hr",null),P,c.a.createElement("br",null))}));a(145);var q=function(e){var t,a=e.match.params.gameId,r={gameId:a},i=Object(n.useState)([]),l=Object(v.a)(i,2),s=l[0],o=l[1],u=Object(n.useState)([]),d=Object(v.a)(u,2),f=d[0],g=d[1],b=Object(n.useState)(!1),E=Object(v.a)(b,2),h=E[0],j=E[1],k=Object(n.useState)(!1),N=Object(v.a)(k,2),S=N[0],w=(N[1],Object(n.useState)(0)),I=Object(v.a)(w,2),x=I[0],C=I[1],L=Object(n.useState)(0),B=Object(v.a)(L,2),T=B[0],D=B[1],M=Object(n.useState)(!1),F=Object(v.a)(M,2),R=(F[0],F[1]),z=Object(n.useState)(0),P=Object(v.a)(z,2),H=P[0],U=P[1],G=Object(n.useState)(0),W=Object(v.a)(G,2),X=W[0],q=W[1],Y=Object(n.useState)([]),Q=Object(v.a)(Y,2),Z=Q[0],K=Q[1],J=Object(p.c)((function(e){return e.user})),$=function(){var t=Object(y.a)(_.a.mark((function t(n){var c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(f),t.prev=1,t.t0=n,!t.t0){t.next=7;break}return t.next=6,m.a.get("/api/users/playing-list/clear");case 6:t.t0=t.sent;case 7:c=t.t0,e.history.replace({pathname:!n&&h?"/scene/make":"/gameplay",state:{sceneId:n?c.data.teleportSceneId:f,gameId:a}}),t.next=14;break;case 11:t.prev=11,t.t1=t.catch(1),console.log(t.t1);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){m.a.post("/api/game/getgamedetail",r).then((function(e){e.data.success?o(e.data.gameDetail):O.a.error("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),m.a.post("/api/game/rank",r).then((function(e){e.data.success?(K(e.data.topRank),q(e.data.contributerCnt),U(e.data.totalSceneCnt)):O.a.error("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),m.a.get("/api/game/gamestart/".concat(a)).then((function(e){e.data.success?(g(e.data.sceneId),j(e.data.isMaking)):O.a.error("\ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694.")}))}),[]),Object(n.useEffect)((function(){if(J&&J.userData){var e={userId:J.userData._id,objectId:a};m.a.post("/api/view/",e).then((function(e){e.data.success&&C(e.data.view)}))}}),[J]),Object(n.useEffect)((function(){if(J&&J.userData){var e={objectId:a,userId:J.userData._id};m.a.post("/api/thumbsup/count",e).then((function(e){e.data.success&&(D(e.data.thumbsup),R(e.data.isClicked))}))}}),[S,J]);var ee=Z.map((function(e,t){return c.a.createElement("div",{key:e.userId},c.a.createElement("div",null,t+1,"\uc704"),c.a.createElement("img",{src:e.image,alt:""}),c.a.createElement("div",null,e.nickname),c.a.createElement("div",null,e.email),c.a.createElement("div",null,"\ub9cc\ub4e0 \uc2e0 \uac1c\uc218",e.userSceneCnt))}));return c.a.createElement("div",{className:"detailPage__container"},s.thumbnail&&c.a.createElement("img",{style:{width:"30%",height:"30%"},src:s.thumbnail,alt:"thumbnail"}),c.a.createElement("div",null,"\uc81c\ubaa9: ",s.title),c.a.createElement("div",null,"\uce74\ud14c\uace0\ub9ac : ",s.category),c.a.createElement("div",null,"\ud06c\ub9ac\uc5d0\uc774\ud130: ",null===s||void 0===s||null===(t=s.creator)||void 0===t?void 0:t.nickname),c.a.createElement("div",null,"\uc870\ud68c\uc218: ",x),c.a.createElement("div",{onClick:function(){if(J&&J.userData){var e={userId:J.userData._id,objectId:a};m.a.post("/api/thumbsup/",e).then((function(e){e.data.success&&D(e.data.thumbsup)}))}}},"\uc88b\uc544\uc694: ",T),c.a.createElement("div",null,"\uc0c1\uc138 \uc124\uba85: ",s.description),c.a.createElement("div",null,"\uae30\uc5ec\ud55c \uc0ac\ub78c\uc218: ",X),c.a.createElement("div",null,"\uc52c \ucd1d \uac1c\uc218: ",H),c.a.createElement("div",null,ee),c.a.createElement("br",null),c.a.createElement(A.a,{onClick:function(){return $(!0)}},"\ucc98\uc74c\ubd80\ud130 \ud558\uae30"),c.a.createElement(A.a,{onClick:function(){return $(!1)}},"\uac8c\uc784 \uc774\uc5b4\ud558\uae30"),c.a.createElement(V,{gameId:a}))},Y=a(1113),Q=a(107),Z=(a(1057),R.a.TextArea),K=Y.a.Title,J=[{value:0,label:"Private"},{value:1,label:"Public"}],$=[{value:0,label:"\uc0b4\uc544\ub0a8\uae30"},{value:1,label:"\ub85c\ub9e8\uc2a4"},{value:2,label:"\uc2a4\ud1a0\ub9ac"},{value:3,label:"\ucd94\ub9ac"},{value:4,label:"\ubcd1\ub9db"}];"".concat(9/16),"".concat(16/9);var ee=function(e){var t=Object(p.c)((function(e){return e.user})),a=Object(n.useState)(""),r=Object(v.a)(a,2),i=r[0],l=r[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)(0),g=Object(v.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)("\uc0b4\uc544\ub0a8\uae30"),_=Object(v.a)(h,2),y=_[0],j=_[1],k=Object(n.useState)(!0),N=Object(v.a)(k,2),S=N[0],w=N[1],I=Object(n.useState)(""),x=Object(v.a)(I,2),C=x[0],L=x[1],B=function(e){w((function(e){return!e}))},T=function(a){if(a.preventDefault(),""!==i&&""!==u&&""!==C){var n;n=S?9/16:16/9;var c={creator:t.userData._id,title:i,description:u,thumbnail:C,privacy:b,category:y,ratio:n,writer:[t.userData._id],character:[],background:[],bgm:[],sound:[]};m.a.post("/api/game/uploadgame",c).then((function(t){t.data.success?(O.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 +\ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){e.history.replace("/game/upload/".concat(t.data.game._id))}),1e3)):alert("game\uc81c\uc791 \uc2e4\ud328")}))}else alert("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")};return c.a.createElement("div",{style:{maxWidth:"700px",margin:"2rem auto"}},c.a.createElement("div",{style:{textAlign:"center",marginBottom:"2rem"}},c.a.createElement(K,{level:2},"Upload Game")),c.a.createElement(F.a,{onSubmit:T},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement(Q.a,{onDrop:function(e){if(e[0]){var t=new FormData;t.append("file",e[0]),m.a.post("/api/game/uploadfiles",t,{header:{"content-type":"multipart/form-data"}}).then((function(e){e.data.success?L(e.data.url):alert("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))}else alert("\uc190\uc0c1\ub41c \ud30c\uc77c\uc785\ub2c8\ub2e4.")},multiple:!1,maxSize:1e9},(function(e){var t=e.getRootProps,a=e.getInputProps;return c.a.createElement("div",Object.assign({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),c.a.createElement("input",a()),c.a.createElement(z.a,{type:"plus",style:{fontSize:"3rem"}}))})),C&&c.a.createElement("div",null,c.a.createElement("img",{className:"thumbnail__img",src:"http://".concat("localhost",":5000/").concat(C),alt:"thumbnail"}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,"Title"),c.a.createElement(R.a,{onChange:function(e){l(e.currentTarget.value)},value:i}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,"Description"),c.a.createElement(Z,{onChange:function(e){d(e.currentTarget.value)},value:u}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("select",{onChange:function(e){E(e.currentTarget.value)}},J.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("select",{onChange:function(e){var t=e.currentTarget.value;j(e.currentTarget[t].text)}},$.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"ratio",checked:S,onChange:B}),"\ucef4\ud4e8\ud130"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"ratio",checked:!S,onChange:B}),"\uc2a4\ub9c8\ud2b8\ud3f0"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(A.a,{type:"primary",size:"large",onClick:T},"Next Step")))};a(1110),a(1111),Y.a.Title,a(145);var te=a(25),ae=a(11),ne=(a(1059),a(1060),a(1061),a(1062),function(e){var t=e.characterList.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",{className:"CharacterBlock",style:{left:"".concat(e.posX,"%")}},c.a.createElement("div",{className:"character__container",style:{height:"".concat(e.size,"%"),top:"".concat(e.posY,"%")}},c.a.createElement("img",{className:"characterImg",src:e.image,alt:"img"}))))}));return c.a.createElement("div",{className:"CharacterBlocks"},t)}),ce=(a(1063),a(1098));var re=function(e,t){var a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t})),Object(n.useEffect)((function(){function t(t){t.code!==e||t.shiftKey||a.current(t)}return document.addEventListener("keypress",t),function(){return document.removeEventListener("keypress",t)}}),[e])},ie=F.a.create({name:"modal_form"})((function(e){var t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form,i=e.remainTime,l=r.getFieldDecorator;return re("Enter",(function(){n()})),t?c.a.createElement(ce.a,{visible:!0,title:"\uc120\ud0dd\uc9c0 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694 (".concat(i,")"),okText:"Submit",onCancel:a,onOk:n},c.a.createElement(F.a,{layout:"vertical"},c.a.createElement(F.a.Item,{label:"Title"},l("title",{rules:[{required:!0,message:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!"}]})(c.a.createElement(R.a,{ref:function(e){return e&&e.focus()}}))))):""})),le=Object(n.memo)(ie);function se(e){return{type:"gameLoading_gamePlay",payload:e}}function oe(e){return{type:"pause_gamePlay",payload:e}}var ue=Object(n.memo)((function(e){var t,a=e.scene_id,r=e.scene_depth,i=e.game_id,s=e.scene_next_list,o=e.theme,u=Object(p.b)(),d=Object(l.f)(),f=Object(p.c)((function(e){return e.user})),g=Object(p.c)((function(e){return e.sync.emptyNum})),b=f.userData._id.toString(),E=Object(n.useState)(!1),h=Object(v.a)(E,2),O=h[0],j=h[1],k=Object(n.useState)(null),N=Object(v.a)(k,2),S=N[0],w=N[1],I=Object(n.useState)(0),x=Object(v.a)(I,2),C=x[0],L=x[1],B=Object(n.useState)(null),T=Object(v.a)(B,2),D=T[0],M=T[1],F=Object(n.useState)(1),R=Object(v.a)(F,2),z=R[0],P=R[1],H=Object(n.useRef)(!1),U=Object(n.useCallback)((function(e){null!==e&&w(e)}),[]),G=function(){Qt.emit("empty_num_increase",{scene_id:a,user_id:b}),clearTimeout(D),console.log("deleted -- ",D),j(!1),u(oe(!1))},A=Object(n.useState)(0),W=Object(v.a)(A,2),X=W[0],V=W[1];return Object(n.useEffect)((function(){Qt.off("validated"),Qt.on("validated",(function(e){P(-1*z)})),Qt.off("decrease_failed"),Qt.on("decrease_failed",(function(){j(!1),V(0),V(1)})),Qt.emit("validate_empty_num",{scene_id:a})}),[a]),Object(n.useEffect)((function(){X&&(clearTimeout(D),console.log("failed.. deleted -- ",D),console.log("visible false"))}),[X]),c.a.createElement(c.a.Fragment,null,(null===s||void 0===s?void 0:s.length)<4&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"text_line_choice ".concat(o),onClick:g>0?function(){u(oe(!0)),clearTimeout(D),console.log("deleted -- ",D);var e=30;L(e),t=setInterval((function(){if(console.log("timer is not deleted~~~~~~~~~~~"),0===--e)return console.log("tick\uc774 0\uc774\ub77c\uc11c \uc2e4\ud589\ud569\ub2c8\ub2e4."),clearInterval(t),void G();L(e)}),970),console.log("made -- ",t),M(t),Qt.emit("empty_num_decrease",{scene_id:a,user_id:b}),j(!0)}:null},"\uc120\ud0dd\uc9c0 \ucd94\uac00 (+",g,")")),c.a.createElement(le,{ref:U,visible:O,onCancel:G,onCreate:function(){S.validateFields(function(){var e=Object(y.a)(_.a.mark((function e(t,n){var c,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(D),console.log("deleted -- ",D),!H.current&&!t&&O){e.next=4;break}return e.abrupt("return");case 4:return H.current=!0,c={gameId:i,prevSceneId:a,isFirst:0,sceneDepth:r+1,title:n.title},e.next=8,m.a.post("/api/scene/create",c);case 8:l=e.sent,Qt.emit("created_choice",{sceneId:a,userId:b,exp:l.data.exp}),S.resetFields(),j(!1),d.replace({pathname:"/scene/make",state:{gameId:i,sceneId:l.data.sceneId}});case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},remainTime:C}))})),me=a(535);var de=function(e,t){var a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t})),Object(n.useEffect)((function(){function t(e){a.current(e)}return document.addEventListener(e,t),function(){return document.removeEventListener(e,t)}}),[])};var fe=function(e){var t=e.cut_script,a=e.setIsTyping,r=Object(n.useState)(!1),i=Object(v.a)(r,2),l=i[0],s=i[1],o=Object(me.a)(t,{pace:function(){return 150},onFinished:function(){s(!0)}}),u=Object(v.a)(o,2),m=u[0],d=u[1].skip;function f(e){d()}return re("Enter",f),re("Space",f),de("mouseup",f),Object(n.useEffect)((function(){return function(){console.log("SETISTYPING!!!"),a(!1)}}),[l]),t?c.a.createElement("div",null,m):c.a.createElement("div",null)},pe=(a(508),function(e){var t=e.gameId,a=e.setScene,r=Object(l.f)(),i=Object(p.c)((function(e){return e.user})),s=Object(n.useState)(!1),o=Object(v.a)(s,2),u=o[0],d=o[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(A.a,{onClick:function(){d(!0)},className:"ending_button"},"\ucc98\uc74c\uc73c\ub85c \ub3cc\uc544\uac00\uae30"),c.a.createElement(ce.a,{title:"\u26a0 \uc8fc\uc758 \u26a0",visible:u,maskClosable:!1,closable:!1,centered:!0,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(A.a,{key:"ok",type:"primary",onClick:function(){i&&m.a.get("/api/users/playing-list/clear").then((function(e){e.data.success?(d(!1),a({}),r.push({pathname:"/gameplay",state:{sceneId:e.data.teleportSceneId,gameId:t}})):(d(!1),alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."))}))}},"\ud655\uc778"),c.a.createElement(A.a,{key:"cancel",onClick:function(){d(!1)}},"\ucde8\uc18c"))},c.a.createElement("p",null,"\uccab \ud654\uba74\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4."),c.a.createElement("p",null,"\uc774\uc5b4\ud558\uae30\ub85c \ub3cc\uc544\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")))}),ge=function(e){var t=e.gameId,a=e.setScene,n=Object(l.f)(),r=Object(p.c)((function(e){return e.user}));return c.a.createElement(A.a,{onClick:function(){r?m.a.get("/api/users/playing-list/pop").then((function(e){e.data.success?(a({}),n.push({pathname:"/gameplay",state:{sceneId:e.data.teleportSceneId,gameId:t}})):alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")})):alert("\ub85c\uadf8\uc778 \uc2dc \uc9c0\uc6d0\ub418\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.")},className:"ending_button"},"\uc774\uc804\uc73c\ub85c \ub3cc\uc544\uac00\uae30")},be=function(e){var t=e.gameId,a=e.setScene;return c.a.createElement("div",{className:"ending_box"},c.a.createElement("div",null,"The End"),c.a.createElement("div",{className:"ending_button_container"},c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,{key:0,gameId:t,setScene:a}),c.a.createElement(ge,{key:1,gameId:t,setScene:a}))))},ve=function(e){var t=e.cut_name,a=e.cut_script,n=e.setIsTyping,r=e.isTyping,i=e.theme;return i="atorney",c.a.createElement(c.a.Fragment,null,a?c.a.createElement("div",{className:"text_window ".concat(i)},c.a.createElement("div",{className:"text_container ".concat(i)},c.a.createElement("div",{className:"name_block ".concat(i)},t),c.a.createElement("div",{className:"text_block ".concat(i)},c.a.createElement("div",{className:"text_line ".concat(i)}," ",r?c.a.createElement(fe,{cut_script:a,setIsTyping:n}):a)))):c.a.createElement("div",{className:"text_line ".concat(i)}," ",r?c.a.createElement(fe,{cut_script:a,setIsTyping:n}):a))},Ee=function(e){var t=e.game_id,a=e.cut_name,n=e.cut_script,r=e.scene_next_list,i=e.scene_id,l=e.scene_depth,s=e.setIsTyping,o=e.isTyping,u=e.isEnding,m=e.isLastMotion,d=e.theme,f=e.setScene;d="atorney";var p=r.map((function(e,a){return console.log("---------choices-------"),c.a.createElement(x.b,{to:{pathname:"/gameplay",key:a,state:{gameId:t,sceneId:e.sceneId}},key:a,style:{textDecoration:"none"},className:"text_line_choice ".concat(d),onClick:function(){return f({})}},e.script)}));return c.a.createElement("div",{className:"text_window ".concat(d)},c.a.createElement(ve,{cut_name:a,cut_script:n,setIsTyping:s,isTyping:o,theme:d}),m&&c.a.createElement("div",{class:"choice_box ".concat(u," ").concat(d)},!0===u?c.a.createElement(be,{gameId:t,setScene:f}):c.a.createElement(c.a.Fragment,null,p,r.length<4?c.a.createElement(ue,{scene_id:i,scene_depth:l,game_id:t,scene_next_list:r,theme:d}):c.a.createElement("div",null," "))))};a(1064);var he=function(e){var t=e.gameId,a=e.sceneId,r=e.trigger,i=e.setTrigger,l=Object(p.c)((function(e){return e.user})),s=Object(n.useState)(""),o=Object(v.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)(""),g=Object(v.a)(f,2),b=g[0],E=g[1];return r?c.a.createElement("div",{className:"dislike_popup"},c.a.createElement("div",{className:"dislike_inner"},c.a.createElement("button",{className:"close_btn",onClick:function(){return i((function(e){return!e}))}},"close"),c.a.createElement("label",null,"Title"),c.a.createElement("input",{onChange:function(e){d(e.currentTarget.value)},value:u}),c.a.createElement("label",null,"Description"),c.a.createElement("textarea",{onChange:function(e){E(e.currentTarget.value)},value:b}),c.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault();var n={title:u,description:b,user:l.userData._id,sceneId:a,gameId:t};m.a.post("/api/complaint/save",n).then((function(e){e.data.success?(O.a.success("\uac10\uc0ac\ud569\ub2c8\ub2e4. \uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),i((function(e){return!e}))):O.a.error("\uc2e0\uace0\ud558\ub294\ub370 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}))}},"\uc2e0\uace0\ud558\uae30"))):""};a(1065);function _e(){var e=document.getElementsByClassName("HistoryMap_inner")[0],t=window.getComputedStyle(e).getPropertyValue("transform"),a="none"!==t?parseInt(t.split(",")[4]):0;e.style.transform="translate(".concat(a+250,"px, 0px)")}function ye(){var e=document.getElementsByClassName("HistoryMap_inner")[0],t=window.getComputedStyle(e).getPropertyValue("transform"),a="none"!==t?parseInt(t.split(",")[4]):0;e.style.transform="translate(".concat(a-250,"px, 0px)")}var Oe=[],je=1;var ke=function(e){var t=e.userhistory,a=e.setTrigger,r=(e.setScene,e.history),i=r.gameId,l=r.sceneId,s=Object(n.useState)([]),o=Object(v.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)(!1),p=Object(v.a)(f,2),g=p[0],b=p[1];Object(n.useEffect)((function(){if(e.trigger)return m.a.get("api/game/simple-scene-info").then((function(e){Oe=e.data.sceneinfo,d(Oe)})),function(){d([])}}),[e.trigger]);var E=u.map((function(e,t){return c.a.createElement("div",{className:"HistoryMap_scene",key:t+1,onClick:function(){return je=t+1,void b(!0)}},c.a.createElement("div",{className:"HistoryMap_scene_num"}," #",t+1),c.a.createElement("img",{className:"HistoryMap_scene_img",src:e.background}),c.a.createElement("div",{className:"HistoryMap_scene_name"},e.name,":"),c.a.createElement("div",{className:"HistoryMap_scene_text"},'"',e.script,'"'))}));return e.trigger?c.a.createElement("div",{className:"HistoryMap_popup"},c.a.createElement("div",{className:"close_btn",onClick:function(){a(!1)}},c.a.createElement(S,{className:"close_btn",src:"close_2",width:"45",height:"50",color:"#F5F5F5"})),c.a.createElement("div",{className:"toleft_btn",onClick:_e},c.a.createElement(S,{className:"toleft_btn",src:"arrow_1",width:"45",height:"50",color:"#F5F5F5"})),c.a.createElement("div",{className:"toright_btn",onClick:ye},c.a.createElement(S,{className:"toright_btn",src:"arrow_1",width:"100%",height:"100%",color:"#F5F5F5"})),c.a.createElement("div",{className:"HistoryMap_inner",style:{width:15*Oe.length+"%"}},E),c.a.createElement(ce.a,{title:"\uacbd\uace0",visible:g,onOk:function(){!function(e){var t=e.userhistory,a=e.gameId,n=e.sceneId,c=e.GoScene,r=e.setScene,i={data:{sceneIndex:c-1}};m.a.post("/api/game/refreshHistory",i).then((function(e){if(e.data.success){for(var c=document.getElementsByClassName("close_btn"),i=c.length-1;i>=0;i--)c[i].click();r({}),t.replace({pathname:"/gameplay",state:{sceneId:n[je-1],gameId:a}})}else O.a.error("Scene \ubcc0\uacbd \uc694\uccad \uc2e4\ud328")}))}({userhistory:t,gameId:i,sceneId:l,targetScene:je}),b(!1)},onCancel:function(){b(!1)}},c.a.createElement("p",null,je," \ubc88\uc9f8 \uc52c\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4. \ub3cc\uc544\uac00\ub824\ub294 \uc52c\uae4c\uc9c0\uc758 \uae30\ub85d\uc740 \uc0ad\uc81c\ub429\ub2c8\ub2e4."))):null},Ne=(a(1066),0),Se=1,we=2,Ie=3,xe=4,Ce=5,Le=6,Be=function(){switch(Object(p.c)((function(e){return e.gameplay.loadingType}))){case Ne:return null;case Se:return c.a.createElement("div",{style:{animation:"1.5s ease-out 0s 1 basic"},className:"loading_page"},c.a.createElement("div",{className:"loading_icon"},"loading....."));case we:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideLeft"},className:"loading_page"});case Ie:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideRight"},className:"loading_page"});case xe:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideUp"},className:"loading_page"});case Ce:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideDown"},className:"loading_page"});case Le:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 blackIn"},className:"loading_page"});default:return null}};function Te(e){return{type:"load_empty_num",payload:void 0!==e.emptyNum?e.emptyNum:m.a.get("/api/game/getSceneInfo/".concat(e.sceneId)).then((function(e){if(e.data.success)return e.data.scene.sceneTmp.emptyNum}))}}function De(){if("undefined"!==typeof document.fullscreenElement)return"fullscreenElement";if("undefined"!==typeof document.mozFullScreenElement)return"mozFullScreenElement";if("undefined"!==typeof document.msFullscreenElement)return"msFullscreenElement";if("undefined"!==typeof document.webkitFullscreenElement)return"webkitFullscreenElement";throw new Error("fullscreenElement is not supported by this browser")}a(1067);var Me=[{sceneId:1,link:null},{sceneId:2,link:null},{sceneId:3,link:null},{sceneId:4,link:null},{sceneId:null,link:null},{sceneId:null,link:null},{sceneId:7,link:null},{sceneId:8,link:null},{sceneId:9,link:null},{sceneId:10,link:null},{sceneId:11,link:null},{sceneId:12,link:null},{sceneId:13,link:null},{sceneId:14,link:null},{sceneId:15,link:null},{sceneId:16,link:null},{sceneId:17,link:null},{sceneId:18,link:null},{sceneId:19,link:null},{sceneId:20,link:null},{sceneId:21,link:null},{sceneId:22,link:null}],Fe=[0,0],Re=[50,0],ze=!1;var Pe=function(e){var t=e.trigger,a=(e.userhistory,e.setTrigger),r=e.history,i=(r.gameId,r.sceneId,Object(n.useState)()),l=Object(v.a)(i,2),s=l[0],o=l[1];function u(e){Fe=[e.pageX,e.pageY],ze=!0,e.preventDefault()}function m(e){ze=!1,e.preventDefault()}function d(e){ze&&(Fe[0]===e.pageX&&Fe[1]===e.pageY||(Re=[Re[0]-(Fe[0]-e.pageX),Re[1]-(Fe[1]-e.pageY)],o(Re),Fe=[e.pageX,e.pageY])),e.preventDefault()}!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Object(n.useState)(!1),a=Object(v.a)(t,2),c=a[0],r=a[1];c||(e(),r(!0))}((function(){o(Re)})),Object(n.useEffect)((function(){var e=document.getElementsByClassName("TreeMap_popup");t?(e[0].addEventListener("mousedown",u),e[0].addEventListener("mouseup",m),e[0].addEventListener("mousemove",d)):e[0]&&(e[0].removeEventListener("mousedown",u),e[0].removeEventListener("mouseup",m),e[0].removeEventListener("mousemove",d))}),[t]);var f=1,p=1,g=0,b=Me.map((function(e,t){return g===p&&(f+=1,g=0,p*=4),g+=1,c.a.createElement("div",{className:"TreeMap_nodeContainer",style:{width:"25%",height:1/p*100+"%",left:(f-1)/4*100+"%",top:(g-1)/p*100+"%"}},c.a.createElement("div",{className:"TreeMap_node",style:{width:"1rem",height:"1rem"}}),4!==f?c.a.createElement(n.Fragment,null,c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"12.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"37.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"62.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"70%",top:"87.5%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine",style:{left:"50%",top:"50%"}}),c.a.createElement("hr",{className:"TreeMap_nodeLine_vertical"})):null)}));return t?c.a.createElement("div",{className:"TreeMap_popup"},c.a.createElement("button",{className:"close_btn",onClick:function(){a(!1)}},"close"),c.a.createElement("div",{className:"TreeMap_inner",style:{width:"40%",height:5*Math.pow(4,3)+"%",left:s[0],top:s[1]}},b)):null},He=a(185),Ue=a(529),Ge=a.n(Ue),Ae=a(528),We=a.n(Ae),Xe=a(527),Ve=a.n(Xe),qe=a(186),Ye=new Audio;Ye.volume=.5;var Qe=new Audio;Qe.volume=.5;var Ze=function(e){var t,a,r,i=Object(l.g)().state,s=i.gameId,o=i.sceneId,u=e.history,d=Object(p.b)(),f=Object(p.c)((function(e){return e.user})),g=Object(p.c)((function(e){return e.gameplay.isPause})),b=Object(n.useState)(window.innerWidth),E=Object(v.a)(b,2),h=E[0],_=E[1],y=Object(n.useState)(window.innerHeight),j=Object(v.a)(y,2),k=j[0],N=j[1],S=Object(n.useState)(0),w=Object(v.a)(S,2),I=w[0],x=w[1],C=Object(n.useState)({}),B=Object(v.a)(C,2),T=B[0],D=B[1],M=Object(n.useState)(!1),F=Object(v.a)(M,2),R=F[0],z=F[1],P=Object(n.useState)({}),H=Object(v.a)(P,2),U=H[0],G=H[1],A=Object(n.useState)(!1),W=Object(v.a)(A,2),X=W[0],V=W[1],q=Object(n.useState)(!1),Y=Object(v.a)(q,2),Q=Y[0],Z=Y[1],K=Object(n.useState)(!1),J=Object(v.a)(K,2),$=J[0],ee=J[1],ce=Object(n.useState)(0),ie=Object(v.a)(ce,2),le=ie[0],ue=ie[1],me=Object(n.useState)(0),de=Object(v.a)(me,2),fe=de[0],pe=de[1],ge=Object(n.useState)(!1),be=Object(v.a)(ge,2),_e=be[0],ye=be[1],Oe=Object(p.c)((function(e){return e.sync.prevSceneId})),je=Object(n.useRef)(null);try{var Ne=function(e){var t=c.a.useState(null!=document[De()]),a=Object(v.a)(t,2),n=a[0],r=a[1];return c.a.useLayoutEffect((function(){return document.onfullscreenchange=function(){return r(null!=document[De()])},function(){return document.onfullscreenchange=void 0}})),[n,function(){null!=e.current&&e.current.requestFullscreen().then((function(){r(null!=document[De()])})).catch((function(){r(!1)}))}]}(je),Se=Object(v.a)(Ne,2);t=Se[0],a=Se[1]}catch(lt){r="Fullscreen not supported",t=!1,a=void 0}re("Enter",nt),re("Space",nt),re("Digit1",ct),re("Digit2",ct),re("Digit3",ct),re("Digit4",ct),Object(n.useEffect)((function(){Qt.off("accept_final_change"),Qt.on("accept_final_change",(function(e){var t=e.sceneId,a=e.title,n=T.nextList?Object(ae.a)(T.nextList):[];n.push({sceneId:t,script:a});var c=Object(te.a)({},T,{nextList:n});D(c)}))}),[T]);var we=Object(n.useState)(.5),Ie=Object(v.a)(we,2),xe=Ie[0],Ce=Ie[1],Le=Object(n.useState)(!1),Me=Object(v.a)(Le,2),Fe=Me[0],Re=Me[1],ze=Object(n.useRef)(.5),Ue=function(e){Ce(e),Re(0===e),Ye.volume=e,Qe.volume=e},Ae=Object(n.useState)(!0),Xe=Object(v.a)(Ae,2),Ze=Xe[0],Ke=Xe[1];function Je(e){var t,a;Ze&&Ke(!1),(null===T||void 0===T||null===(t=T.cutList[e])||void 0===t?void 0:t.bgm.music)&&(e>0&&T.cutList[e-1].bgm.music==T.cutList[e].bgm.music||(Ye.pause(),Ye.src=T.cutList[e].bgm.music,Ye.play())),(null===T||void 0===T||null===(a=T.cutList[e])||void 0===a?void 0:a.sound.music)&&(Qe.pause(),Qe.src=T.cutList[e].sound.music,Qe.play())}var $e=Object(n.useState)(!0),et=Object(v.a)($e,2),tt=et[0],at=et[1];function nt(e){tt||g||(I<T.cutList.length-1?(Je(I+1),x(I+1),at(!0)):I==T.cutList.length-1&&ee(!0))}function ct(e){if(I===T.cutList.length-1&&!g)if(T.nextList[parseInt(e.key)-1])u.replace({pathname:"/gameplay",state:{sceneId:T.nextList[parseInt(e.key)-1].sceneId,gameId:s}});else if(parseInt(e.key)-1===T.nextList.length){d(oe(!0)),e.preventDefault();var t=document.getElementById("choice");t&&t.click()}}console.log("isTyping!!!",tt),Object(n.useEffect)((function(){if(f&&f.userData){var e={objectId:o,userId:f.userData._id};m.a.post("/api/thumbsup/count",e).then((function(e){e.data.success&&(ye(e.data.isClicked),pe(e.data.thumbsup))}));var t={userId:f.userData._id,objectId:o};m.a.post("/api/view/",t).then((function(e){e.data.success&&ue(e.data.view)}))}}),[o,f]),Object(n.useEffect)((function(){Qt.emit("leave room",{room:Oe}),Qt.emit("room",{room:o}),d({type:"SAVE_PREV_SCENE",payload:{prevSceneId:o}.prevSceneId}),Qt.off("empty_num_changed"),Qt.on("empty_num_changed",(function(e){d(Te({sceneId:o,emptyNum:e.emptyNum}))})),Qt.emit("validate_empty_num",{scene_id:o})}),[o]),Object(n.useEffect)((function(){d(L(!1))}),[]),Object(n.useEffect)((function(){d(oe(!!(X||R||Q)))}),[X,R,Q]),Object(n.useEffect)((function(){ee(!1),console.log(s,o),m.a.get("/api/game/getnextscene/".concat(s,"/").concat(o)).then((function(t){if(t.data.success){var a={gameId:s,sceneId:t.data.sceneIdList};at(!0),G(a),x(0),Ye.pause(),Qe.pause(),Ke(!0),D(t.data.scene),d(oe(!1)),d(se(0)),d(se(6))}else O.a.error("Scene \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),e.history.replace("/game/".concat(s))}))}),[o]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){_(window.innerWidth),N(window.innerHeight)}))}),[window.innerWidth,window.inner]);var rt,it=t?0:.1;return rt=.5625*h>k?{width:"".concat(k*(1-2*it)/.5625,"px"),height:"".concat(k*(1-2*it),"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(h*(1-2*it),"px"),height:"".concat(h*(1-2*it)*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")},Object(n.useEffect)((function(){return d(Te({sceneId:o})),function(){Ye.pause(),Qe.pause()}}),[]),(null===T||void 0===T?void 0:T.cutList)?(0==I&&Ze&&Je(0),c.a.createElement("div",{className:"".concat(t?"gamePlay__container_fullscreen":"gamePlay__container"),ref:je},c.a.createElement("div",{className:"".concat(t?"gamePlay__mainContainer_fullscreen":"gamePlay__mainContainer")},c.a.createElement("div",{className:"".concat(t?"backgroundImg_container_fullscreen":"backgroundImg_container"),style:rt,onClick:function(e){return nt()}},c.a.createElement(Be,null),T.cutList[I]&&T.cutList[I].background?c.a.createElement("img",{className:"backgroundImg",src:T.cutList[I].background,alt:"Network Error"}):c.a.createElement("div",null),c.a.createElement(ne,{characterList:T.cutList[I].characterList}),I===T.cutList.length-1?c.a.createElement(Ee,{game_id:s,cut_name:T.cutList[I].name,cut_script:T.cutList[I].script,scene_depth:T.depth,scene_id:T._id,scene_next_list:T.nextList,setIsTyping:at,isTyping:tt,isEnding:T.isEnding,isLastMotion:$,theme:T.theme,setScene:D}):c.a.createElement(ve,{cut_name:T.cutList[I].name,cut_script:T.cutList[I].script,setIsTyping:at,isTyping:tt,theme:T.theme}),c.a.createElement(ke,{userhistory:u,history:U,trigger:X,setTrigger:V,setScene:D}),c.a.createElement(Pe,{userhistory:u,history:U,trigger:Q,setTrigger:Z}))),c.a.createElement("div",{className:"gamePlay__btn_container"},c.a.createElement("div",{className:"gamePlay__btn",onClick:function(){Fe?(Re(!1),Ue(ze.current)):(ze.current=xe,Re(!0),Ue(0))}},Fe?c.a.createElement(We.a,null):c.a.createElement(Ge.a,null)),c.a.createElement("div",{style:{width:"80px"}},c.a.createElement(Ve.a,{min:0,max:1,step:.02,value:xe,onChange:function(e){Ue(e)}})),c.a.createElement("div",null,I===T.cutList.length-1&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:_e?"gamePlay__btnClicked":"gamePlay__btn",onClick:function(){if(f&&f.userData){var e={userId:f.userData._id,objectId:o};m.a.post("/api/thumbsup/",e).then((function(e){e.data.success&&(ye(e.data.isClicked),pe(e.data.thumbsup))}))}}},"\uc88b\uc544\uc694: ",fe),c.a.createElement("button",{className:"gamePlay__btn"},"\uc870\ud68c\uc218: ",le)),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){return V((function(e){return!e}))}},"\ubbf8\ub2c8\ub9f5"),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){Z((function(e){return!e}))}},"\ud2b8\ub9ac\ub9f5"),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){return z((function(e){return!e}))}},"\uc2e0\uace0")),r?c.a.createElement("button",{onClick:function(){return alert("Fullscreen is unsupported by this browser, please try another browser.")},className:"gamePlay__btn"},r):t?c.a.createElement("button",{onClick:function(){return document.exitFullscreen()},className:"gamePlay__btn"},c.a.createElement(He.a,{icon:qe.a})):c.a.createElement("button",{onClick:a,className:"gamePlay__btn"},c.a.createElement(He.a,{icon:qe.b}))),c.a.createElement(he,{sceneId:o,gameId:s,trigger:R,setTrigger:z}))):c.a.createElement("div",{className:"loader_container"},c.a.createElement("div",{class:"loader"},"Loading..."))};a(510);var Ke=function(e){var t=e.imgUrl,a=e.setBackgroundImg;return c.a.createElement("div",{onClick:function(){a(t)}},c.a.createElement("img",{src:"".concat(t),alt:"img"}))};var Je=Object(n.memo)((function(e){var t=e.gameDetail,a=e.setBackgroundImg,n=(e.setMakeModalState,t.background.map((function(e,t){return c.a.createElement("div",{className:"background",key:"".concat(t)},c.a.createElement(Ke,{imgUrl:e.image,setBackgroundImg:a}))})));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement("div",null,n))}));function $e(e){return{type:"select_character",payload:e}}var et=function(e){var t=e.character,a=e.index,n=Object(p.b)(),r=new Image;return r.src=t.image_array[0],c.a.createElement("div",{className:"characterSidebar_box",onClick:function(){n($e(Object(te.a)({},t,{index:a})))}},c.a.createElement("img",{src:t.image_array[0],alt:"img",className:r.width>r.height?"characterSidebar_Image_width":"characterSidebar_Image_height"}))};a(1072);var tt=Object(n.memo)((function(e){var t=e.gameDetail,a=e.setCharacterList,n=e.setName,r=t.character.map((function(e,t){return c.a.createElement("div",{className:"character",key:"".concat(t)},c.a.createElement(et,{character:e,index:t,setCharacterList:a,setName:n}))}));return c.a.createElement("div",{className:"characterSidebar__container"},r)}));a(1073);var at=function(e){var t=e.bgm_audio,a=e.bgm,n=e.setBgmFile;return c.a.createElement("div",{onClick:function(){n(a),t.src=a.music,t.play()}},c.a.createElement("img",{src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),a.name)};var nt=Object(n.memo)((function(e){var t=e.gameDetail,a=e.bgm_audio,n=e.setBgmFile,r=(e.setMakeModalState,t.bgm.map((function(e,t){return c.a.createElement("div",{className:"bgm",key:"".concat(t)},c.a.createElement(at,{bgm_audio:a,bgm:e,setBgmFile:n}))})));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement("div",null,r))}));a(1074);var ct=function(e){var t=e.sound_audio,a=e.sound,n=e.setSoundFile;return c.a.createElement("div",{onClick:function(){n(a),t.src=a.music,t.play()}},c.a.createElement("img",{src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),a.name)};var rt=Object(n.memo)((function(e){var t=e.gameDetail,a=e.sound_audio,n=e.setSoundFile,r=(e.setMakeModalState,t.sound.map((function(e,t){return c.a.createElement("div",{className:"sound",key:"".concat(t)},c.a.createElement(ct,{sound_audio:a,sound:e,setSoundFile:n}))})));return c.a.createElement("div",{className:"sidebar__container"},c.a.createElement("div",null,r))})),it=a(1112),lt=(a(181),function(e){var t=e.setTag,a=e.tag;return c.a.createElement("div",{className:"tabs"},c.a.createElement("div",{className:"".concat(1===a?"tab is-selected":"tab"),onClick:function(){return t(1)}},"Character"),c.a.createElement("div",{className:"".concat(2===a?"tab is-selected":"tab"),onClick:function(){return t(2)}},"Background"),c.a.createElement("div",{className:"".concat(3===a?"tab is-selected":"tab"),onClick:function(){return t(3)}},"Bgm"),c.a.createElement("div",{className:"".concat(4===a?"tab is-selected":"tab"),onClick:function(){return t(4)}},"Sound"))}),st=a(1118);a(1075);var ot=function(e){var t=e.onDrop,a=e.multiple,n=e.maxSize,r=e.accept,i=e.blobURL;return c.a.createElement(Q.a,{onDrop:t,multiple:a,maxSize:n,accept:r},(function(e){var t=e.getRootProps,a=e.getInputProps;return c.a.createElement("div",Object.assign({className:"dropzone"},t()),c.a.createElement("input",a()),i?c.a.createElement("div",{className:"thumbnail__container"},c.a.createElement("img",{className:"thumbnail__img",src:i,alt:"thumbnail"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("p",{className:"thumbnail__msg"},c.a.createElement("b",null,"Click or Drop")),"  "),c.a.createElement(st.a,{className:"dropzone-icon"})))}))},ut=a(1119),mt=a(1120),dt=(a(1076),R.a.TextArea);var ft=function(e){var t=e.blobGame,a=e.setBlobGame,r=e.charPageNum,i=e.setCharFileQueue,l=e.setCharBlobList,s=Object(n.useState)([]),o=Object(v.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(0),f=Object(v.a)(d,2),p=f[0],g=f[1],b=Object(n.useRef)(0),E=function(e){a((function(t){return t.character[r.current].name=e.currentTarget.value,t})),g((function(e){return e+1}))},h=function(e){a((function(t){return t.character[r.current].description=e.currentTarget.value,t})),g((function(e){return e+1}))},_=function(e){for(var n=function(){if(!e[c])return O.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694."),{v:void 0};var n=URL.createObjectURL(e[c]);l((function(e){return[].concat(Object(ae.a)(e),[n])})),"-1"===b.current?(a((function(e){return e.character=[].concat(Object(ae.a)(e.character),[{name:"",description:"",image_array:[n]}]),e})),b.current=t.character.length-1):a((function(e){return e.character[b.current].image_array=[].concat(Object(ae.a)(e.character[b.current].image_array),[n]),e}))},c=0;c<e.length;c++){var r=n();if("object"===typeof r)return r.v}i((function(t){return[].concat(Object(ae.a)(t),[{index:Number(b.current),array:e}])})),g((function(e){return e+1}))};return Object(n.useEffect)((function(){if(t.character&&r.current<t.character.length){var e=t.character[r.current].image_array.map((function(e,a){return c.a.createElement("div",{id:r.current,className:"largeBox",key:a},c.a.createElement("img",{className:"smallBox",src:e,alt:"img"}),0===a&&c.a.createElement(F.a,null,c.a.createElement("label",null,"\uc774\ub984"),c.a.createElement(R.a,{onChange:E,value:t.character[r.current].name}),c.a.createElement("label",null,"\uc0c1\uc138\uc124\uc815"),c.a.createElement(dt,{onChange:h,value:t.character[r.current].description})),a===t.character[r.current].image_array.length-1&&c.a.createElement(ot,{onDrop:_,multiple:!0,maxSize:10485761,accept:"image/*"}))}));m(e)}else m("")}),[p,t]),de("mousedown",(function(e){for(var t=0;t<e.path.length;t++)if(e.path[t].id)return void(b.current=e.path[t].id)})),c.a.createElement("div",null,c.a.createElement("div",{className:"character-container"},0!==u&&c.a.createElement("div",null,u)),t.character&&r.current===t.character.length&&c.a.createElement("div",{id:-1},c.a.createElement(ot,{onDrop:_,multiple:!0,maxSize:10485761,accept:"image/*"})),0!==r.current&&c.a.createElement(ut.a,{style:{fontSize:"3rem"},onClick:function(){r.current--,g((function(e){return e+1}))},twoToneColor:"#52c41a"}),t.character&&r.current!==t.character.length&&c.a.createElement(mt.a,{style:{fontSize:"3rem"},onClick:function(){r.current++,g((function(e){return e+1}))},twoToneColor:"#52c41a"}),t.character&&c.a.createElement("div",null," ",r.current,"/",t.character.length))};a(1077);var pt=function(e){var t=e.game,a=e.setFileQueue,r=e.setTypeQueue,i=e.setBackBlobList,l=e.backBlobList,s=Object(n.useState)([]),o=Object(v.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)([]),f=Object(v.a)(d,2),p=f[0],g=f[1];return Object(n.useEffect)((function(){t.background&&m(t.background.map((function(e,t){return c.a.createElement("div",{className:"largeBox1",key:t},c.a.createElement("img",{className:"smallBox12",src:e.image,alt:"img"}))})))}),[t]),Object(n.useEffect)((function(){l&&g(l.map((function(e,t){return c.a.createElement("div",{className:"largeBox1",key:t},c.a.createElement("img",{className:"smallBox12",src:e,alt:"img"}))})))}),[l]),c.a.createElement("div",null,c.a.createElement(ot,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void O.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),r((function(e){return[].concat(Object(ae.a)(e),[1])})),i((function(a){return[].concat(Object(ae.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"image/*"}),c.a.createElement("div",{className:"background-container"},0!==u&&c.a.createElement("div",null,u),0!==p&&c.a.createElement("div",null,p)))};a(511);var gt=function(e){var t=e.game,a=e.setFileQueue,r=e.setTypeQueue,i=e.setBgmBlobList,l=e.bgmBlobList,s=e.setBgmBlobNames,o=e.bgmBlobNames,u=Object(n.useState)([]),m=Object(v.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)([]),g=Object(v.a)(p,2),b=g[0],E=g[1];return Object(n.useEffect)((function(){t.bgm&&f(t.bgm.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),e.name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),e.name))})))}),[t]),Object(n.useEffect)((function(){l&&E(l.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),o[t].name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),o[t].name))})))}),[l]),c.a.createElement("div",null,c.a.createElement(ot,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void O.a.error("10MB \uc774\ud558\uc758 \uc74c\uc6d0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),r((function(e){return[].concat(Object(ae.a)(e),[2])})),s((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),i((function(a){return[].concat(Object(ae.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"audio/*"}),c.a.createElement("div",{className:"music-container"},0!==d&&c.a.createElement("div",null,d),0!==b&&c.a.createElement("div",null,b)))};var bt=function(e){var t=e.game,a=e.setFileQueue,r=e.setTypeQueue,i=e.setSoundBlobList,l=e.soundBlobList,s=e.setSoundBlobNames,o=e.soundBlobNames,u=Object(n.useState)([]),m=Object(v.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)([]),g=Object(v.a)(p,2),b=g[0],E=g[1];return Object(n.useEffect)((function(){t.sound&&f(t.sound.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),e.name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),e.name))})))}),[t]),Object(n.useEffect)((function(){l&&E(l.map((function(e,t){return c.a.createElement("div",{className:"largeBox13",key:t},(t+1)%2?c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox13",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),o[t].name):c.a.createElement("div",null,c.a.createElement("img",{className:"smallBox23",src:"http://".concat("localhost",":5000/uploads/music_icon.jpg"),alt:"img"}),o[t].name))})))}),[l]),c.a.createElement("div",null,c.a.createElement(ot,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void O.a.error("10MB \uc774\ud558\uc758 \uc74c\uc6d0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),r((function(e){return[].concat(Object(ae.a)(e),[3])})),s((function(a){return[].concat(Object(ae.a)(a),[e[t]])})),i((function(a){return[].concat(Object(ae.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"audio/*"}),c.a.createElement("div",{className:"music-container"},0!==d&&c.a.createElement("div",null,d),0!==b&&c.a.createElement("div",null,b)))},vt=a(319),Et=a.n(vt),ht=a(145),_t=function(e){var t=e.gameId,a=e.visible,r=e.setTag,i=e.tag,l=e.setReload,s=Object(n.useState)([]),o=Object(v.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)([]),p=Object(v.a)(f,2),g=p[0],b=p[1],E=Object(n.useState)([]),h=Object(v.a)(E,2),_=h[0],y=h[1],j=Object(n.useState)([]),k=Object(v.a)(j,2),N=k[0],S=k[1],w=Object(n.useState)([]),I=Object(v.a)(w,2),x=I[0],C=I[1],L=Object(n.useState)([]),B=Object(v.a)(L,2),T=B[0],D=B[1],M=Object(n.useState)([]),F=Object(v.a)(M,2),R=F[0],z=F[1],P=Object(n.useState)([]),H=Object(v.a)(P,2),U=H[0],G=H[1],A=Object(n.useState)([]),W=Object(v.a)(A,2),X=W[0],V=W[1],q=Object(n.useRef)(0),Y=Object(n.useState)([]),Q=Object(v.a)(Y,2),Z=Q[0],K=Q[1],J=Object(n.useState)([]),$=Object(v.a)(J,2),ee=$[0],te=$[1],ae={gameId:t};Object(n.useEffect)((function(){m.a.post("/api/game/getgamedetail",ae).then((function(e){e.data.success?(d(e.data.gameDetail),V(Et.a.cloneDeep(e.data.gameDetail))):alert("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var ne=function(){ee.forEach((function(e){e&&URL.revokeObjectURL(e)})),N.forEach((function(e){e&&URL.revokeObjectURL(e)})),x.forEach((function(e){e&&URL.revokeObjectURL(e)})),R.forEach((function(e){e&&URL.revokeObjectURL(e)}))},re=!1,ie=function(){var e,t;Z.length?function(){var a=Array.from({length:X.character.length},(function(){return 0})),n=new FormData;for(e=0;e<X.character.length;e++)for(t=0;t<Z.length;t++)Z[t].index===e&&(a[e]+=Z[t].array.length,Z[t].array.forEach((function(e){n.append("files",e)})));m.a.post("/api/game/uploadfile",n,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?le(a,e.data.files):alert("\uce90\ub9ad\ud130 DB \uc5c5\ub85c\ub4dc \uc2e4\ud328")}))}():le(null,null)},le=function(e,a){for(var n=0,c=0;c<X.character.length;c++)if(u.character[c]||u.character.push({name:"",description:"",image_array:[]}),u.character[c].name=X.character[c].name,u.character[c].description=X.character[c].description,e){for(var i=n;i<n+e[c];i++)console.log("".concat(ht.SERVER,"/").concat(a[i].path)),u.character[c].image_array.push(a[i].location);n+=e[c]}var s={gameId:t,character:u.character};console.log(u.character),m.a.post("/api/game/putCharDB",s).then((function(e){e.data.success?g.length||(l((function(e){return e+1})),r(0)):O.a.error("DB \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328")}))},se=function(){var e=new FormData;g.forEach((function(t){e.append("files",t)}));m.a.post("/api/game/uploadfile",e,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?oe(e.data.files):alert("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))},oe=function(e){for(var a={gameId:t,background:[],bgm:[],sound:[]},n=0;n<e.length;n++)switch(_[n]){case 1:a.background.push({name:e[n].originalname,image:e[n].location});break;case 2:a.bgm.push({name:e[n].originalname,music:e[n].location});break;case 3:a.sound.push({name:e[n].originalname,music:e[n].location});break;default:O.a.error("\uc815\uc758\ub418\uc9c0 \uc54a\uc740 \uc5c5\ub85c\ub4dc \ubc84\ud2bc\uc785\ub2c8\ub2e4.")}m.a.post("/api/game/putDB",a).then((function(e){e.data.success?(l((function(e){return e+1})),r(0)):O.a.error("DB \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328")}))};return c.a.createElement(ce.a,{className:"scenemake_modal",visible:a,okText:"Upload",onCancel:function(){ne(),r(0)},onOk:function(){re||(re=!0,ne(),ie(),g.length&&se())},width:1e3,style:{top:20}},c.a.createElement(lt,{setTag:r,tag:i}),1===i&&c.a.createElement(ft,{blobGame:X,setBlobGame:V,charPageNum:q,setCharFileQueue:K,setCharBlobList:te}),2===i&&c.a.createElement(pt,{game:u,setFileQueue:b,setTypeQueue:y,setBackBlobList:S,backBlobList:N}),3===i&&c.a.createElement(gt,{game:u,setFileQueue:b,setTypeQueue:y,setBgmBlobList:C,bgmBlobList:x,setBgmBlobNames:D,bgmBlobNames:T}),4===i&&c.a.createElement(bt,{game:u,setFileQueue:b,setTypeQueue:y,setSoundBlobList:z,soundBlobList:R,setSoundBlobNames:G,soundBlobNames:U}))},yt=(a(1078),R.a.TextArea),Ot=[{value:0,label:"Private"},{value:1,label:"Public"}],jt=[{value:0,label:"\uc0b4\uc544\ub0a8\uae30"},{value:1,label:"\ub85c\ub9e8\uc2a4"},{value:2,label:"\uc2a4\ud1a0\ub9ac"},{value:3,label:"\ucd94\ub9ac"},{value:4,label:"\ubcd1\ub9db"}],kt=function(e){var t=e.gameId,a=e.visible,r=e.setUploadModalState,i=e.onSubmit_saveScene,l=e.defaultTitle,s=e.defaultDescription,o=Object(p.c)((function(e){return e.user})),u=Object(n.useState)({defaultTitle:l}),d=Object(v.a)(u,2),f=d[0],g=d[1],b=Object(n.useState)({defaultDescription:s}),E=Object(v.a)(b,2),h=E[0],_=E[1],y=Object(n.useState)(0),j=Object(v.a)(y,2),k=j[0],N=j[1],S=Object(n.useState)(jt[0].label),w=Object(v.a)(S,2),I=w[0],x=w[1],C=Object(n.useState)(""),L=Object(v.a)(C,2),B=L[0],T=L[1],D=Object(n.useState)([]),M=Object(v.a)(D,2),z=M[0],P=M[1];Object(n.useEffect)((function(){g(l),_(s)}),[l,s]);var H=function(e){e.preventDefault(),""!==f&&""!==h&&""!==B?(U(),r(!1),i()):O.a.error("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},U=function(){URL.revokeObjectURL(B);var e=new FormData;z.forEach((function(t){e.append("files",t)})),m.a.post("/api/game/uploadfile",e,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?G(e.data.files[0].location):O.a.error("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))},G=function(e){var a={gameId:t,creator:o.userData._id,title:f,description:h,thumbnail:e,privacy:k,category:I,writer:[o.userData._id]};m.a.post("/api/game/uploadgameInfo",a).then((function(e){e.data.success||O.a.error("game\uc81c\uc791 \uc2e4\ud328")}))};return c.a.createElement(ce.a,{className:"scenemake_modal",visible:a,okText:"\uc5c5\ub85c\ub4dc",cancelText:"\ucde8\uc18c",onCancel:function(){B&&URL.revokeObjectURL(B),r(!1)},onOk:H,width:1e3,centered:!0,closable:!1},c.a.createElement("div",null,c.a.createElement("label",null,"Upload Game"),c.a.createElement(F.a,{onSubmit:H},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(ot,{onDrop:function(e){e[0]?(URL.revokeObjectURL(B),T(URL.createObjectURL(e[0])),P(e)):O.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.")},multiple:!1,maxSize:10485761,accept:"image/*",blobURL:B})),c.a.createElement("div",{className:"scenemake_modal_description"},c.a.createElement("label",null,"\uc81c\ubaa9"),c.a.createElement(R.a,{onChange:function(e){g(e.currentTarget.value)},value:f}),c.a.createElement("label",null,"\uac8c\uc784 \uc124\uba85"),c.a.createElement(yt,{onChange:function(e){_(e.currentTarget.value)},value:h}),c.a.createElement("select",{onChange:function(e){N(e.currentTarget.value)}},Ot.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("select",{onChange:function(e){var t=e.currentTarget.value;x(e.currentTarget[t].text)}},jt.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)})))))))},Nt=(a(1079),{}),St=function(e,t,a,n){e in Nt||(Nt[e]={}),t in Nt[e]||(Nt[e][t]=[]),Nt[e][t].push([a,n]),e.addEventListener(t,a,n)},wt=function(e,t){if(e in Nt){var a=Nt[e];if(t in a)for(var n=a[t],c=n.length;c--;){var r=n[c];e.removeEventListener(t,r[0],r[1])}}};var It=Object(n.memo)((function(e){var t=Object(p.b)(),a=e.charSchema,r=e.GameCharacterList,i=e.setCharacterList,l=e.index,s=(e.CharacterList,Object(n.useRef)()),o=Object(n.useRef)(),u=Object(n.useState)(!0),m=Object(v.a)(u,2),d=m[0],f=(m[1],Object(n.useState)(!0)),g=Object(v.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)(!1),_=Object(v.a)(h,2),y=_[0],O=_[1],j=Object(n.useState)(0),k=Object(v.a)(j,2),N=k[0],S=k[1],w=document.getElementById("backgroundImg_container"),I=[0,0],x=!1;function C(e){var t=[e.pageX,e.pageY];if(x&&d&&b){if(I[0]-e.pageX>3||I[1]-e.pageY>3||I[0]-e.pageX<-3||I[1]-e.pageY<-3){var a=w.offsetWidth,n=w.offsetHeight,c=Number(s.current.style.left.replace(/%/g,"")),r=Number(o.current.style.top.replace(/%/g,"").replace(/px/g,"")),i=c+100*(e.pageX-I[0])/a,u=r+100*(e.pageY-I[1])/n;s.current.style.left=String(i)+"%",o.current.style.top=String(u)+"%",I=t}}else if(x&&d&&y&&(I[0]-e.pageX>7||I[0]-e.pageX<-7)){var m=document.getElementById("".concat(l)).offsetWidth,f=Number(o.current.style.height.replace(/%/g,"")),p=0;(p=(I[0],f*(m-1*(I[0]-t[0]))/m))>20&&(o.current.style.height=String(p)+"%"),I=t}S(document.getElementById("".concat(l)).offsetWidth),e.stopPropagation(),e.preventDefault()}Object(n.useEffect)((function(){return St(w,"mousemove",C,!1),St(w,"mouseup",B,!1),S(document.getElementById("".concat(l)).offsetWidth),function(){wt(w,"mousemove"),wt(w,"mouseup")}}),[]);var L=function(e){St(w,"mousemove",C,!1),St(w,"mouseup",B,!1),I=[e.pageX,e.pageY],x=!0},B=function(e){wt(w,"mousemove"),wt(w,"mouseup"),i((function(e){return[].concat(Object(ae.a)(e.slice(0,l)),[Object(te.a)({},e[l],{posX:Number(s.current.style.left.replace(/%/g,"")),posY:Number(o.current.style.top.replace(/%/g,"").replace(/px/g,""))})],Object(ae.a)(e.slice(l+1,4)))})),i((function(e){return[].concat(Object(ae.a)(e.slice(0,l)),[Object(te.a)({},e[l],{size:Number(o.current.style.height.replace(/%/g,""))})],Object(ae.a)(e.slice(l+1,4)))})),I=[e.pageX,e.pageY],x=!1,O(!1),E(!0),t($e(Object(te.a)({},r[a.index],{index:a.index})))};return c.a.createElement("div",{ref:s,key:l,className:"CharacterBlock",style:{left:"".concat(a.posX,"%")}},c.a.createElement("div",{ref:o,className:"character__container",style:{height:"".concat(a.size,"%"),top:"".concat(a.posY,"%")}},c.a.createElement(He.a,{icon:qe.c,className:"btn_character_delete",style:{left:"".concat(N-17,"px")}}),c.a.createElement("img",{onMouseDown:L,className:"".concat(d?"characterImg_clicked":"characterImg"),id:"".concat(l),src:a.image,alt:"img"}),c.a.createElement("div",{className:"".concat(y?"btn_sizing_clicked":"btn_sizing"),onMouseOver:function(e){E(!1),O(!0)},onMouseOut:function(e){E(!0),O(!1)},onMouseDown:L,style:{left:"".concat(N-3,"px")}})))})),xt=(a(1080),Object(n.memo)((function(e){var t=e.onRemove_character,a=e.CharacterList,n=e.GameCharacterList,r=e.setCharacterList,i=a.map((function(e,i){return c.a.createElement("div",{key:i},c.a.createElement(It,{setCharacterList:r,GameCharacterList:n,onRemove_character:t,CharacterList:a,index:i,charSchema:e}))}));return a.length>0&&c.a.createElement("div",{className:"CharacterBlocks",id:"CharacterBlocks"},i)})));a(1081);var Ct=Object(n.memo)((function(e){var t=e.setName,a=e.character,n=e.setCharacterList,r=e.CharacterList,i=e.GameCharacterList,l=Object(p.b)(),s=(r.map((function(e,a){var n=new Image;return n.src=e.image,c.a.createElement("div",{key:a},c.a.createElement("div",{className:"characterList_Info",onClick:function(){!function(e){t(i[e].name),l($e(Object(te.a)({},i[e],{index:e})))}(e.index)}},c.a.createElement("img",{src:e.image,alt:"",className:n.height>n.width?"characterList_image_height":"characterList_image_width"})),c.a.createElement("div",null,e.name,"\uc774\ub984 \uc0ad\uc81c"))})),a.image_array.map((function(e,r){var i=new Image;return i.src=e,c.a.createElement("div",{key:r,className:"image_array__box",onClick:function(){!function(e,c){var r={index:a.index,image:c,posX:30,posY:15,reverse:0,size:90};n((function(e){for(var t=0;t<e.length;t++)if(e[t].index===a.index)return[].concat(Object(ae.a)(e.slice(0,t)),[Object(te.a)({},e[t],{image:c})],Object(ae.a)(e.slice(t+1,4)));return e.length>=3?(O.a.info("\uc778\ubb3c\uc740 \ucd5c\ub300 \uc138\uba85\uae4c\uc9c0 \ucd94\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4."),e):[].concat(Object(ae.a)(e),[r])})),t(a.name)}(0,e)}},c.a.createElement("img",{src:e,alt:"",className:i.height>i.width?"image_array_image_height":"image_array_image_width"}))})));return c.a.createElement("div",{className:"image_array__container"},s)}));a(1082);var Lt=Object(n.memo)((function(e){var t=e.setCharacterList,a=e.CharacterList,r=e.GameCharacterList,i=e.setName,l=(Object(p.b)(),Object(p.c)((function(e){return e.character}))),s=Object(n.useState)(!1),o=Object(v.a)(s,2),u=o[0],m=o[1];return Object(n.useEffect)((function(){for(var e=0,t=0;t<a.length;t++)if(a[t].index===l.characterSelected.index){e=1;break}m(1===e)}),[l,a]),c.a.createElement("div",null,c.a.createElement("div",{className:"modal_Character"},c.a.createElement(Ct,{setName:i,GameCharacterList:r,character:l.characterSelected,setCharacterList:t,CharacterList:a}),u&&c.a.createElement("div",{onClick:function(){t((function(e){for(var t=0;t<e.length;t++)if(e[t].index===l.characterSelected.index)return O.a.info("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),[].concat(Object(ae.a)(e.slice(0,t)),Object(ae.a)(e.slice(t+1,4)))})),i("")}},"\uc0ad\uc81c")))}));a(512),a(1083);var Bt=Object(n.memo)((function(e){var t=e.CutList,a=e.CutNumber,n=e.displayCut,r=e.setCutNumber,i=e.Hover,l=(e.setHover,e.EmptyCutList),s=e.saveCut,o=function(e){if(a>29)return n(e),void r(e);a!==e&&(s(),n(e),r(e))},u=t.map((function(e,t){return a===t?c.a.createElement("div",{className:"scene__CurrentSceneBox",key:"".concat(t)}):i?c.a.createElement("div",{className:"scene__SceneBox_color",key:"".concat(t),onMouseOver:function(){return o(t)}}):c.a.createElement("div",{className:"scene__SceneBox_color",key:"".concat(t),onClick:function(){return o(t)}})})),m=l.map((function(e,n){return a-t.length===n?c.a.createElement("div",{className:"scene__CurrentSceneBox",key:"".concat(n)}):c.a.createElement("div",{className:"scene__EmptySceneBox",key:"".concat(n)})}));return c.a.createElement("div",{className:"box sceneBox"},u,m)})),Tt=a(1121),Dt=a(1122),Mt=(a(1084),a(145)),Ft=new Audio,Rt=new Audio,zt=function(e){var t=Object(p.b)(),a=Object(l.f)(),r=Object(l.g)(),i=r.state,s=i.gameId,o=i.sceneId;void 0===r.state&&window.history.back();var u,d=Object(p.c)((function(e){return e.user})),f=Object(n.useState)(window.innerWidth),g=Object(v.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)(window.innerHeight),j=Object(v.a)(h,2),k=j[0],N=j[1],S=Object(n.useState)({}),w=Object(v.a)(S,2),I=w[0],x=w[1],C=Object(n.useState)(0),B=Object(v.a)(C,2),T=B[0],D=B[1],M=Object(n.useState)(1),F=Object(v.a)(M,2),R=F[0],z=F[1],P=Object(n.useState)(!1),H=Object(v.a)(P,2),U=H[0],G=H[1],W=Object(n.useState)(!0),X=Object(v.a)(W,2),V=X[0],q=X[1],Y=Object(n.useState)([]),Q=Object(v.a)(Y,2),Z=Q[0],K=Q[1],J=Object(n.useState)("".concat(Mt.STORAGE,"/defaultBackground.png")),$=Object(v.a)(J,2),ee=$[0],te=$[1],ne=Object(n.useState)(""),ie=Object(v.a)(ne,2),le=ie[0],oe=ie[1],ue=Object(n.useState)(""),me=Object(v.a)(ue,2),de=me[0],fe=me[1],pe=Object(n.useState)({name:"",music:""}),ge=Object(v.a)(pe,2),be=ge[0],ve=ge[1],Ee=Object(n.useState)({name:"",music:""}),he=Object(v.a)(Ee,2),_e=he[0],ye=he[1],Oe=Object(n.useState)(!1),je=Object(v.a)(Oe,2),ke=je[0],Ne=je[1],Se=Object(n.useState)(0),we=Object(v.a)(Se,2),Ie=we[0],xe=we[1],Ce=Object(n.useState)(!1),Le=Object(v.a)(Ce,2),Be=Le[0],Te=Le[1],De=Object(n.useState)([]),Me=Object(v.a)(De,2),Fe=Me[0],Re=Me[1],ze=Object(n.useState)(Array.from({length:30},(function(){return 0}))),Pe=Object(v.a)(ze,2),He=Pe[0],Ue=Pe[1],Ge=Object(n.useState)(!1),Ae=Object(v.a)(Ge,2),We=Ae[0],Xe=Ae[1];Object(n.useEffect)((function(){t(L(!1))}),[]),Object(n.useEffect)((function(){var t,a;d.userData&&(Qt.emit("leave room",{room:null===(t=d.userData._id)||void 0===t?void 0:t.toString()}),Qt.emit("room",{room:null===(a=d.userData._id)||void 0===a?void 0:a.toString()}));Qt.off("timeout_making"),Qt.on("timeout_making",(function(t){e.history.replace("/")}))}),[d]),Object(n.useEffect)((function(){Object(y.a)(_.a.mark((function a(){var n,c,r,i;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.get("/api/game/getSceneInfo/".concat(o));case 2:return n=a.sent,a.next=5,m.a.post("/api/game/scene/validate",{sceneId:o,gameId:s,isMaking:!0});case 5:if(c=a.sent,!n.data.success||!c.data.success){a.next=10;break}u=n.data.scene,a.next=12;break;case 10:return e.history.replace("/"),a.abrupt("return");case 12:u.cutList.length?(u.isFirst&&Ne(!0),Re(u.cutList),r=u.cutList[0],K(r.characterList),te(r.background),fe(r.name),oe(r.script),xe(u.cutList.length-1),t(se(0)),t(se(1))):u.isFirst?Ne(!0):(i={sceneId:u.prevSceneId},m.a.post("/api/scene/scenedetail",i).then((function(e){if(e.data.success){var a=e.data.lastCut;K(a.characterList),te(a.background),fe(a.name),t(se(0)),t(se(1))}else O.a.error("\uc774\uc804 Scene\uc758 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})));case 13:case"end":return a.stop()}}),a)})))()}),[]);var Ve=Object(n.useRef)(),qe=Object(n.useRef)(),Ye=Object(n.useRef)(),Qe=Object(n.useRef)(),Ze=function(e){Ke(),e.current.style.display="block"},Ke=function(){Ve.current.style.display="none",qe.current.style.display="none",Ye.current.style.display="none",Qe.current.style.display="none"};re("Enter",(function(e){at(e)}));var $e=function(){var e={characterList:Z,background:ee,script:le,name:de,bgm:be,sound:_e};ve({name:"",music:""}),ye({name:"",music:""}),Re((function(t){return[].concat(Object(ae.a)(t.slice(0,Ie)),[e],Object(ae.a)(t.slice(Ie+1,31)))})),Fe.length===Ie&&Ue((function(e){return Object(ae.a)(e.slice(0,He.length-1))}))},et=function(e){K(Fe[e].characterList),te(Fe[e].background),oe(Fe[e].script),fe(Fe[e].name),ve(Fe[e].bgm),ye(Fe[e].sound),Fe[e].bgm.music?(Ft.src=Fe[e].bgm.music,Ft.play()):Ft.pause(),Fe[e].sound.music?(Rt.src=Fe[e].sound.music,Rt.play()):Rt.pause()},at=function(e){e.preventDefault(),Ie>29?O.a.error("\ub354\uc774\uc0c1 Cut\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):(24===Ie&&O.a.warning("\uc0dd\uc131 \uac00\ub2a5\ud55c Cut\uc774 5\uac1c \ub0a8\uc558\uc2b5\ub2c8\ub2e4."),$e(),Ie<Fe.length-1?et(Ie+1):oe(""),xe((function(e){return e+1})))},ct=function(){var n=Object(y.a)(_.a.mark((function n(c){var r,i,l,u,f,p=arguments;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:0,!(Fe.length<1)){n.next=4;break}return O.a.error("\ucd5c\uc18c 2\uac1c\uc758 \ucef7\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694."),n.abrupt("return");case 4:if(i={characterList:Z,background:ee,script:le,name:de,bgm:be,sound:_e},l=[].concat(Object(ae.a)(Fe.slice(0,Ie)),[i],Object(ae.a)(Fe.slice(Ie+1,31))),!window.confirm("\uac8c\uc784 \uc81c\uc791\uc744 \uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){n.next=25;break}return u={gameId:s,sceneId:o,cutList:l,isTmp:r,isEnding:We},n.next=10,m.a.post("/api/scene/save",u);case 10:if(!(f=n.sent).data.success){n.next=16;break}t({type:"detach_character"}),O.a.loading("\uac8c\uc784 \uc5c5\ub85c\ub4dc \uc911..",1).then((function(){r?O.a.success("\uc5c5\ub85c\ub4dc \uc131\uacf5."):O.a.success("\uac8c\uc784 \uc81c\uc791\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",1)})).then((function(){!r&&ke?a.replace("/game/".concat(s)):r||(Qt.emit("final_submit",{prevSceneId:f.data.scene.prevSceneId,sceneId:f.data.scene._id,title:f.data.scene.title,userId:d.userData._id.toString()}),a.replace({pathname:"/gameplay",state:{sceneId:f.data.scene._id,gameId:s}}))})),n.next=23;break;case 16:if("expired"!==f.data.msg){n.next=22;break}return O.a.error("\uc81c\uc791 \uc720\ud6a8\uae30\uac04\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4..",1),e.history.replace({pathname:"/gameplay",state:{sceneId:f.data.prevSceneId,gameId:s}}),n.abrupt("return");case 22:O.a.error("DB\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4.");case 23:n.next=26;break;case 25:O.a.error("\uc81c\ucd9c \ucde8\uc18c");case 26:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),lt=Object(n.useState)([]),st=Object(v.a)(lt,2),ot=st[0],ut=st[1],mt=Object(n.useState)([]),dt=Object(v.a)(mt,2),ft=dt[0],pt=dt[1];Object(n.useEffect)((function(){m.a.post("/api/game/getgamedetail",{gameId:s}).then((function(e){e.data.success?ut(e.data.gameDetail):alert("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[R,s]),Object(n.useEffect)((function(){ot.character&&pt(c.a.createElement("div",{className:"scenemake__toggleBar"},c.a.createElement("div",{ref:Ve},c.a.createElement(tt,{gameDetail:ot,setMakeModalState:D,setCharacterList:K,setName:fe})),c.a.createElement("div",{ref:qe,style:{display:"none"}},c.a.createElement(Je,{gameDetail:ot,setBackgroundImg:te,setMakeModalState:D})),c.a.createElement("div",{ref:Ye,style:{display:"none"}},c.a.createElement(nt,{gameDetail:ot,bgm_audio:Ft,setBgmFile:ve,setMakeModalState:D})),c.a.createElement("div",{ref:Qe,style:{display:"none"}},c.a.createElement(rt,{gameDetail:ot,sound_audio:Rt,setSoundFile:ye,setMakeModalState:D}))))}),[ot,Z,R]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){E(window.innerWidth),N(window.innerHeight)})),x(.5625*b>k?{width:"".concat(.8*k/.5625,"px"),height:"".concat(.8*k,"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(.8*b,"px"),height:"".concat(.8*b*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")})}),[window.innerWidth,window.innerHeight]);return c.a.createElement("div",{className:"scene__container"},c.a.createElement("div",null,c.a.createElement("div",{className:"backgroundImg_container",id:"backgroundImg_container",style:I},c.a.createElement("img",{className:"backgroundImg",src:"".concat(ee),alt:"img"}),c.a.createElement(xt,{GameCharacterList:ot.character,CharacterList:Z,setCharacterList:K,onRemove_character:function(e){K((function(t){return[].concat(Object(ae.a)(t.slice(0,e)),Object(ae.a)(t.slice(e+1,4)))}))}}),V&&c.a.createElement("div",{className:"sceneMake__text_container"},c.a.createElement("input",{onChange:function(e){fe(e.currentTarget.value)},value:de,className:"sceneMake__name_block"}),c.a.createElement("hr",{className:"sceneMake__text_line"}),c.a.createElement("textarea",{onChange:function(e){oe(e.currentTarget.value)},value:le,className:"sceneMake__text_block",ref:function(e){return e&&e.focus()}})))),c.a.createElement(Lt,{setName:fe,setCharacterList:K,CharacterList:Z,GameCharacterList:ot.character}),c.a.createElement(Bt,{CutList:Fe,CutNumber:Ie,displayCut:et,setCutNumber:xe,Hover:Be,setHover:Te,EmptyCutList:He,saveCut:$e}),c.a.createElement("div",{className:"sceneMake__sound_container"},be.name?c.a.createElement("div",{className:"scene__SoundBox_container",onClick:function(){Ft.paused?Ft.play():Ft.pause(),z((function(e){return e+1}))}},be.name&&Ft.paused&&c.a.createElement(Tt.a,{style:{fontSize:"20px"}}),be.name&&!Ft.paused&&c.a.createElement(Dt.a,{style:{fontSize:"20px"}}),be.name):c.a.createElement("div",null,"[icon] BGM"),_e.name?c.a.createElement("div",{className:"scene__SoundBox_container",onClick:function(){Rt.paused?Rt.play():Rt.pause(),z((function(e){return e+1}))}},be.name&&Rt.paused&&c.a.createElement(Tt.a,{style:{fontSize:"20px"}}),be.name&&!Rt.paused&&c.a.createElement(Dt.a,{style:{fontSize:"20px"}}),_e.name):c.a.createElement("div",null,"[icon] Sound")),c.a.createElement("div",{className:"sceneMake__btn_container"},c.a.createElement("div",{type:"primary",style:{fontSize:"15px"},onClick:function(){m.a.delete("/api/scene",{data:{gameId:s,sceneId:o,isFirst:ke,userId:d.userData._id}}).then((function(t){t.data.success&&(console.log(ke),0==ke?(Qt.emit("empty_num_increase",{scene_id:t.data.prevSceneId,user_id:d.userData._id}),e.history.push("/game/".concat(s))):e.history.push("/"))}))}},"\uc791\uc131 \ucde8\uc18c"),c.a.createElement("div",{type:"primary",style:{fontSize:"15px"},onClick:function(e){ct(e,1)}},"\uc784\uc2dc\uc800\uc7a5"),c.a.createElement("div",{type:"primary",style:{fontSize:"15px"},onClick:function(){Fe.length-1<=Ie?O.a.info("\ub9c8\uc9c0\ub9c9 \ucef7 \uc785\ub2c8\ub2e4."):(O.a.success("".concat(Ie+1,"\ubc88\uc9f8 \ucef7\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),Re((function(e){return[].concat(Object(ae.a)(e.slice(0,Ie)),Object(ae.a)(e.slice(Ie+1,31)))})),Ue((function(e){return[0].concat(Object(ae.a)(e))})),et(Ie+1))}},"\ucef7 \uc0ad\uc81c"),Ie<29&&c.a.createElement("div",{type:"primary",style:{fontSize:"15px"},onClick:at},"\ub2e4\uc74c \ucef7"),ke?c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:function(){G(!0)}},"\uc5c5\ub85c\ub4dc"):c.a.createElement(c.a.Fragment,null,c.a.createElement(A.a,{type:"primary",style:{fontSize:"15px"},onClick:ct},"\uc5c5\ub85c\ub4dc"),c.a.createElement(it.a,{checkedChildren:"ENDING",unCheckedChildren:"CONTINUE",onChange:function(){Xe((function(e){return!e}))},onClick:function(){We||ce.a.warning({title:c.a.createElement("b",null,"\uc8fc\uc758!"),content:c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("h3",null,"ENDING \uccb4\ud06c \uc2dc, \uc774 \uac8c\uc784\uc758 \uc5d4\ub529\uc73c\ub85c \uc5c5\ub85c\ub4dc \ub429\ub2c8\ub2e4."),c.a.createElement("h3",null,"\ub530\ub77c\uc11c \uc774 \uc52c\uc5d0 \uc5f0\uacb0\ub418\ub294 \uc52c\uc744 \ub354\uc774\uc0c1 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),centered:!0,width:650,onOk:function(){}})}})),c.a.createElement(kt,{gameId:s,visible:U,setUploadModalState:G,onSubmit_saveScene:ct})),c.a.createElement("div",{className:"scenemake__sideBar_container"},0!==ft&&ft,c.a.createElement("div",{className:"scenemake__toggleButton_container"},c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===Ve.current.style.display?Ze(Ve):Ke()}},"char"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===qe.current.style.display?Ze(qe):Ke()}},"back"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){q(!V)}},"script"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===Ye.current.style.display?Ze(Ye):Ke()}},"bgm"),c.a.createElement("div",{className:"scenemake__btn_sidebar",onClick:function(){"none"===Qe.current.style.display?Ze(Qe):Ke()}},"sound"))),0!==T&&c.a.createElement(_t,{gameId:s,visible:Boolean(T),setTag:D,tag:T,setReload:z}))},Pt=a(1123),Ht=(a(250),new Audio),Ut=new Audio,Gt=function(e){var t=Object(p.b)(),a=Object(l.f)(),r=Object(l.g)(),i=r.state,s=i.gameId,o=i.sceneId;void 0===r.state&&window.history.back();var u,d=Object(p.c)((function(e){return e.user})),f=Object(n.useState)(window.innerWidth),g=Object(v.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)(window.innerHeight),j=Object(v.a)(h,2),k=j[0],N=j[1],w=Object(n.useState)({}),I=Object(v.a)(w,2),x=(I[0],I[1]),C=Object(n.useState)(0),B=Object(v.a)(C,2),T=B[0],D=B[1],M=Object(n.useState)(1),F=Object(v.a)(M,2),R=F[0],z=F[1],P=Object(n.useState)(!1),H=Object(v.a)(P,2),U=H[0],G=H[1],A=Object(n.useState)(!0),W=Object(v.a)(A,2),X=W[0],V=W[1],q=Object(n.useState)([]),Y=Object(v.a)(q,2),Q=Y[0],Z=Y[1],K=Object(n.useState)("http://localhost:5000/uploads/defaultBackground.png"),J=Object(v.a)(K,2),$=J[0],ee=J[1],te=Object(n.useState)(""),ne=Object(v.a)(te,2),ce=ne[0],ie=ne[1],le=Object(n.useState)(""),oe=Object(v.a)(le,2),ue=oe[0],me=oe[1],de=Object(n.useState)({name:"",music:""}),fe=Object(v.a)(de,2),pe=fe[0],ge=fe[1],be=Object(n.useState)({name:"",music:""}),Ee=Object(v.a)(be,2),he=Ee[0],_e=Ee[1],ye=Object(n.useState)(!1),Oe=Object(v.a)(ye,2),je=Oe[0],ke=Oe[1],Ne=Object(n.useState)(0),Se=Object(v.a)(Ne,2),we=Se[0],Ie=Se[1],xe=Object(n.useState)(!1),Ce=Object(v.a)(xe,2),Le=Ce[0],Be=Ce[1],Te=Object(n.useState)([]),De=Object(v.a)(Te,2),Me=De[0],Fe=De[1],Re=Object(n.useState)(Array.from({length:30},(function(){return 0}))),ze=Object(v.a)(Re,2),Pe=ze[0],He=ze[1];Object(n.useEffect)((function(){t(L(!1))}),[]),Object(n.useEffect)((function(){d.userData&&(Qt.emit("leave room",{room:d.userData._id.toString()}),Qt.emit("room",{room:d.userData._id.toString()})),Qt.off("timeout_making"),Qt.on("timeout_making",(function(t){e.history.replace("/")}))}),[d]),Object(n.useEffect)((function(){Object(y.a)(_.a.mark((function a(){var n,c,r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.get("/api/game/getSceneInfo/".concat(o));case 2:if(!(n=a.sent).data.success){a.next=7;break}u=n.data.scene,a.next=9;break;case 7:return e.history.replace("/"),a.abrupt("return");case 9:u.cutList.length?(u.isFirst&&ke(!0),Fe(u.cutList),c=u.cutList[0],Z(c.characterList),ee(c.background),me(c.name),ie(c.script),Ie(u.cutList.length-1),t(se(0)),t(se(1))):u.isFirst?ke(!0):(r={sceneId:u.prevSceneId},m.a.post("/api/scene/scenedetail",r).then((function(e){if(e.data.success){var a=e.data.lastCut;Z(a.characterList),ee(a.background),me(a.name),t(se(0)),t(se(1))}else O.a.error("\uc774\uc804 Scene\uc758 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})));case 10:case"end":return a.stop()}}),a)})))()}),[]);var Ue=Object(n.useRef)(),Ge=Object(n.useRef)(),Ae=Object(n.useRef)(),We=Object(n.useRef)(),Xe=Object(n.useRef)(),Ve=Object(n.useRef)(),qe=function(e){Ye(),e.current.style.display="block"},Ye=function(){Ue.current.style.display="none",Ge.current.style.display="none",Ae.current.style.display="none",We.current.style.display="none"},Qe=function(){V(!X)};re("Enter",(function(e){Ve.current===document.activeElement?Xe.current.focus():Xe.current===document.activeElement&&$e(e)}));var Ze=function(){var e={characterList:Q,background:$,script:ce,name:ue,bgm:pe,sound:he};ge({name:"",music:""}),_e({name:"",music:""}),Fe((function(t){return[].concat(Object(ae.a)(t.slice(0,we)),[e],Object(ae.a)(t.slice(we+1,31)))})),Me.length===we&&He((function(e){return Object(ae.a)(e.slice(0,Pe.length-1))}))},Ke=function(e){Z(Me[e].characterList),ee(Me[e].background),ie(Me[e].script),me(Me[e].name),ge(Me[e].bgm),_e(Me[e].sound),Me[e].bgm.music?(Ht.src=Me[e].bgm.music,Ht.play()):Ht.pause(),Me[e].sound.music?(Ut.src=Me[e].sound.music,Ut.play()):Ut.pause()},$e=function(e){e.preventDefault(),we>=29?O.a.error("\ub354\uc774\uc0c1 Cut\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):(24===we&&O.a.warning("\uc0dd\uc131 \uac00\ub2a5\ud55c Cut\uc774 5\uac1c \ub0a8\uc558\uc2b5\ub2c8\ub2e4."),Ze(),we<Me.length-1?Ke(we+1):ie(""),Ie((function(e){return e+1})),Xe.current.focus())},et=function(){var n=Object(y.a)(_.a.mark((function n(c){var r,i,l,u,f,p=arguments;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:0,!(Me.length<1)){n.next=4;break}return O.a.error("\ucd5c\uc18c 2\uac1c\uc758 \ucef7\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694."),n.abrupt("return");case 4:if(i={characterList:Q,background:$,script:ce,name:ue,bgm:pe,sound:he},l=[].concat(Object(ae.a)(Me.slice(0,we)),[i],Object(ae.a)(Me.slice(we+1,31))),!window.confirm("\uac8c\uc784 \uc81c\uc791\uc744 \uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){n.next=25;break}return u={gameId:s,sceneId:o,cutList:l,isTmp:r},n.next=10,m.a.post("/api/scene/save",u);case 10:if(!(f=n.sent).data.success){n.next=16;break}t({type:"detach_character"}),O.a.loading("\uac8c\uc784 \uc5c5\ub85c\ub4dc \uc911..",1).then((function(){r?O.a.success("\uc5c5\ub85c\ub4dc \uc131\uacf5."):O.a.success("\uac8c\uc784 \uc81c\uc791\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",1)})).then((function(){!r&&je?a.replace("/game/".concat(s)):r||(Qt.emit("final_submit",{prevSceneId:f.data.scene.prevSceneId,sceneId:f.data.scene._id,title:f.data.scene.title,userId:d.userData._id.toString()}),a.replace({pathname:"/gameplay",state:{sceneId:f.data.scene._id,gameId:s}}))})),n.next=23;break;case 16:if("expired"!==f.data.msg){n.next=22;break}return O.a.error("\uc81c\uc791 \uc720\ud6a8\uae30\uac04\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4..",1),e.history.replace({pathname:"/gameplay",state:{sceneId:f.data.prevSceneId,gameId:s}}),n.abrupt("return");case 22:O.a.error("DB\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4.");case 23:n.next=26;break;case 25:O.a.error("\uc81c\ucd9c \ucde8\uc18c");case 26:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),at=Object(n.useState)([]),ct=Object(v.a)(at,2),it=ct[0],lt=ct[1],st=Object(n.useState)([]),ot=Object(v.a)(st,2),ut=ot[0],mt=ot[1];Object(n.useEffect)((function(){m.a.post("/api/game/getgamedetail",{gameId:s}).then((function(e){e.data.success?lt(e.data.gameDetail):alert("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[R,s]),Object(n.useEffect)((function(){if(it.character){var e=c.a.createElement("div",{className:"sideBar"},c.a.createElement("div",{ref:Ue},c.a.createElement(Lt,{setName:me,setCharacterList:Z,CharacterList:Q,GameCharacterList:it.character}),c.a.createElement(tt,{gameDetail:it,setMakeModalState:D,setCharacterList:Z,setName:me})),c.a.createElement("div",{ref:Ge,style:{display:"none"}},c.a.createElement(Je,{gameDetail:it,setBackgroundImg:ee,setMakeModalState:D})),c.a.createElement("div",{ref:Ae,style:{display:"none"}},c.a.createElement(nt,{gameDetail:it,bgm_audio:Ht,setBgmFile:ge,setMakeModalState:D})),c.a.createElement("div",{ref:We,style:{display:"none"}},c.a.createElement(rt,{gameDetail:it,sound_audio:Ut,setSoundFile:_e,setMakeModalState:D})));mt(e)}}),[it,Q,R]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){E(window.innerWidth),N(window.innerHeight)})),x(.5625*b>k?{width:"".concat(.8*k/.5625,"px"),height:"".concat(.8*k,"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(.8*b,"px"),height:"".concat(.8*b*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")})}),[window.innerWidth,window.innerHeight]);return c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"box title"},c.a.createElement("span",null,"[",null===it||void 0===it?void 0:it.title,"]"),c.a.createElement("div",{className:"box title-btn"},"\uc0c1\uc138\uc815\ubcf4")),c.a.createElement(Bt,{CutList:Me,CutNumber:we,displayCut:Ke,setCutNumber:Ie,Hover:Le,setHover:Be,EmptyCutList:Pe,saveCut:Ze}),c.a.createElement("div",{className:"scene"},c.a.createElement("div",{className:"scene left-arrow",onClick:function(){0!==we&&(Ze(),Ke(we-1),Ie(we-1))}},c.a.createElement(S,{src:"arrow_1",width:"50",height:"50",color:"#F5F5F5"})),c.a.createElement("div",{className:"backgroundImg",id:"backgroundImg_container",style:{overflow:"hidden"}},c.a.createElement("img",{className:"backgroundImg",src:"".concat($),alt:"img"}),c.a.createElement(xt,{GameCharacterList:it.character,CharacterList:Q,setCharacterList:Z,onRemovech_aracter:function(e){Z((function(t){return[].concat(Object(ae.a)(t.slice(0,e)),Object(ae.a)(t.slice(e+1,4)))}))}}),X&&ce&&c.a.createElement(ve,{cut_name:ue||"\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",cut_script:ce||"\ub300\uc0ac\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",setIsTyping:null,isTyping:null,theme:null}),c.a.createElement("div",{className:"scene__sound_container"},pe.name?c.a.createElement("div",{onClick:function(){Ht.paused?Ht.play():Ht.pause(),z((function(e){return e+1}))}},pe.name&&Ht.paused&&c.a.createElement(Tt.a,{style:{fontSize:"20px"}}),pe.name&&!Ht.paused&&c.a.createElement(Dt.a,{style:{fontSize:"20px"}}),pe.name):c.a.createElement("div",null,c.a.createElement(Pt.a,{style:{fontSize:"20px"}}),"BGM"),he.name?c.a.createElement("div",{onClick:function(){Ut.paused?Ut.play():Ut.pause(),z((function(e){return e+1}))}},pe.name&&Ut.paused&&c.a.createElement(Tt.a,{style:{fontSize:"20px"}}),pe.name&&!Ut.paused&&c.a.createElement(Dt.a,{style:{fontSize:"20px"}}),he.name):c.a.createElement("div",null,c.a.createElement(Pt.a,{style:{fontSize:"20px"}}),"Sound"))),c.a.createElement("div",{className:"scene right-arrow",onClick:we<29&&$e},c.a.createElement(S,{src:"arrow_1",width:"50",height:"50",color:we<29?"#F5F5F5":"black"}))),c.a.createElement("div",{className:"scene__btn_top"},c.a.createElement("div",{className:"scene_btn",onClick:function(){D(1)}},"\uc5d0\uc14b \ucd94\uac00"),c.a.createElement("div",{className:"scene_btn",onClick:function(e){et(e,1)}},"\uc784\uc2dc \uc800\uc7a5"),je?c.a.createElement("div",{className:"scene_btn scene_btn_blue",onClick:function(){G(!0)}},"\uc644\ub8cc"):c.a.createElement("div",{className:"scene_btn scene_btn_blue",onClick:et},"\uc644\ub8cc")),c.a.createElement("div",{className:" btn_side"},c.a.createElement("div",{className:"scene_side_btn",onClick:function(){"none"===Ue.current.style.display&&qe(Ue)}},"\uce90\ub9ad\ud130"),c.a.createElement("div",{className:"scene_side_btn",onClick:function(){"none"===Ge.current.style.display&&qe(Ge)}},"\ubc30\uacbd"),c.a.createElement("div",{className:"scene_side_btn",onClick:function(){"none"===Ae.current.style.display&&qe(Ae)}},"\ubc30\uacbd\uc74c"),c.a.createElement("div",{className:"scene_side_btn",onClick:function(){"none"===We.current.style.display&&qe(We)}},"\ud6a8\uacfc\uc74c")),0!==ut&&ut,c.a.createElement("div",{className:"textbox_name"},c.a.createElement("div",{className:"textbox__name_block_btn"},c.a.createElement(S,{src:"arrow_1",width:"15",height:"25",color:"#FFFFFF"}))),c.a.createElement("input",{onChange:function(e){me(e.currentTarget.value)},placeholder:"\uc774\ub984",value:ue,ref:Ve,className:"textbox_name"}),c.a.createElement("div",{className:"textbox_bottom"},c.a.createElement("div",{className:"enter",onClick:$e},"Enter",c.a.createElement("br",null),we+1,"/30"),c.a.createElement("textarea",{onChange:function(e){ie(e.currentTarget.value)},value:ce,placeholder:"\ub300\uc0ac\uac00 \uc5c6\uc73c\uba74 \uc2a4\ud06c\ub9bd\ud2b8 \ucc3d\uc774 \ud45c\uc2dc\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",className:"textbox_script",ref:Xe})),c.a.createElement("div",{className:"options"},c.a.createElement("div",{className:"scene_btn",onClick:function(){if(0!==we){if(Me.length-1<=we)return Ke(we-1),void Ie(we-1);O.a.success("".concat(we+1,"\ubc88\uc9f8 \ucef7\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),Fe((function(e){return[].concat(Object(ae.a)(e.slice(0,we)),Object(ae.a)(e.slice(we+1,31)))})),He((function(e){return[0].concat(Object(ae.a)(e))})),Ke(we+1)}else O.a.info("\uccab\ubc88\uc9f8 \ucef7 \uc785\ub2c8\ub2e4.")}},"\ucef7 \uc0ad\uc81c"),c.a.createElement("div",{className:"scene_btn",onClick:Qe},"On/Off"),c.a.createElement("div",{className:"scene_btn",onClick:Qe},"Preview"),c.a.createElement("div",{className:"scene_btn",onClick:Qe},"\ubc30\uacbd\uc74c \uc74c\uc18c\uac70"),c.a.createElement("div",{className:"scene_btn",onClick:Qe},"\ud6a8\uacfc\uc74c \uc74c\uc18c\uac70"),c.a.createElement("div",{className:"scene_btn",onClick:Qe},"\ud14c\ub9c8 \uc120\ud0dd(\uac1c\ubc1c\uc790)")),c.a.createElement(kt,{gameId:s,visible:U,setUploadModalState:G,onSubmit_saveScene:et,defaultTitle:it.title,defaultDescription:it.description}),0!==T&&c.a.createElement(_t,{gameId:s,visible:Boolean(T),setTag:D,tag:T,setReload:z}))},At=a(1114);var Wt=Object(l.h)((function(e){var t,a=Object(p.c)((function(e){return e.user}));return a.userData&&!a.userData.isAuth?c.a.createElement(At.a,{mode:e.mode},c.a.createElement(At.a.Item,{key:"login"},c.a.createElement(x.b,{to:"/login"},"\ub85c\uadf8\uc778")),c.a.createElement(At.a.Item,{key:"register"},c.a.createElement(x.b,{to:"/register"},"\ud68c\uc6d0\uac00\uc785"))):c.a.createElement(At.a,{mode:e.mode},c.a.createElement(At.a.Item,{key:"profile"},(null===a||void 0===a||null===(t=a.userData)||void 0===t?void 0:t._id)?c.a.createElement(x.b,{to:"/profile/".concat(a.userData._id)},"\ud504\ub85c\ud544"):"\ud504\ub85c\ud544"),c.a.createElement(At.a.Item,{key:"logout"},c.a.createElement(x.b,{to:"/",onClick:function(){m.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))}},"\ub85c\uadf8\uc544\uc6c3")))})),Xt=a(1116);a(1091);var Vt=Object(n.memo)((function(){var e=Object(n.useState)(!1),t=Object(v.a)(e,2),a=t[0],r=t[1],i={};return i=Object(p.c)((function(e){return e.controlpage.navbarOn}))?{position:"fixed",zIndex:5,width:"100%"}:{position:"fixed",zIndex:5,width:"100%",opacity:0,animation:"0.8s ease-out 0s 1 hide"},c.a.createElement("nav",{className:"menu",style:i},c.a.createElement("div",{className:"menu__logo"},c.a.createElement(x.b,{to:"/"},"NEVER ENDING")),c.a.createElement("div",{className:"menu__container"},c.a.createElement("div",{className:"menu_rigth"},c.a.createElement(Wt,{mode:"horizontal"})),c.a.createElement(A.a,{className:"menu__mobile-button",type:"primary",onClick:function(){r(!0)}},c.a.createElement(z.a,{type:"align-right"})),c.a.createElement(Xt.a,{title:"NEVER ENDING",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){r(!1)},visible:a},c.a.createElement(Wt,{mode:"inline"}))))}));a(1092);var qt=function(){return c.a.createElement("div",{className:"footer_container"},c.a.createElement("p",null,"Mutsad \ud654\uc774\ud305 ",c.a.createElement(z.a,{type:"smile"})))},Yt=(a(1093),a(145)),Qt=o()(Yt.SOCKET,{transports:["websocket"]});window.onpopstate=function(){window.location.reload()};var Zt=function(){return c.a.createElement(n.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(Vt,null),c.a.createElement("div",{className:"app"},c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:g(T,null)}),c.a.createElement(l.a,{exact:!0,path:"/login",component:g(H,!1)}),c.a.createElement(l.a,{exact:!0,path:"/register",component:g(U,!1)}),c.a.createElement(l.a,{exact:!0,path:"/profile/:userId",component:g(G,!0)}),c.a.createElement(l.a,{exact:!0,path:"/game/upload",component:g(ee,!0)}),c.a.createElement(l.a,{path:"/game/:gameId",component:g(q,null)}),c.a.createElement(l.a,{path:"/gameplay",component:b(g(Ze,null))}),c.a.createElement(l.a,{exact:!0,path:"/scene/make2",component:b(g(zt,!0))}),c.a.createElement(l.a,{exact:!0,path:"/scene/make",component:b(g(Gt,!0))}))),c.a.createElement(qt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Kt=a(134),Jt={navbarOn:!0},$t={loadingType:0,isPause:!1},ea={description:"",image:"",image_array:[],name:"",_id:"",index:-1},ta={index:-1},aa={movingTarget:-1},na=Object(Kt.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(te.a)({},e,{register:t.payload});case"login_user":return Object(te.a)({},e,{loginSucces:t.payload});case"auth_user":return Object(te.a)({},e,{userData:t.payload});case"logout_user":return Object(te.a)({},e);default:return e}},controlpage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"navbar_control":return Object(te.a)({},e,{navbarOn:t.payload});default:return e}},gameplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gameLoading_gamePlay":return Object(te.a)({},e,{loadingType:t.payload});case"pause_gamePlay":return Object(te.a)({},e,{isPause:t.payload});default:return e}},sync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_empty_num":return Object(te.a)({},e,{emptyNum:t.payload});case"SAVE_PREV_SCENE":return Object(te.a)({},e,{prevSceneId:t.payload});default:return e}},character:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{characterSelected:ea},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_character":return Object(te.a)({},e,{characterSelected:t.payload});case"detach_character":return Object(te.a)({},e,{characterSelected:ea});default:return e}},characterDisplayed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{characterDisplayed:ta},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_displayed":return Object(te.a)({},e,{characterDisplayed:t.payload});default:return e}},movingTarget:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_movingtarget":case"detach_movingtarget":return Object(te.a)({},e,{movingTarget:t.payload});default:return e}}}),ca=a(533),ra=a.n(ca),ia=a(534),la=Object(Kt.a)(ra.a,ia.a)(Kt.d);i.a.render(c.a.createElement(p.a,{store:la(na,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},c.a.createElement(x.a,null,c.a.createElement(Zt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},145:function(e,t,a){e.exports=a(949)},181:function(e,t,a){},508:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},512:function(e,t,a){},540:function(e,t,a){e.exports=a(1097)},769:function(e,t,a){},824:function(e,t,a){},825:function(e,t,a){},827:function(e,t,a){},829:function(e,t,a){"use strict";a.r(t),a.d(t,"TitleModalForm",(function(){return s}));var n=a(0),c=a.n(n),r=a(1098),i=a(257),l=a(536),s=(a(830),i.a.create({name:"modal_form"})((function(e){var t=e.visible,a=e.onCancel,n=e.onCreate,s=e.form.getFieldDecorator;return c.a.createElement(r.a,{visible:t,title:"\uc5b4\ub5a4 \uc774\uc57c\uae30\ub97c \ub9cc\ub4dc\uc2e4\uac74\uac00\uc694?",okText:"\uc81c\uc791",cancelText:"\ucde8\uc18c",onCancel:a,onOk:n,c:!0,closable:!1},c.a.createElement(i.a,{layout:"vertical"},c.a.createElement(i.a.Item,{label:"\uc81c\ubaa9"},s("title",{rules:[{required:!0,message:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!"}]})(c.a.createElement(l.a,null))),c.a.createElement(i.a.Item,{label:"\uac8c\uc784 \uc124\uba85"},s("description")(c.a.createElement(l.a,{type:"textarea"})))))})))},830:function(e,t,a){},948:function(e,t,a){},949:function(e,t){e.exports={STORAGE:"https://neverending.s3.ap-northeast-2.amazonaws.com/original",SERVER:"http://15.164.48.192:80",CLIENT:"http://13.209.68.246:80",SOCKET:"wss://13.124.130.199:5001"}}},[[540,1,2]]]);
//# sourceMappingURL=main.1272604c.chunk.js.map