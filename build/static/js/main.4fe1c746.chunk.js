(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1009:function(e,t,a){},1060:function(e,t,a){},1061:function(e,t,a){},1063:function(e,t,a){"use strict";a.r(t),a.d(t,"TitleModalForm",(function(){return l}));var n=a(0),c=a.n(n),r=a(1532),i=a(345),l=(a(1064),i.a.create({name:"modal_form"})((function(e){var t=e.visible,a=e.onCancel,n=e.onCreate,l=e.setGameTitle,s=e.setGameDescription;return c.a.createElement(r.a,{visible:t,title:"\uc5b4\ub5a4 \uc774\uc57c\uae30\ub97c \ub9cc\ub4dc\uc2e4\uac74\uac00\uc694?",okText:"\uc81c\uc791",cancelText:"\ucde8\uc18c",onCancel:a,onOk:n,closable:!1,bodyStyle:{height:"425px",fontFamily:"Noto Sans KR",fontSize:"18px",fontWeight:"300"}},c.a.createElement(i.a,{layout:"vertical"},c.a.createElement(i.a.Item,{label:"\uc81c\ubaa9",name:"title",rules:[{required:!0,message:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!"},{max:30,message:"\uc81c\ubaa9\uc740 30\uc790 \uc774\ub0b4\uc5ec\uc57c \ud569\ub2c8\ub2e4."}]},c.a.createElement("textarea",{className:"title_modalform_title",maxLength:31,onChange:function(e){l(e.currentTarget.value.substr(0,30))}})),c.a.createElement(i.a.Item,{label:"\uac8c\uc784 \uc124\uba85",name:"description",rules:[{required:!0,message:"\uac8c\uc784 \uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!"},{max:1e3,message:"\uc124\uba85\uc740 1000\uc790 \uc774\ub0b4\uc5ec\uc57c \ud569\ub2c8\ub2e4."}]},c.a.createElement("textarea",{maxLength:1001,onChange:function(e){s(e.currentTarget.value)},className:"title_modalform_description"}))))})))},1064:function(e,t,a){},1187:function(e,t,a){},1188:function(e,t,a){},1189:function(e,t){e.exports={STORAGE:"https://iovar.s3.ap-northeast-2.amazonaws.com",SERVER:"http://54.180.24.213:80",CLIENT:"http://13.209.68.246:80",SOCKET:"https://www.iovar.co.kr",KAKAO_KEY:"31ba9e7c5c25cdc29ae62436da6f8733"}},1290:function(e,t,a){},1291:function(e,t,a){},1302:function(e,t){},1304:function(e,t){},1314:function(e,t){},1316:function(e,t){},1342:function(e,t){},1344:function(e,t){},1345:function(e,t){},1350:function(e,t){},1352:function(e,t){},1371:function(e,t){},1383:function(e,t){},1386:function(e,t){},1412:function(e,t){},1414:function(e,t){},1439:function(e,t){},1441:function(e,t){},1492:function(e,t,a){},1493:function(e,t,a){},1494:function(e,t,a){},1495:function(e,t,a){},1496:function(e,t,a){},1498:function(e,t,a){},1500:function(e,t,a){},1501:function(e,t,a){},1502:function(e,t,a){},1503:function(e,t,a){},1504:function(e,t,a){},1505:function(e,t,a){},1506:function(e,t,a){},1509:function(e,t,a){},1510:function(e,t,a){},1511:function(e,t,a){},1512:function(e,t,a){},1513:function(e,t,a){},1514:function(e,t,a){},1515:function(e,t,a){},1516:function(e,t,a){},1517:function(e,t,a){},1518:function(e,t,a){},1519:function(e,t,a){},1525:function(e,t,a){},1526:function(e,t,a){},1527:function(e,t,a){},1531:function(e,t,a){"use strict";a.r(t);a(462),a(473),a(474),a(475),a(476),a(477),a(478),a(479),a(480),a(481),a(482),a(483),a(484),a(485),a(486),a(775),a(776),a(777),a(778),a(779),a(780),a(781),a(489),a(783),a(784),a(273),a(785),a(786),a(787),a(788),a(789),a(790),a(791),a(792),a(793),a(794),a(795),a(796),a(797),a(798),a(800),a(801),a(803),a(804),a(498),a(275),a(805),a(806),a(807),a(808),a(809),a(810),a(811),a(812),a(813),a(814),a(815),a(816),a(817),a(818),a(819),a(820),a(503),a(821),a(822),a(823),a(824),a(825),a(826),a(827),a(828),a(829),a(831),a(832),a(834),a(835),a(836),a(837),a(838),a(839),a(840),a(841),a(842),a(843),a(844),a(845),a(846),a(847),a(848),a(849),a(850),a(851),a(852),a(853),a(362),a(855),a(856),a(858),a(859),a(860),a(862),a(863),a(864),a(865),a(866),a(867),a(868),a(869),a(870),a(871),a(872),a(515),a(873),a(874),a(364),a(875),a(876),a(877),a(878),a(283),a(879),a(880),a(881),a(882),a(883),a(884),a(885),a(886),a(887),a(888),a(889),a(890),a(891),a(892),a(893),a(894),a(895),a(896),a(897),a(898),a(899),a(900),a(901),a(902),a(903),a(904),a(906),a(907),a(908),a(909),a(910),a(911),a(912),a(913),a(914),a(915),a(916),a(917),a(919),a(920),a(921),a(922),a(923),a(924),a(925),a(926),a(927),a(928),a(929),a(930),a(931),a(932),a(933),a(934),a(935),a(936),a(937),a(938),a(939),a(369),a(940),a(941),a(943),a(944),a(945),a(946),a(947),a(524),a(525),a(526),a(527),a(528),a(529),a(530),a(531),a(532),a(533),a(534),a(535),a(536),a(537),a(538),a(539),a(540),a(950),a(951),a(952),a(953),a(954),a(955),a(956),a(957),a(958),a(959),a(960),a(961),a(962),a(963),a(964),a(965),a(967),a(969),a(970),a(971),a(972),a(973),a(974),a(975),a(976),a(977),a(978),a(542),a(544),a(545),a(546),a(547),a(548),a(549),a(550),a(551),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(979),a(980),a(981),a(983),a(561),a(562),a(563),a(985),a(986),a(987),a(988),a(989),a(990),a(991),a(992),a(565),a(994),a(995),a(996),a(998),a(567),a(999),a(568);var n=a(0),c=a.n(n),r=a(18),i=a.n(r),l=(a(1009),a(40)),s=a.n(l),o=a(64),u=a(3),m=a(47),d=a(747),b=a.n(d),f=a(6),g=a.n(f);function p(e){return{type:"register_user",payload:g.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}function v(){return{type:"auth_user",payload:g.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var E=a(12),h=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],r=a[1];c||(e(),r(!0))},_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(r){var i=Object(E.c)((function(e){return e.user})),l=Object(E.b)();return Object(n.useEffect)((function(){l(v()).then((function(e){e.payload.isAuth?(a&&!e.payload.isAdmin||!1===t)&&r.history.replace("/"):t&&r.history.push("/login")}))}),[]),c.a.createElement(e,Object.assign({},r,{user:i}))}return r},y=function(e){function t(t){var a=Object(m.g)();return Object(n.useEffect)((function(){void 0===a.state&&t.history.replace("/")}),[]),a.state?c.a.createElement(e,t):c.a.createElement("div",null,"\uc798\ubabb\ub41c \uc811\uadfc\uc785\ub2c8\ub2e4\u314b\u314b")}return t},O=(a(1060),a(1061),a(1062),a(1551)),j=a(1063).TitleModalForm;function N(e){var t=e.replace,a=Object(n.useState)(!1),r=Object(u.a)(a,2),i=r[0],l=r[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),b=d[0],f=d[1],p=Object(n.useState)(""),v=Object(u.a)(p,2),h=v[0],_=v[1],y=Object(E.c)((function(e){return e.user})),N=function(){var e=Object(o.a)(s.a.mark((function e(a,n){var c,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/game/uploadgameframe",{title:a,description:n});case 2:if((c=e.sent).data.success){e.next=6;break}return alert("game Frame\uc81c\uc791 \uc2e4\ud328"),e.abrupt("return");case 6:return r={gameId:c.data.game._id,prevSceneId:null,sceneDepth:0,isFirst:1,title:""},e.next=9,g.a.post("/api/scene/create",r);case 9:if((i=e.sent).data.success){e.next=13;break}return alert("scene Frame\uc81c\uc791 \uc2e4\ud328"),e.abrupt("return");case 13:O.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 \ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){t({pathname:"/scene/make",state:{gameId:c.data.game._id,sceneId:i.data.sceneId}})}),1e3);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"button-newgame",onClick:function(){var e;(null===(e=y.userData)||void 0===e?void 0:e.isAuth)?l(!0):O.a.error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")}},"NEW \uac8c\uc784 \ub9cc\ub4e4\uae30"),c.a.createElement(j,{visible:i,onCancel:function(){return l(!1)},onCreate:function(){N(b,h)},setGameTitle:f,setGameDescription:_}))}var k=a(1547),S=a(1552),w=a(1532),x=a(345);function C(e){var t=e.isModalVisible,a=e.setIsModalVisible,r=Object(n.useState)("feedback"),i=Object(u.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)(""),m=Object(u.a)(o,2),d=m[0],b=m[1],f=Object(n.useState)(""),p=Object(u.a)(f,2),v=p[0],E=p[1],h=Object(n.useState)(""),_=Object(u.a)(h,2),y=_[0],j=_[1],N=k.a.Option,C=S.a.TextArea;return c.a.createElement("div",null,c.a.createElement(w.a,{title:"\ubb38\uc758\ud558\uae30",visible:t,onOk:function(){var e={Type:l,Email:v,PhoneNumber:y,Content:d};e.Content.length?(g.a.post("api/users/send-feedback",e).then((function(e){e.data.success?O.a.success("\uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uace0\ub9d9\uc2b5\ub2c8\ub2e4."):O.a.error("\uc804\uc1a1 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc870\uc18d\ud788 \ucc98\ub9ac\ud558\uaca0\uc2b5\ub2c8\ub2e4."),s("feedback"),b(""),E(""),j("")})),a(!1)):O.a.error("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},onCancel:function(){a(!1)}},c.a.createElement("p",null,"\uc0ac\uc774\ud2b8\uc5d0 \ub300\ud55c \ud53c\ub4dc\ubc31 \ud639\uc740 \ubb38\uc758\ub97c \ub0a8\uaca8\uc8fc\uc138\uc694. \ud544\uc694\ud558\uc2dc\ub2e4\uba74, \ub2f5\uc7a5 \ubc1b\uc73c\uc2e4 \uc5f0\ub77d\ucc98\ub97c \ub0a8\uaca8\uc8fc\uc138\uc694."),c.a.createElement("p",null),c.a.createElement("div",null,c.a.createElement(k.a,{defaultValue:"feedback",style:{width:120},onChange:function(e){s(e)}},c.a.createElement(N,{value:"feedback"},"\ud53c\ub4dc\ubc31"),c.a.createElement(N,{value:"ask"},"\ubb38\uc758"),c.a.createElement(N,{value:"copywrite"},"\uc800\uc791\uad8c \uad00\ub828"))),c.a.createElement(x.a.Item,{required:!0},c.a.createElement("p",null),c.a.createElement(C,{placeholder:"\ub0b4\uc6a9\uc744 \uc801\uc5b4\uc8fc\uc138\uc694",rows:6,value:d,onChange:function(e){b(e.currentTarget.value)}}),c.a.createElement("p",null),"\uc774\uba54\uc77c :",c.a.createElement(S.a,{placeholder:"\uc774\uba54\uc77c \uc8fc\uc18c",value:v,onChange:function(e){E(e.currentTarget.value)}}),c.a.createElement("p",null),"\uc5f0\ub77d\ucc98 :",c.a.createElement(S.a,{placeholder:"\ud734\ub300\ud3f0 \ubc88\ud638",value:y,onChange:function(e){j(e.currentTarget.value)}}))))}a(1187);function I(e){var t=e.replace,a=Object(n.useState)(0),r=Object(u.a)(a,2),i=r[0],l=r[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),m=o[0],d=o[1],b=c.a.createRef(),f=Object(n.useRef)(void 0),g=function(){void 0!==f.current&&clearTimeout(f.current)},p=function(){var e=setTimeout((function(){f.current===e&&l(i>=2?0:i+1)}),3e3);f.current=e};return Object(n.useEffect)((function(){return b.current&&(b.current.style.transition=0!=i?"all 1s ease-in-out":"all 0s",b.current.style.transform="translateX(-".concat(100*i/3,"%)")),p(),function(){g()}}),[i]),c.a.createElement("div",{className:"banner-container",ref:b,onMouseEnter:function(){return g()},onMouseLeave:function(){return p()}},c.a.createElement(L,{replace:t}),c.a.createElement(T,{isModalVisible:m,setIsModalVisible:d}),c.a.createElement(L,{replace:t}))}function L(e){var t=e.replace;return c.a.createElement("div",{className:"banner-main1"},c.a.createElement("div",{className:"banner-main1-slogan1"},"NEVER ENDING"),c.a.createElement("div",{className:"banner-main1-slogan2"},"\ud568\uaed8 \ub9cc\ub4dc\ub294 \ubb34\ud55c\ud55c \uc774\uc57c\uae30"),c.a.createElement(N,{replace:t}))}function T(e){var t=e.isModalVisible,a=e.setIsModalVisible;return c.a.createElement("div",{className:"banner-main2"},c.a.createElement("div",{className:"banner-main2-imoji"},"\ud83d\udc68\u200d\ud83d\udcbb"),c.a.createElement("div",{className:"banner-main2-slogan1"},"\ud53c\ub4dc\ubc31\uc744 \uc694\uccad\ud569\ub2c8\ub2e4!"),c.a.createElement("div",{className:"banner-main2-slogan2"},"\ub354 \uba4b\uc9c4 \uc11c\ube44\uc2a4\ub97c \uc704\ud574 \uc5ec\ub7ec\ubd84\uc758 \uc758\uacac\uc744 \ub0a8\uaca8\uc8fc\uc138\uc694."),c.a.createElement("button",{className:"banner-main2-button",onClick:function(){return a(!0)}},"\ud53c\ub4dc\ubc31 \ub0a8\uae30\uae30"),c.a.createElement(C,{isModalVisible:t,setIsModalVisible:a}))}var D={arrow_1:"M-1.73589e-06 5.2875L16.6883 22.5L-2.31124e-07 39.7125L5.13765 45L27 22.5L5.13765 -2.24574e-07L-1.73589e-06 5.2875Z",playIcon_1:"M0.497437 0.796925V17.5524L15.8567 9.17468L0.497437 0.796925Z",close_1:"M11 0C4.917 0 0 4.917 0 11C0 17.083 4.917 22 11 22C17.083 22 22 17.083 22 11C22 4.917 17.083 0 11 0ZM16.5 14.949L14.949 16.5L11 12.551L7.051 16.5L5.5 14.949L9.449 11L5.5 7.051L7.051 5.5L11 9.449L14.949 5.5L16.5 7.051L12.551 11L16.5 14.949Z",close_2:"M10 0.600006C4.47 0.600006 0 5.07001 0 10.6C0 16.13 4.47 20.6 10 20.6C15.53 20.6 20 16.13 20 10.6C20 5.07001 15.53 0.600006 10 0.600006ZM15 14.19L13.59 15.6L10 12.01L6.41 15.6L5 14.19L8.59 10.6L5 7.01001L6.41 5.60001L10 9.19001L13.59 5.60001L15 7.01001L11.41 10.6L15 14.19Z"};function B(e){var t=e.src,a=e.color,n=e.width,r=e.height;return c.a.createElement("svg",{width:n||"auto",height:r||"auto",viewBox:"0 0 27 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:D[t],fill:a}))}function M(){return c.a.createElement("svg",{height:"270px",width:"270px",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 96 96",xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("circle",{cx:"85",cy:"19.6",r:"6"}),c.a.createElement("path",{d:"M59,52.4c-0.1-0.2-0.4-0.1-0.5,0.1l-2.9,9.3c-0.1,0.4-0.5,0.8-0.9,0.8L45,63.9c-0.6,0.1-1,0.6-1,1.2v1c0,0.6,0.5,1,1,1.1    l12.2,0.4c0.8,0,1.6-0.4,2-1.1l4.4-7.6c0.1-0.2,0.1-0.5-0.1-0.7L59,52.4z"}),c.a.createElement("path",{d:"M84.1,37.8c-0.3-0.3-0.4-0.6-0.4-1l0.2-5.9c0-0.7-0.1-1.4-0.4-2l-0.2-0.5c-0.1-0.1-0.1-0.3-0.2-0.4    c-1.4-1.7-3.4-2.9-5.6-3.4l-0.8-0.2c-0.4-0.1-0.9-0.1-1.3-0.1l-8.7,0.2c-1.2,0-2.3,0.6-3.1,1.5l-5.4,6.9c-0.6,0.8-0.5,1.9,0.3,2.5    l0.1,0.1c0.6,0.4,1.4,0.4,1.9-0.2l4.9-4.8c0.4-0.4,0.9-0.5,1.4-0.4l3.3,0.7c0.3,0.1,0.4,0.4,0.3,0.7L69.5,33c0,0-4.9,6.7-8.1,11.4    c-1.7,2.5-1.5,5.7,0.4,8l3.3,4l4.9,6.4c0.5,0.6,0.6,1.4,0.4,2.2l-2.9,10.7c-0.3,1,0.4,1.9,1.5,2l0.6,0c0.7,0,1.3-0.3,1.5-0.9    l5.8-12.5c0.5-1.1,0.5-2.4-0.1-3.4l-6.2-11.7c-0.5-0.9-0.4-2,0.3-2.8l4.9-6.2l1.1-0.4c0.9-0.3,1.6-0.9,2.1-1.6v1.1    c0,0.8,0.4,1.6,1,2l7.1,5c0.7,0.5,1.6,0.5,2.3,0c1.1-0.9,1.1-2.6,0.1-3.5L84.1,37.8z"}),c.a.createElement("circle",{cx:"44.2",cy:"19.8",r:"6.3"}),c.a.createElement("path",{d:"M45,51.2l1-1.6c0.1-0.2,0.1-0.4-0.1-0.5l-2.4-1.4c-0.2-0.1-0.4,0-0.5,0.1l-0.9,1.4c-0.1,0.2-0.1,0.4,0.1,0.5l2.3,1.5    C44.7,51.4,44.9,51.4,45,51.2z"}),c.a.createElement("path",{d:"M47.8,41.1l2.1,1.7c0.2,0.1,0.4,0.1,0.6-0.1l3.1-4.9c0.1-0.2,0.1-0.4-0.1-0.5l-2.3-1.5c-0.2-0.1-0.4-0.1-0.5,0.1l-3,4.7    C47.6,40.8,47.6,41,47.8,41.1z"}),c.a.createElement("path",{d:"M28.6,53.7c-0.2-0.2-0.6-0.2-0.7,0.1l-3.5,6.5c-0.2,0.3-0.1,0.7,0.2,0.9l2.5,1.9c0.3,0.3,0.5,0.7,0.4,1.1l-2.9,10.5    c-0.3,1,0.5,2,1.5,2.1l0.7,0c0.7,0,1.3-0.4,1.6-1l5.8-12.4c0.7-1.5,0.4-3.3-0.7-4.5L28.6,53.7z"}),c.a.createElement("path",{d:"M48.8,47.8c1.2-0.9,1.2-2.7,0.1-3.6L43.3,39c-0.3-0.3-0.4-0.6-0.4-1l0.2-6.2c0-0.7-0.1-1.5-0.4-2.1L42.5,29    c-0.1-0.1-0.1-0.3-0.2-0.4c-1.5-1.8-3.6-3.1-5.9-3.6l-0.8-0.2c-0.5-0.1-0.9-0.1-1.4-0.1L25,25c-1.3,0-2.5,0.6-3.2,1.6l-5.6,7.2    c-0.6,0.8-0.5,2,0.4,2.6l0.1,0.1c0.6,0.5,1.5,0.4,2-0.2l5.2-5c0.4-0.4,0.9-0.5,1.5-0.4l3.5,0.7c0.3,0.1,0.5,0.4,0.3,0.7l-1.1,1.6    l-7.9,10.4l0,0c-3,3.7-4.9,8.1-5.7,12.7l-1,5.9c-0.1,0.5-0.5,0.8-1,0.9l-10,1.5c-0.6,0.1-1.1,0.6-1.1,1.2v1.1    c0,0.6,0.5,1.1,1.1,1.1l12.8,0.5c0.8,0,1.6-0.4,2-1.1l9.5-16.3l7.1-9.2l0,0l1.6-0.5c1.1-0.4,2-1.2,2.5-2.3l0.1-0.2v0.9    c0,0.8,0.4,1.6,1.1,2.1l7.4,5.3C47.2,48.3,48.2,48.3,48.8,47.8z"}))))}function F(){return c.a.createElement("svg",{height:"270px",width:"270px",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48",xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("ellipse",{fill:"#000000",cx:"22.3",cy:"6.3",rx:"4.6",ry:"4.3"}),c.a.createElement("path",{fill:"#000000",d:"M46.8,23.7c-0.4-0.2-9.3-5.8-25.1-1.4c-14,3.9-18.6-0.7-18.7-0.8c-0.5-0.6-1.4-0.6-2-0.1   c-0.6,0.5-0.7,1.4-0.1,2c0.2,0.2,3,3.3,10.7,3.3c2.9,0,6.5-0.5,10.9-1.7c14.4-4.1,22.7,1,22.7,1c0.7,0.4,1.6,0.2,2-0.4   C47.7,25,47.5,24.1,46.8,23.7z"}),c.a.createElement("path",{fill:"#000000",d:"M13,21.7c0.1,0,0.2,0,0.3,0c1.1-0.1,2-1.1,1.9-2.2c0.1-0.3,0.7-1,2.8-1.4V21c0,0,7.4-2.1,10.3-2.3l0-2.3   c5.4-2.3,7.1-8.2,7.5-11.6c0.1-1.1-0.7-2.2-1.9-2.3c-1.2-0.1-2.3,0.7-2.4,1.8c0,0.4-1.2,9.2-8.8,9.2c-0.1,0-0.1,0-0.2,0   c-5-0.1-8.4,0.8-10.3,2.7c-1.5,1.6-1.3,3.2-1.3,3.5C11,20.9,11.9,21.7,13,21.7z"}),c.a.createElement("path",{fill:"#000000",d:"M28,25.8L18,28l-0.2,2.3c-0.1,0.9-0.5,2.2-0.8,2.3c0,0-1.1,0.1-3.8-2.7C12.3,29,10.9,29,10,29.7   c-0.9,0.8-1,2.1-0.1,2.9c1,1.1,3.9,4.1,7.1,4.1c0.5,0,1-0.1,1.5-0.2c2.9-1,4.8-5.4,4.9-6.6l4.1,7.1l-2,6.4   c-0.3,1.1,0.3,2.2,1.5,2.6c0.2,0.1,0.4,0.1,0.6,0.1c1,0,1.8-0.6,2.1-1.5l2.2-7.1c0.1-0.5,0.1-0.9-0.1-1.4L28,25.8z"})))}function P(e){return c.a.createElement("svg",{width:"15",height:"3",viewBox:"0 0 15 3",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("rect",{width:"15",height:"3",fill:"white"}))}function z(e){return c.a.createElement("svg",{width:"15",height:"15",id:"fi_93839",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 348.462 348.462"},c.a.createElement("g",null,c.a.createElement("path",{fill:"white",d:"M330.725,112.541H83.178l238.875-64.006c0.038-0.01,0.074-0.025,0.111-0.036c0.035-0.009,0.07-0.013,0.105-0.023\r c4.001-1.072,6.375-5.185,5.304-9.186l-9.038-33.731c-0.515-1.921-1.772-3.559-3.495-4.554c-1.723-0.995-3.771-1.264-5.691-0.749\r L15.798,78.913c-4.001,1.072-6.375,5.185-5.304,9.185l8.824,32.931v219.932c0,4.142,3.358,7.5,7.5,7.5h303.907\r c4.142,0,7.5-3.358,7.5-7.5V120.041C338.225,115.898,334.867,112.541,330.725,112.541z M323.225,147.305h-31.319l19.764-19.764\r h11.555V147.305z M34.318,147.305v-19.764h33.354l-19.764,19.764H34.318z M88.885,127.541h33.858l-19.616,19.616\r c-0.048,0.048-0.088,0.099-0.134,0.148H69.121L88.885,127.541z M143.956,127.541h35.859l-19.764,19.764h-35.859L143.956,127.541z\r M201.028,127.541h34.359l-19.764,19.764h-34.359L201.028,127.541z M256.305,127.835c0.095-0.095,0.178-0.196,0.266-0.294h33.886\r l-19.764,19.764h-33.858L256.305,127.835z M93.614,73.591c0.111,0.072,0.218,0.149,0.334,0.216l24.038,13.878l-33.67,9.022\r L59.917,82.62L93.614,73.591z M147.748,59.086l24.399,14.087l-33.67,9.022l-24.4-14.087L147.748,59.086z M201.91,44.573\r l24.399,14.087l-33.671,9.022l-24.399-14.087L201.91,44.573z M256.069,30.061l24.399,14.087l-33.698,9.029\r c-0.115-0.075-0.225-0.154-0.345-0.223L222.4,39.083L256.069,30.061z M311.143,35.929l-10.185,2.729l-24.399-14.087l29.428-7.885\r L311.143,35.929z M39.427,88.111l24.399,14.087l-31.745,8.506L26.924,91.46L39.427,88.111z M34.318,333.462V162.305h288.907\r v171.157H34.318z"}),c.a.createElement("path",{fill:"white",d:"M290.354,207.162c4.142,0,7.5-3.358,7.5-7.5c0-4.142-3.358-7.5-7.5-7.5H63.825c-4.142,0-7.5,3.358-7.5,7.5\r c0,4.142,3.358,7.5,7.5,7.5h56.421v53.321H63.825c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h226.528\r c4.142,0,7.5-3.358,7.5-7.5c0-4.142-3.358-7.5-7.5-7.5H239.54v-53.321H290.354z M224.54,260.483h-89.293v-53.321h89.293V260.483z"})))}a(1188);var R=a(52);a(156);function A(e){var t=e.data,a=e.games;t.length=0;var n=a.map((function(e,a){var n;return e.first_scene?(t.length+=1,n=e.thumbnail,c.a.createElement("div",{className:"gamelist-game",key:a},c.a.createElement(R.b,{to:"/game/".concat(e._id)},c.a.createElement("img",{className:"game-image",src:n,alt:e.title}),c.a.createElement("div",{className:"game-title"},e.title)),c.a.createElement("div",{className:"game-sceneNum"},e.sceneCnt),c.a.createElement("div",{className:"game-sceneIcon"},c.a.createElement(z,null)),c.a.createElement("div",{className:"game-category"},e.category))):null}));t.limit=Math.round(t.length/4+.49);for(var r=[],i=t.limit-1;i>0;i--)r.push(c.a.createElement("div",{id:"".concat(t.id,"_bar").concat(i),className:"bar",key:"".concat(i)},c.a.createElement(P,null)));return r.push(c.a.createElement("div",{id:"".concat(t.id,"_bar0"),className:"bar",style:{filter:"brightness(100%)"},key:0},c.a.createElement(P,null))),c.a.createElement("div",{className:"box-container game-box"},c.a.createElement("div",{className:"box-title"},t.category),c.a.createElement("div",{className:"box-positionBar"},r),c.a.createElement("div",{className:"box-gameList",onMouseEnter:function(){!function(e){var t,a=document.getElementById(e.id+"_right_arrow");if(e.pos<e.limit-1){if(null===a)throw Error("can not find target arrow");a.style.display="block"}if(a=document.getElementById(e.id+"_left_arrow"),e.pos>0){if(null===a)throw Error("can not find target arrow");a.style.display="block"}for(var n=0;n<e.limit;n++){if(null===(t=document.getElementById(e.id+"_bar"+String(n))))throw Error("can not find target bar");t.style.transform="opacity(1)",t.style.opacity="1"}}(t)},onMouseLeave:function(){!function(e){var t,a=document.getElementById(e.id+"_right_arrow");if(null===a)throw Error("can not find target arrow");if(a.style.display="none",a=document.getElementById(e.id+"_left_arrow"),e.pos>0){if(null===a)throw Error("can not find target arrow");a.style.display="none"}for(var n=0;n<e.limit;n++){if(null===(t=document.getElementById(e.id+"_bar"+String(n))))throw Error("can not find target bar");t.style.transform="opacity(0)",t.style.opacity="0"}}(t)}},c.a.createElement("div",{id:"".concat(t.id,"_gameList"),className:"gamelist-container",style:{width:335*t.length+"px"}},n),c.a.createElement("div",{id:"".concat(t.id,"_left_arrow"),className:"gamelist-left-arrow",onClick:function(){!function(e){if(e.pos>0){var t=document.getElementById(e.id+"_bar"+String(e.pos));if(null===t)throw Error("can not find target bar");t.style.filter="brightness(50%)",e.pos-=1;var a=document.getElementById(e.id+"_gameList");if(null===a)throw Error("can not find target container");if(a.style.transform="translate(".concat(-1336*e.pos,"px, 0px)"),null===(t=document.getElementById(e.id+"_bar"+String(e.pos))))throw Error("can not find target bar");if(t.style.filter="brightness(100%)",0==e.pos){var n=document.getElementById(e.id+"_left_arrow");if(null===n)throw Error("can not find target arrow");n.style.display="none"}if(null===(n=document.getElementById(e.id+"_right_arrow")))throw Error("can not find target arrow");n.style.display="block"}}(t)}},c.a.createElement(B,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"})),c.a.createElement("div",{id:"".concat(t.id,"_right_arrow"),className:"gamelist-right-arrow",onClick:function(){!function(e){if(e.pos<e.limit-1){var t=document.getElementById(e.id+"_bar"+String(e.pos));if(null===t)throw Error("can not find target bar");t.style.filter="brightness(50%)",e.pos+=1;var a=document.getElementById(e.id+"_gameList");if(null===a)throw Error("can not find target container");if(a.style.transform="translate(".concat(-1336*e.pos,"px, 0px)"),null===(t=document.getElementById(e.id+"_bar"+String(e.pos))))throw Error("can not find target bar");if(t.style.filter="brightness(100%)",e.pos==e.limit-1){var n=document.getElementById(e.id+"_right_arrow");if(null===n)throw Error("can not find target arrow");n.style.display="none"}if(null===(n=document.getElementById(e.id+"_left_arrow")))throw Error("can not find target arrow");n.style.display="block"}}(t)}},c.a.createElement(B,{src:"arrow_1",width:"45",height:"27",color:"#F5F5F5"}))))}function H(e){return{type:"navbar_control",payload:e}}var U={recent_games:{category:"\ucd5c\uadfc \ud50c\ub808\uc774\ud55c \uac8c\uc784",id:"recent",length:0,pos:0,limit:0},popular_games:{category:"\uc778\uae30 \uac8c\uc784",id:"popular",length:0,pos:0,limit:0}};var G=function(e){var t=Object(E.b)(),a=Object(n.useState)([]),r=Object(u.a)(a,2),i=r[0],l=r[1];return Object(n.useEffect)((function(){t(H(!0)),g.a.get("/api/game/getgames").then((function(e){e.data.success?l(e.data.games):alert("game load\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),c.a.createElement("div",{className:"mainPage_container"},c.a.createElement("div",{className:"box-container"},c.a.createElement(I,{replace:e.history.replace})),c.a.createElement(A,{data:U.recent_games,games:i}),c.a.createElement(A,{data:U.popular_games,games:i}))},V=a(217),W=a(93),X=a(25),q=a(1549),Q=(a(1290),a(760)),Y=a(156);var K=Object(m.h)((function(e){var t=Object(E.b)(),a=!!localStorage.getItem("rememberMe"),r=Object(n.useState)(""),i=Object(u.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)(a),m=Object(u.a)(o,2),d=m[0],b=m[1],f=function(){b(!d)},p=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):void 0,v=function(t){g.a.post("/api/passport/kakao/oauth",{profile:t.profile}).then((function(a){a.data.success&&(a.data.newUser?e.history.replace({pathname:"/passport/register",state:{snsId:t.profile.id,snsProvider:"kakao"}}):e.history.replace("/"))}))},h=function(){e.history.replace({pathname:"/login"})};return c.a.createElement(V.a,{initialValues:{email:p,password:""},validationSchema:W.object().shape({email:W.string().email("\uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.").required("\uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694."),password:W.string().min(6,"\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uae00\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.").required("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.")}),onSubmit:function(a,n){var c=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return{type:"login_user",payload:g.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.loginSuccess?(!0===d&&a.email?window.localStorage.setItem("rememberMe",a.email):localStorage.removeItem("rememberMe"),e.history.replace("/")):s("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574 \uc8fc\uc138\uc694.")})).catch((function(e){s("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574 \uc8fc\uc138\uc694."),setTimeout((function(){s("")}),3e3)})),c(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,r=e.isSubmitting,i=e.handleChange,s=e.handleBlur,o=e.handleSubmit;return c.a.createElement("div",{className:"loginPage-container"},c.a.createElement("div",{className:"loginDiv-container"},c.a.createElement("div",{className:"login-Title"},"\ub85c\uadf8\uc778"),c.a.createElement("div",{className:"login-newUser"},"\uc2e0\uaddc \uc0ac\uc6a9\uc790\uc774\uc2e0\uac00\uc694? ",c.a.createElement(R.b,{className:"login-register",to:"/register"},"\uacc4\uc815\ub9cc\ub4e4\uae30")),c.a.createElement("form",{onSubmit:o,style:{width:"600px"}},c.a.createElement(x.a.Item,{required:!0},c.a.createElement(S.a,{id:"email",prefix:c.a.createElement(X.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\uc774\uba54\uc77c \uc8fc\uc18c",type:"email",value:t.email,onChange:i,onBlur:s,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&c.a.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},n.email)),c.a.createElement(x.a.Item,{required:!0},c.a.createElement(S.a,{id:"password",prefix:c.a.createElement(X.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\ube44\ubc00\ubc88\ud638",type:"password",value:t.password,onChange:i,onBlur:s,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&c.a.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},n.password)),l&&c.a.createElement("label",null,c.a.createElement("p",{className:"login-error"},l)),c.a.createElement(x.a.Item,null,c.a.createElement(q.a,{className:"rememberMe",onChange:f,checked:d,style:{color:"white"}},"\uc544\uc774\ub514 \uae30\uc5b5\ud558\uae30"),c.a.createElement(x.a.Item,null,c.a.createElement("div",null,c.a.createElement("button",{type:"submit",className:"login-button",disabled:r,onSubmit:function(){return o()}},"\ub85c\uadf8\uc778"),c.a.createElement(Q.a,{token:Y.KAKAO_KEY,onSuccess:function(e){return o(),v(e)},onFail:function(){h()},className:"login-button login-kakao"},"\uce74\uce74\uc624 \ub85c\uadf8\uc778")))))))}))}));a(644);var Z=function(e){var t=Object(E.b)();return n.createElement(V.a,{initialValues:{email:"",nickname:"",password:"",confirmPassword:""},validationSchema:W.object().shape({nickname:W.string().required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4."),email:W.string().email("\uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc544\ub2d9\ub2c8\ub2e4.").required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4."),password:W.string().min(6,"\ud328\uc2a4\uc6cc\ub4dc\ub294 \ucd5c\uc18c 6\uae00\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c\ud569\ub2c8\ub2e4.").required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4."),confirmPassword:W.string().oneOf([W.ref("password"),void 0],"\ud328\uc2a4\uc6cc\ub4dc\uac00 \ud2c0\ub9bd\ub2c8\ub2e4.").required("\ud328\uc2a4\uc6cc\ub4dc\ub97c \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694.")}),onSubmit:function(a,n){var c=n.setSubmitting;setTimeout(Object(o.a)(s.a.mark((function n(){var r,i,l;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.post("/api/users/email-check",{email:a.email}).then((function(e){r=e.data.usedEmail}));case 2:if(!r){n.next=6;break}return alert("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \uc774\uba54\uc77c \uc785\ub2c8\ub2e4."),c(!1),n.abrupt("return");case 6:return n.next=8,g.a.post("/api/users/nickname-check",{nickname:a.nickname}).then((function(e){i=e.data.usedNickname}));case 8:if(!i){n.next=12;break}return alert("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \ub2c9\ub124\uc784 \uc785\ub2c8\ub2e4."),c(!1),n.abrupt("return");case 12:return l={email:a.email,password:a.password,nickname:a.nickname,image:"https://i.imgur.com/rF80MBo.png"},n.next=15,t(p(l)).then((function(t){t.payload.success?e.history.push("/"):alert(t.payload.err.errmsg)}));case 15:c(!1);case 16:case"end":return n.stop()}}),n)}))),500)}},(function(e){var t=e.values,a=e.touched,c=e.errors,r=e.isSubmitting,i=e.handleChange,l=e.handleBlur,s=e.handleSubmit;return n.createElement("div",{className:"registerPage-container"},n.createElement("div",{className:"registerDiv-container"},n.createElement("div",{className:"register-Title"},"\ud68c\uc6d0\uac00\uc785"),n.createElement("div",{className:"register-oldUser"},"\uae30\uc874 \uc0ac\uc6a9\uc790\uc774\uc2e0\uac00\uc694? ",n.createElement(R.b,{className:"register-login",to:"/login"},"\ub85c\uadf8\uc778\ud558\uae30")),n.createElement(x.a,{onSubmit:s,labelAlign:"left",labelCol:{span:5},wrapperCol:{span:19}},n.createElement(x.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ub2c9\ub124\uc784")},n.createElement(S.a,{id:"nickname",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694",type:"text",value:t.nickname,onChange:i,onBlur:l,className:c.nickname&&a.nickname?"text-input error":"text-input"}),c.nickname&&a.nickname&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.nickname)),n.createElement(x.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \uc774\uba54\uc77c"),hasFeedback:!0,validateStatus:c.email&&a.email?"error":"success"},n.createElement(S.a,{id:"email",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.",type:"email",value:t.email,onChange:i,onBlur:l,className:c.email&&a.email?"text-input error":"text-input"}),c.email&&a.email&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.email)),n.createElement(x.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ube44\ubc00\ubc88\ud638"),hasFeedback:!0,validateStatus:c.password&&a.password?"error":"success"},n.createElement(S.a,{id:"password",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",type:"password",value:t.password,onChange:i,onBlur:l,className:c.password&&a.password?"text-input error":"text-input"}),c.password&&a.password&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.password)),n.createElement(x.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ube44\ubc00\ubc88\ud638 \uc7ac\ud655\uc778"),hasFeedback:!0},n.createElement(S.a,{id:"confirmPassword",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc7ac\uc785\ub825\ud558\uc138\uc694",type:"password",value:t.confirmPassword,onChange:i,onBlur:l,className:c.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),c.confirmPassword&&a.confirmPassword&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.confirmPassword)),n.createElement(x.a.Item,null,n.createElement("div",null,n.createElement("button",{type:"submit",className:"register-button",disabled:r,onSubmit:function(){return s()}},"\ud68c\uc6d0\uac00\uc785"))))))}))};var J=function(e){var t=Object(E.b)(),a=Object(m.g)().state,c=a.snsId,r=a.snsProvider;return n.createElement(V.a,{initialValues:{nickname:""},validationSchema:W.object().shape({nickname:W.string().required("\ud544\uc218 \uc815\ubcf4\uc785\ub2c8\ub2e4.")}),onSubmit:function(a,n){var i=n.setSubmitting;setTimeout(Object(o.a)(s.a.mark((function n(){var l,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.post("/api/users/nickname-check",{nickname:a.nickname}).then((function(e){l=e.data.usedNickname}));case 2:if(!l){n.next=6;break}return alert("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \ub2c9\ub124\uc784 \uc785\ub2c8\ub2e4."),i(!1),n.abrupt("return");case 6:return o={nickname:a.nickname,snsId:c,snsProvider:r,image:"https://i.imgur.com/rF80MBo.png"},n.next=9,t(p(o)).then((function(t){t.payload.success?e.history.push("/"):alert(t.payload.err.errmsg)}));case 9:i(!1);case 10:case"end":return n.stop()}}),n)}))),500)}},(function(e){var t=e.values,a=e.touched,c=e.errors,r=e.isSubmitting,i=e.handleChange,l=e.handleBlur,s=e.handleSubmit;return n.createElement("div",{className:"registerPage-container"},n.createElement("div",{className:"registerDiv-container"},n.createElement("div",{className:"register-Title"},"\ud68c\uc6d0\uac00\uc785"),n.createElement(x.a,{onSubmit:s,labelAlign:"left",labelCol:{span:5},wrapperCol:{span:19}},n.createElement(x.a.Item,{required:!0,label:n.createElement("label",{style:{color:"white"}}," \ub2c9\ub124\uc784")},n.createElement(S.a,{id:"nickname",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694",type:"text",value:t.nickname,onChange:i,onBlur:l,className:c.nickname&&a.nickname?"text-input error":"text-input"}),c.nickname&&a.nickname&&n.createElement("div",{className:"input-feedback",style:{color:"rgb(255, 60, 60)"}},c.nickname)),n.createElement(x.a.Item,null,n.createElement("div",null,n.createElement("button",{type:"submit",className:"register-button",disabled:r,onSubmit:function(){return s()}},"\ud68c\uc6d0\uac00\uc785"))))))}))},$=(a(1291),a(265)),ee=a(76),te=a(69);var ae=function(e){var t=e.gameId,a=e.sceneCnt,r=Object(n.useState)({createdAt:"",description:"",sceneCnt:0,thumbnail:"",title:""}),i=Object(u.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)(0),m=Object(u.a)(o,2),d=m[0],b=m[1],f=Object(n.useState)({like:0,isClick:!1}),p=Object(u.a)(f,2),v=p[0],E=p[1];if(Object(n.useEffect)((function(){g.a.post("/api/game/getgamedetail",{gameId:new $.ObjectId(t)}).then((function(e){s(e.data.gameDetail)})),g.a.post("/api/view/",{objectId:new $.ObjectId(t)}).then((function(e){b(e.data.view)})),g.a.post("/api/thumbsup/count",{objectId:new $.ObjectId(t)}).then((function(e){E({isClick:e.data.isClicked,like:e.data.thumbsup})}))}),[]),""===l.title)return c.a.createElement("div",null);var h=l.description.length>300?l.description.slice(0,300)+"...":l.description;return c.a.createElement("div",{className:"contribute__container"},c.a.createElement(R.b,{to:"/game/".concat(t)},c.a.createElement("img",{className:"contribute__img",src:"http://".concat("localhost",":5000/").concat(l.thumbnail),alt:"https://cdn.crowdpic.net/list-thumb/thumb_l_110F2464CA8958D839ECCBA33E453FDF.jpg"}),c.a.createElement("div",{className:"contribute__icon"},c.a.createElement("div",null,l.sceneCnt,c.a.createElement(ee.a,{icon:te.f,style:{marginLeft:"10px"}})),c.a.createElement("div",null,d,c.a.createElement(ee.a,{icon:te.e,style:{marginLeft:"10px"}})),c.a.createElement("div",null,v.like,c.a.createElement(ee.a,{style:{marginLeft:"10px"},icon:te.g})))),c.a.createElement("div",{className:"contribute__info"},c.a.createElement("div",{className:"contribute__title"},l.title),c.a.createElement("div",{className:"contribute__text"},h),a>=0?c.a.createElement("div",{className:"contribute__contributeCntText"},"\uae30\uc5ec\ud55c \uc2a4\ud1a0\ub9ac \uac1c\uc218:",c.a.createElement("div",{className:"contribute__cnt"},a)):c.a.createElement("div",null)))};a(1492);var ne=function(e){var t=e.match.params.userId,a=Object(E.c)((function(e){return e.user.userData})),r=Object(n.useState)({makingGameList:[],image:"",email:"",nickname:"",_id:"",contributedSceneList:[],contributedGameList:[]}),i=Object(u.a)(r,2),l=i[0],s=i[1],o=Object(n.useState)(!1),m=Object(u.a)(o,2),d=(m[0],m[1],Object(n.useState)(5)),b=Object(u.a)(d,2),f=b[0],p=b[1],v=Object(n.useState)(5),h=Object(u.a)(v,2),_=h[0],y=h[1],j=Object(n.useState)(0),N=Object(u.a)(j,2),k=N[0],S=N[1],w=Object(n.useState)(0),x=Object(u.a)(w,2),C=x[0],I=x[1];Object(n.useEffect)((function(){g.a.post("/api/users/profile",{userId:t}).then((function(e){if(e.data.success){s(e.data.user);for(var t=0,a=0;a<e.data.user.contributedSceneList.length;a++)t+=e.data.user.contributedSceneList[a].sceneCnt;S(t),I(e.data.user.contributedGameList.length)}else O.a.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),null===a||void 0===a||a._id;var L=function(e){var t=document.getElementById(e);document.getElementById("contributedGame").style.display="none",document.getElementById("contributedScene").style.display="none",t.style.display="block"};return a?c.a.createElement("div",{className:"profile__container"},c.a.createElement("div",{className:"profile__thumbnail_container"},c.a.createElement("img",{className:"profile__thumbnail",src:"https://i.imgur.com/UwPKBqQ.jpg",alt:""}),c.a.createElement("div",{className:"profile__gradation"}),c.a.createElement("div",{className:"profile__userInfo"},c.a.createElement("img",{src:l.image,alt:"",className:"profile__img"}),c.a.createElement("div",{className:"profile__text"},c.a.createElement("div",null,l.nickname),c.a.createElement("div",null,l.email)))),c.a.createElement("div",{className:"profile__btn_container"},c.a.createElement("div",{className:"profile__btn",onClick:function(){return L("contributedScene")}},"\ub0b4\uac00 \ub9cc\ub4e0 \uc2a4\ud1a0\ub9ac"),c.a.createElement("div",{className:"profile__btn",onClick:function(){return L("contributedGame")}},"\ub0b4\uac00 \ub9cc\ub4e0 \uac8c\uc784")),c.a.createElement("div",{id:"contributedScene",style:{display:"block"}},c.a.createElement("div",{className:"profile__title"},"\uae30\uc5ec\ud55c \uc2a4\ud1a0\ub9ac ",k," \uac1c"),function(e){var t=e.contributedSceneList.slice(0,_);if(t){var a=t.map((function(e){return c.a.createElement("div",{key:e.gameId},c.a.createElement(ae,{gameId:e.gameId,sceneCnt:e.sceneCnt}))}));return c.a.createElement(c.a.Fragment,null,a,e.contributedSceneList.length>_?c.a.createElement("div",{className:"displayMore",onClick:function(){return y((function(e){return e+5}))}},"\ub354\ubcf4\uae30"):c.a.createElement("div",null))}}(l)),c.a.createElement("div",{id:"contributedGame",style:{display:"none"}},c.a.createElement("div",{className:"profile__title"},"\uae30\uc5ec\ud55c \uac8c\uc784 ",C," \uac1c"),function(e){var t=e.contributedGameList.slice(0,f);if(t){var a=t.map((function(e){return c.a.createElement("div",{key:e.gameId},c.a.createElement(ae,{gameId:e.gameId,sceneCnt:-1}))}));return c.a.createElement(c.a.Fragment,null,a,e.contributedGameList.length>f?c.a.createElement("div",{className:"displayMore",onClick:function(){return p((function(e){return e+5}))}},"\ub354\ubcf4\uae30"):c.a.createElement("div",null))}}(l))):c.a.createElement("div",null,"loading...")};a(740),a(1493),a(1494);var ce=Object(n.memo)((function(e){var t=e.comment,a=e.updateToggle_comment,r=e.gameId,i=Object(E.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),l=Object(E.c)((function(e){return e.user.userData?e.user.userData._id:null})),s=Object(n.useState)(!1),o=Object(u.a)(s,2),m=o[0],d=o[1],b=Object(n.useState)(""),f=Object(u.a)(b,2),p=f[0],v=f[1],h=Object(n.useState)(0),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)(!0),k=Object(u.a)(N,2),S=k[0],w=k[1],x=function(){w((function(e){return!e}))};return Object(n.useEffect)((function(){var e={gameId:r,userId:l,commentId:t._id};g.a.post("/api/like/",e).then((function(e){e.data.success?j(e.data.result.length):O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[S]),c.a.createElement("div",{className:"container_box",id:t._id},c.a.createElement("div",{className:"comment_container"},c.a.createElement("img",{src:t.writer.image,alt:"img",className:"SingleReply__img"}),c.a.createElement("div",{className:"comment_contents"},c.a.createElement("div",{className:"SingleReply__nickname"},t.writer.nickname),i&m?c.a.createElement("div",{className:"edit_container"},c.a.createElement("textarea",{className:"comment_input",onChange:function(e){v(e.currentTarget.value)},value:p}),c.a.createElement("button",{className:"comment__btn",onClick:function(e){e.preventDefault(),g.a.post("/api/comment/edit-comment",{commentId:t._id,comment:p}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),x()):O.a.error("\ub313\uae00 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),d((function(e){return!e}))}},"\uc218\uc815")):c.a.createElement("div",{className:"SingleReply__content"},t.content),c.a.createElement("div",{className:"SingleReply__comment_info"},c.a.createElement("div",{onClick:function(){if(!1!==i){var e={gameId:r,userId:l,commentId:t._id};g.a.post("/api/like/setlike",e).then((function(e){e.data.success?x():O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},className:"comment_like"},"\uc88b\uc544\uc694 : ",y),t.writer._id===l&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{onClick:function(){d((function(e){return!e})),v(t.content)},className:"comment_option"},m?"\uc218\uc815 \ucde8\uc18c":"\ub313\uae00 \uc218\uc815"),c.a.createElement("div",{onClick:function(){d(!1),g.a.post("/api/comment/remove-comment",{commentId:t._id}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),a()):O.a.error("\ub313\uae00 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},className:"comment_option"},"\ub313\uae00 \uc0ad\uc81c"))))))}));a(1495);var re=Object(n.memo)((function(e){var t=e.gameId,a=e.comment,r=e.updateToggle_comment,i=Object(E.c)((function(e){return e.user})),l=Object(E.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),s=Object(E.c)((function(e){return e.user.userData?e.user.userData._id:null})),o=Object(n.useRef)(),m=Object(n.useState)(!0),d=Object(u.a)(m,2),b=d[0],f=d[1],p=Object(n.useState)(""),v=Object(u.a)(p,2),h=v[0],_=v[1],y=Object(n.useState)([]),j=Object(u.a)(y,2),N=j[0],k=j[1],S=Object(n.useState)(!1),w=Object(u.a)(S,2),x=w[0],C=w[1],I=Object(n.useState)(!1),L=Object(u.a)(I,2),T=L[0],D=L[1],B=Object(n.useState)(""),M=Object(u.a)(B,2),F=M[0],P=M[1],z=Object(n.useState)(!1),R=Object(u.a)(z,2),A=R[0],H=R[1],U=Object(n.useState)(0),G=Object(u.a)(U,2),V=G[0],W=G[1],X=function(){f((function(e){return!e}))};Object(n.useEffect)((function(){var e={gameId:t,responseTo:a._id.toString()};g.a.post("/api/comment/get-reply",e).then((function(e){e.data.success?k(e.data.result):O.a.error("\ub300\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}));var n={gameId:t,userId:s,commentId:a._id};g.a.post("/api/like/",n).then((function(e){e.data.success?W(e.data.result.length):O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[b]);var q=N.map((function(e,a){return c.a.createElement("div",{key:e._id,style:{marginLeft:"10px"}},e&&c.a.createElement(ce,{updateToggle_comment:X,gameId:t,comment:e}))}));return c.a.createElement("div",{className:"container_box",id:a._id},c.a.createElement("div",{className:"comment_container"},c.a.createElement("img",{src:a.writer.image,alt:"img",className:"img"}),c.a.createElement("div",{className:"comment_contents"},c.a.createElement("div",{className:"nickname"},a.writer.nickname),T?c.a.createElement("div",{className:"edit_container"},c.a.createElement("textarea",{className:"singleComment_input",onChange:function(e){P(e.currentTarget.value)},value:F}),c.a.createElement("button",{className:"comment__btn",onClick:function(e){e.preventDefault(),g.a.post("/api/comment/edit-comment",{commentId:a._id,comment:F}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r()):O.a.error("\ub313\uae00 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),D((function(e){return!e}))}},"\uc218\uc815")):c.a.createElement("div",{className:"content"},a.content),c.a.createElement("div",{className:"comment_info"},c.a.createElement("div",{onClick:function(){if(!1!==l){var e={gameId:t,userId:s,commentId:a._id};g.a.post("/api/like/setlike",e).then((function(e){e.data.success?X():O.a.error("\uc88b\uc544\uc694\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},className:"comment_like"},"\uc88b\uc544\uc694 : ",V),N.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{onClick:function(){"block"===o.current.style.display?(o.current.style.display="none",H(!1),C(!1)):(o.current.style.display="block",H(!0))},className:"comment_displayReplyToggle"},A?c.a.createElement("div",null,"\ub313\uae00 \ub2eb\uae30"):c.a.createElement("div",null,"\ub313\uae00 ",N.length,"\uac1c \ubcf4\uae30"))):c.a.createElement("div",null),c.a.createElement("div",{onClick:function(){C((function(e){return!e}))},className:"comment_option"},x?"\uc791\uc131 \ucde8\uc18c":"\ub313\uae00 \uc791\uc131"),a.writer._id===s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{onClick:function(){D((function(e){return!e})),P(a.content)},className:"comment_option"},T?"\uc218\uc815 \ucde8\uc18c":"\ub313\uae00 \uc218\uc815"),c.a.createElement("div",{onClick:function(){D(!1),g.a.post("/api/comment/remove-comment",{commentId:a._id}).then((function(e){e.data.success?(O.a.success("\ub313\uae00\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r()):O.a.error("\ub313\uae00 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},className:"comment_option"},"\ub313\uae00 \uc0ad\uc81c"))),l&x?c.a.createElement("form",{className:"comment__form"},c.a.createElement("textarea",{className:"singleComment__textarea",onChange:function(e){_(e.currentTarget.value)},value:h,placeholder:"\ucf54\uba58\ud2b8\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694."}),c.a.createElement("button",{className:"comment__btn",onClick:function(e){if(e.preventDefault(),""!==h){var n={content:h,writer:i.userData._id,gameId:t,responseTo:a._id.toString()};g.a.post("/api/comment/save-comment",n).then((function(e){e.data.success?(O.a.success("\ub313\uae00 \uac10\uc0ac\ud569\ub2c8\ub2e4!"),X(),_(""),"block"!==o.current.style.display&&(o.current.style.display="block",H(!0))):O.a.error("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}}},"\ub313\uae00")):c.a.createElement("div",null))),c.a.createElement("div",{ref:o,className:"reply_container"},q))}));var ie=Object(n.memo)((function(e){var t=e.gameId,a=Object(E.c)((function(e){return e.user})),r=Object(E.c)((function(e){return e.user.userData?e.user.userData.isAuth:null})),i=Object(n.useState)(!0),l=Object(u.a)(i,2),m=l[0],d=l[1],b=Object(n.useState)(""),f=Object(u.a)(b,2),p=f[0],v=f[1],h=Object(n.useState)([]),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)(!1),k=Object(u.a)(N,2),S=k[0],w=k[1],x=Object(n.useState)([]),C=Object(u.a)(x,2),I=C[0],L=C[1],T=Object(n.useState)(0),D=Object(u.a)(T,2),B=D[0],M=D[1],F=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),j(I.slice(0,B+8)),M((function(e){return e+8})),w(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=document.documentElement.scrollHeight;document.documentElement.scrollTop+1.5*document.documentElement.clientHeight>=e&&!1===S&&F()};Object(n.useEffect)((function(){return window.addEventListener("scroll",P),function(){window.removeEventListener("scroll",P)}}));var z=function(){d((function(e){return!e}))};Object(n.useEffect)((function(){g.a.post("/api/comment/get-comment",{gameId:t}).then((function(e){e.data.success?(L(e.data.result),j(e.data.result.slice(0,B))):O.a.error("\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[m]);var R=y.map((function(e,a){return c.a.createElement("div",{key:e._id},e&&c.a.createElement(re,{updateToggle_comment:z,gameId:t,comment:e}))}));return c.a.createElement("div",{className:"comment__container"},c.a.createElement("div",{className:"comment__commentCnt"},"\ub313\uae00 ",I.length,"\uac1c"),c.a.createElement("hr",null),c.a.createElement("br",null),r&&c.a.createElement("form",{className:"comment__form"},c.a.createElement("textarea",{className:"comment__textarea",onChange:function(e){v(e.currentTarget.value)},value:p}),c.a.createElement("button",{className:"comment__btn",onClick:function(e){if(e.preventDefault(),""!==p){var n={content:p,writer:a.userData._id,gameId:t,responseTo:""};g.a.post("/api/comment/save-comment",n).then((function(e){e.data.success?(O.a.success("\ub313\uae00 \uac10\uc0ac\ud569\ub2c8\ub2e4!"),z(),v("")):O.a.error("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}}},"\ub313\uae00")),R,c.a.createElement("br",null))}));var le=function(e){var t,a=e.contributerList,n=e.totalSceneCnt,r=e.creatorNickname,i=null===(t=a[0])||void 0===t?void 0:t.userSceneCnt,l=a.map((function(e,t){var a=Math.round(e.userSceneCnt/n*100),l=Math.round(e.userSceneCnt/i*100);return c.a.createElement("div",{key:e.userId,className:"detailPage__contributer"},c.a.createElement("div",{className:"detailPage__contributer_rankNum ".concat(t)},t+1,"\uc704"),c.a.createElement("img",{className:"detailPage__contributer_img",src:e.image,alt:"image"}),c.a.createElement("div",{className:"detailPage__contributer_info"},c.a.createElement(R.b,{to:"/profile/".concat(e.userId),className:r===e.nickname?"detailPage__creater_nickname":"detailPage__contributer_nickname"},e.nickname.substr(0,11)),c.a.createElement("div",{className:"detailPage__contributer_graph"},c.a.createElement("div",{className:"detailPage__graph_wrapper",style:{width:"".concat(l,"%")}},c.a.createElement("div",{className:"detailPage__graph"},a,"%")))))}));return c.a.createElement("div",null,l)};a(156);var se=function(e){var t,a,r=e.match.params.gameId,i={gameId:r},l=Object(n.useState)([]),m=Object(u.a)(l,2),d=m[0],b=m[1],f=Object(n.useState)([]),p=Object(u.a)(f,2),v=p[0],h=p[1],_=Object(n.useState)(!1),y=Object(u.a)(_,2),j=y[0],N=y[1],k=Object(n.useState)(0),S=Object(u.a)(k,2),w=S[0],x=S[1],C=Object(n.useState)(0),I=Object(u.a)(C,2),L=I[0],T=I[1],D=Object(n.useState)(!1),M=Object(u.a)(D,2),F=M[0],P=M[1],z=Object(n.useState)(0),R=Object(u.a)(z,2),A=R[0],H=R[1],U=Object(n.useState)(0),G=Object(u.a)(U,2),V=G[0],W=G[1],X=Object(n.useState)([]),q=Object(u.a)(X,2),Q=q[0],Y=q[1],K=Object(n.useState)(!1),Z=Object(u.a)(K,2),J=Z[0],$=Z[1],ae=Object(E.c)((function(e){return e.user})),ne=function(){var t=Object(o.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a){t.next=6;break}return t.next=4,g.a.get("/api/users/playing-list/clear");case 4:n=t.sent,ae.userData.isAuth&&j&&ca.emit("empty_num_increase",{user_id:ae.userData._id.toString(),scene_id:n.data.prevOfLastScene.toString()});case 6:e.history.replace({pathname:!a&&j?"/scene/make":"/gameplay",state:{sceneId:a?n.data.teleportSceneId:v,gameId:r}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){g.a.post("/api/game/getgamedetail",i).then((function(e){e.data.success?b(e.data.gameDetail):O.a.error("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),g.a.post("/api/game/rank",i).then((function(e){e.data.success?(Y(e.data.topRank),W(e.data.contributerCnt),H(e.data.totalSceneCnt)):O.a.error("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),g.a.get("/api/game/gamestart/".concat(r)).then((function(e){e.data.success?(h(e.data.sceneId),N(e.data.isMaking)):O.a.error("\ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694.")}))}),[]),Object(n.useEffect)((function(){if(ae&&ae.userData){var e={userId:ae.userData._id,objectId:r};g.a.post("/api/view/",e).then((function(e){e.data.success&&x(e.data.view)}))}}),[ae]),Object(n.useEffect)((function(){if(ae&&ae.userData){var e={objectId:r,userId:ae.userData._id};g.a.post("/api/thumbsup/count",e).then((function(e){e.data.success&&(T(e.data.thumbsup),P(e.data.isClicked))})),g.a.post("/api/users/game-visit",{userId:ae.userData._id}).then((function(e){var t,a;e.data.success&&((null===(t=e.data)||void 0===t||null===(a=t.gamePlaying)||void 0===a?void 0:a.sceneIdList.length)>1&&$(!0))}))}}),[ae]),A?c.a.createElement("div",{className:"detailPage__container"},c.a.createElement("div",{className:"detailPage__thumbnail_container"},c.a.createElement("img",{className:"detailPage__thumbnail",src:d.thumbnail,alt:"thumbnail"}),c.a.createElement("div",{className:"detailPage__contributer_container"},c.a.createElement("div",{className:"detailPage__contributer_title"}," ",V,"\uba85\uc774 \ud568\uaed8\ud558\ub294 \uc774\uc57c\uae30"),c.a.createElement(le,{contributerList:Q,creatorNickname:null===d||void 0===d||null===(t=d.creator)||void 0===t?void 0:t.nickname,totalSceneCnt:A})),c.a.createElement("div",{className:"detailPage__gamePlay"},c.a.createElement("div",{className:"detailPage__gamePlay_container"},c.a.createElement("div",{className:"detailPage__gamePlay_text"},"\ud604\uc7ac \uc2a4\ud1a0\ub9ac"),c.a.createElement("div",{className:"detailPage__gamePlay_sceneCntContainer"},c.a.createElement("div",{className:"detailPage__gamePlay_sceneCnt"},A),c.a.createElement("div",{className:"detailPage__gamePlay_cntText"},"\uac1c"))),c.a.createElement("div",{className:"detailPage__gamePlay_link",onClick:function(){return ne(!1)}},c.a.createElement("div",{className:"icon"},c.a.createElement(B,{src:"playIcon_1",width:"30",height:"30",color:"#FFF"})),J?"\uc774\uc5b4\ud558\uae30":"\uc2dc\uc791\ud558\uae30")),c.a.createElement("div",{className:"detailPage__gradation"}),c.a.createElement("div",{className:"detailPage__UPTitle"},null===d||void 0===d?void 0:d.title),c.a.createElement("div",{className:"detailPage__interaction"},c.a.createElement("div",{onClick:function(){var e;if(null===(e=ae.userData)||void 0===e?void 0:e.isAuth){var t={userId:ae.userData._id,objectId:r};g.a.post("/api/thumbsup/",t).then((function(e){e.data.success&&(T(e.data.thumbsup),P(e.data.isClicked))}))}else O.a.error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},className:"detailPage__like"},L,F?c.a.createElement(ee.a,{style:{color:"red",marginLeft:"10px"},icon:te.g}):c.a.createElement(ee.a,{icon:te.g,style:{marginLeft:"10px"}})),c.a.createElement("div",{className:"detailPage__view"},w,c.a.createElement(ee.a,{icon:te.e,style:{marginLeft:"10px"}}))),J&&c.a.createElement("div",{className:"detailPage__gamePlayFromStart_link",onClick:function(){return ne(!0)}},"\ucc98\uc74c\ubd80\ud130 \ud558\uae30")),c.a.createElement("div",{className:"detailPage__info_container"},c.a.createElement("div",{className:"detailPage__title"}),c.a.createElement("div",{className:"detailPage__genre"},"\uc7a5\ub974:",c.a.createElement("div",{className:"bold_text"},d.category),"\uc791\uac00:",c.a.createElement("div",{className:"bold_text"},null===d||void 0===d||null===(a=d.creator)||void 0===a?void 0:a.nickname.substr(0,20))),c.a.createElement("div",{className:"detailPage__description"},d.description),c.a.createElement(ie,{gameId:r}))):c.a.createElement("div",{className:"loader_container"},c.a.createElement("div",{className:"loader"},"Loading..."))},oe=a(1546),ue=a(164),me=a(147),de=(a(1496),S.a.TextArea),be=oe.a.Title,fe=[{value:0,label:"Private"},{value:1,label:"Public"}],ge=[{value:0,label:"\uc0b4\uc544\ub0a8\uae30"},{value:1,label:"\ub85c\ub9e8\uc2a4"},{value:2,label:"\uc2a4\ud1a0\ub9ac"},{value:3,label:"\ucd94\ub9ac"},{value:4,label:"\ubcd1\ub9db"}];"".concat(9/16),"".concat(16/9);var pe=function(e){var t=Object(E.c)((function(e){return e.user})),a=Object(n.useState)(""),r=Object(u.a)(a,2),i=r[0],l=r[1],s=Object(n.useState)(""),o=Object(u.a)(s,2),m=o[0],d=o[1],b=Object(n.useState)(0),f=Object(u.a)(b,2),p=f[0],v=f[1],h=Object(n.useState)("\uc0b4\uc544\ub0a8\uae30"),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)(!0),k=Object(u.a)(N,2),w=k[0],C=k[1],I=Object(n.useState)(""),L=Object(u.a)(I,2),T=L[0],D=L[1],B=function(e){C((function(e){return!e}))},M=function(a){if(a.preventDefault(),""!==i&&""!==m&&""!==T){var n;n=w?9/16:16/9;var c={creator:t.userData._id,title:i,description:m,thumbnail:T,privacy:p,category:y,ratio:n,writer:[t.userData._id],character:[],background:[],bgm:[],sound:[]};g.a.post("/api/game/uploadgame",c).then((function(t){t.data.success?(O.a.success("\uccab Scene\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694. \uc624\ub978\ucabd\uc758 +\ubc84\ud2bc\uc744 \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){e.history.replace("/game/upload/".concat(t.data.game._id))}),1e3)):alert("game\uc81c\uc791 \uc2e4\ud328")}))}else alert("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")};return c.a.createElement("div",{style:{maxWidth:"700px",margin:"2rem auto"}},c.a.createElement("div",{style:{textAlign:"center",marginBottom:"2rem"}},c.a.createElement(be,{level:2},"Upload Game")),c.a.createElement(x.a,{onSubmit:M},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement(me.a,{onDrop:function(e){if(e[0]){var t=new FormData;t.append("file",e[0]),g.a.post("/api/game/uploadfiles",t,{header:{"content-type":"multipart/form-data"}}).then((function(e){e.data.success?D(e.data.url):alert("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))}else alert("\uc190\uc0c1\ub41c \ud30c\uc77c\uc785\ub2c8\ub2e4.")},multiple:!1,maxSize:1e9},(function(e){var t=e.getRootProps,a=e.getInputProps;return c.a.createElement("div",Object.assign({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),c.a.createElement("input",a()),c.a.createElement(X.a,{type:"plus",style:{fontSize:"3rem"}}))})),T&&c.a.createElement("div",null,c.a.createElement("img",{className:"thumbnail__img",src:"http://".concat("localhost",":5000/").concat(T),alt:"thumbnail"}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,"Title"),c.a.createElement(S.a,{onChange:function(e){l(e.currentTarget.value)},value:i}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,"Description"),c.a.createElement(de,{onChange:function(e){d(e.currentTarget.value)},value:m}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("select",{onChange:function(e){v(e.currentTarget.value)}},fe.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("select",{onChange:function(e){var t=e.currentTarget.value;j(e.currentTarget[t].text)}},ge.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"ratio",checked:w,onChange:B}),"\ucef4\ud4e8\ud130"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",name:"ratio",checked:!w,onChange:B}),"\uc2a4\ub9c8\ud2b8\ud3f0"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ue.a,{type:"primary",size:"large",onClick:M},"Next Step")))};a(1544),a(1545),oe.a.Title,a(156);var ve=a(19),Ee=a(29),he=(a(1498),a(1499),a(1500),a(1501),function(e){var t=e.characterList,a=null===t||void 0===t?void 0:t.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",{className:"CharacterBlock",style:{left:"".concat(e.posX,"%")}},c.a.createElement("div",{className:"character__container",style:{height:"".concat(e.size,"%"),top:"".concat(e.posY,"%")}},c.a.createElement("img",{className:"characterImg",src:e.image,alt:"img"}))))}));return c.a.createElement("div",{className:"CharacterBlocks"},a)});a(1502);var _e=function(e,t){var a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t})),Object(n.useEffect)((function(){function t(t){t.code!==e||t.shiftKey||a.current(t)}return document.addEventListener("keypress",t),function(){return document.removeEventListener("keypress",t)}}),[e])},ye=x.a.create({name:"modal_form"})((function(e){var t=e.visible,a=e.onCancel,n=e.onCreate,r=e.setSceneTitle,i=e.remainTime;return _e("Enter",(function(){n()})),t?c.a.createElement(w.a,{visible:!0,title:"\uc120\ud0dd\uc9c0 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694 (".concat(i,")"),okText:"\uc81c\uc791 \uc2dc\uc791",cancelText:"\ucde8\uc18c",onCancel:a,onOk:n,getContainer:".gamePlay__container",centered:!0,closable:!1},c.a.createElement(x.a,{layout:"vertical"},c.a.createElement(x.a.Item,{label:"Title",name:"title",rules:[{required:!0,message:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!"}]},c.a.createElement(S.a,{onChange:function(e){r(e.currentTarget.value.substr(0,30))},ref:function(e){return e&&e.focus()}})))):""})),Oe=Object(n.memo)(ye);function je(e){return{type:"gameLoading_gamePlay",payload:e}}function Ne(e){return{type:"pause_gamePlay",payload:e}}var ke=Object(n.memo)((function(e){var t,a=e.scene_id,r=e.scene_depth,i=e.game_id,l=e.scene_next_list,d=e.theme,b=Object(E.b)(),f=Object(m.f)(),p=Object(E.c)((function(e){return e.user})),v=Object(E.c)((function(e){return e.sync.emptyNum})),h=Object(n.useState)(!1),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)(""),k=Object(u.a)(N,2),S=k[0],w=k[1],x=Object(n.useState)(0),C=Object(u.a)(x,2),I=C[0],L=C[1],T=Object(n.useState)(1),D=Object(u.a)(T,2),B=(D[0],D[1],Object(n.useRef)(void 0)),M=Object(n.useRef)(!1),F=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(B.current),!M.current&&y){e.next=3;break}return e.abrupt("return");case 3:return M.current=!0,t={gameId:i,prevSceneId:a,isFirst:0,sceneDepth:r+1,title:S},e.next=7,g.a.post("/api/scene/create",t);case 7:n=e.sent,ca.emit("created_choice",{sceneId:a,userId:p.userData._id,exp:n.data.exp}),j(!1),f.replace({pathname:"/scene/make",state:{gameId:i,sceneId:n.data.sceneId}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){ca.emit("empty_num_increase",{scene_id:a,user_id:p.userData._id}),clearTimeout(B.current),j(!1),b(Ne(!1))},z=Object(n.useState)(0),R=Object(u.a)(z,2),A=R[0],H=R[1];return Object(n.useEffect)((function(){ca.off("decrease_failed"),ca.on("decrease_failed",(function(){j(!1),H(0),H(1)})),ca.emit("validate_empty_num",{scene_id:a})}),[a]),Object(n.useEffect)((function(){A&&clearTimeout(B.current)}),[A]),c.a.createElement(c.a.Fragment,null,(null===l||void 0===l?void 0:l.length)<4&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"text_line_choice ".concat(d),onClick:v>0?function(){if(p.userData.isAuth){b(Ne(!0)),clearTimeout(B.current);var e=30;L(e),t=setInterval((function(){if(0===--e)return clearInterval(t),void P();L(e)}),970),B.current=t,ca.emit("empty_num_decrease",{scene_id:a,user_id:p.userData._id}),j(!0)}else O.a.error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")}:null},"\uc120\ud0dd\uc9c0 \ucd94\uac00 (+",v,")")),c.a.createElement(Oe,{visible:y,onCancel:P,onCreate:function(){return F()},remainTime:I,setSceneTitle:w}))})),Se=a(770);var we=function(e,t){var a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t})),Object(n.useEffect)((function(){function t(e){a.current(e)}return document.addEventListener(e,t),function(){return document.removeEventListener(e,t)}}),[])},xe=a(156),Ce=new Audio("".concat(xe.STORAGE,"/uploads/TYPING.mp3"));Ce.volume=.8;var Ie=function(e){var t=e.cut_script,a=e.setIsTyping,r=Object(n.useState)(!1),i=Object(u.a)(r,2),l=i[0],s=i[1],o=0,m=Object(Se.a)(t,{pace:function(){return 200},onFinished:function(){Ce&&Ce.pause(),s(!0)},onChar:function(){0==o||" "===t[o]||"."===t[o]?Ce&&Ce.pause():Ce&&Ce.play(),o++}}),d=Object(u.a)(m,2),b=d[0],f=d[1].skip;function g(e){f()}return _e("Enter",g),_e("Space",g),we("mouseup",g),Object(n.useEffect)((function(){return function(){a(!1)}}),[l]),t?c.a.createElement("div",null,b):c.a.createElement("div",null)},Le=(a(741),a(340)),Te=function(e){var t=e.gameId,a=e.setScene,r=Object(m.f)(),i=Object(E.c)((function(e){return e.user})),l=Object(n.useState)(!1),s=Object(u.a)(l,2),o=s[0],d=s[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(ue.a,{onClick:function(){d(!0)},className:"ending_button"},"\ucc98\uc74c\uc73c\ub85c \ub3cc\uc544\uac00\uae30"),c.a.createElement(w.a,Object(Le.a)({title:"\u26a0 \uc8fc\uc758 \u26a0",visible:o,maskClosable:!1,closable:!1,centered:!0,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(ue.a,{key:"ok",type:"primary",onClick:function(){i&&g.a.get("/api/users/playing-list/clear").then((function(e){e.data.success?(d(!1),a({}),r.push({pathname:"/gameplay",state:{sceneId:e.data.teleportSceneId,gameId:t}})):(d(!1),alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."))}))}},"\ud655\uc778"),c.a.createElement(ue.a,{key:"cancel",onClick:function(){d(!1)}},"\ucde8\uc18c")),getContainer:".gamePlay__container"},"centered",!0),c.a.createElement("p",null,"\uccab \ud654\uba74\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4."),c.a.createElement("p",null,"\uc774\uc5b4\ud558\uae30\ub85c \ub3cc\uc544\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")))},De=function(e){var t=e.gameId,a=e.setScene,n=Object(m.f)(),r=Object(E.c)((function(e){return e.user}));return c.a.createElement(ue.a,{onClick:function(){r?g.a.get("/api/users/playing-list/pop").then((function(e){e.data.success?(a({}),n.push({pathname:"/gameplay",state:{sceneId:e.data.teleportSceneId,gameId:t}})):alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")})):alert("\ub85c\uadf8\uc778 \uc2dc \uc9c0\uc6d0\ub418\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.")},className:"ending_button"},"\uc774\uc804\uc73c\ub85c \ub3cc\uc544\uac00\uae30")},Be=function(e){var t=e.gameId,a=e.setScene;return c.a.createElement("div",{className:"ending_box"},c.a.createElement("div",null,"The End"),c.a.createElement("div",{className:"ending_button_container"},c.a.createElement(c.a.Fragment,null,c.a.createElement(Te,{key:0,gameId:t,setScene:a}),c.a.createElement(De,{key:1,gameId:t,setScene:a}))))},Me=function(e){var t=e.cut_name,a=e.cut_script,n=e.setIsTyping,r=e.isTyping,i=e.theme;return i="atorney",c.a.createElement(c.a.Fragment,null,a?c.a.createElement("div",{className:"text_window ".concat(i)},c.a.createElement("div",{className:"text_container ".concat(i)},c.a.createElement("div",{className:"name_block ".concat(i)},t),c.a.createElement("div",{className:"text_block ".concat(i)},c.a.createElement("div",{className:"text_line ".concat(i)}," ",r?c.a.createElement(Ie,{cut_script:a,setIsTyping:n}):a)))):c.a.createElement("div",{className:"text_line ".concat(i)}," ",r?c.a.createElement(Ie,{cut_script:" ",setIsTyping:n}):a))},Fe=function(e){var t=e.game_id,a=e.cut_name,n=e.cut_script,r=e.scene_next_list,i=e.scene_id,l=e.scene_depth,s=e.setIsTyping,o=e.isTyping,u=e.isEnding,m=e.isLastMotion,d=e.theme,b=e.setScene;d="atorney";var f=r.map((function(e,a){return c.a.createElement(R.b,{to:{pathname:"/gameplay",key:a,state:{gameId:t,sceneId:e.sceneId}},key:a,style:{textDecoration:"none"},className:"text_line_choice ".concat(d),onClick:function(){return b({})}},e.script)}));return c.a.createElement("div",{className:"text_window ".concat(d)},c.a.createElement(Me,{cut_name:a,cut_script:n,setIsTyping:s,isTyping:o,theme:d}),m&&c.a.createElement("div",{className:"choice_box ".concat(u," ").concat(d)},!0===u?c.a.createElement(Be,{gameId:t,setScene:b}):c.a.createElement(c.a.Fragment,null,f,r.length<4?c.a.createElement(ke,{scene_id:i,scene_depth:l,game_id:t,scene_next_list:r,theme:d}):c.a.createElement("div",null," "))))};a(1503);var Pe=function(e){var t=e.gameId,a=e.sceneId,r=e.trigger,i=e.setTrigger,l=Object(E.c)((function(e){return e.user})),s=Object(n.useState)(""),o=Object(u.a)(s,2),m=o[0],d=o[1],b=Object(n.useState)(""),f=Object(u.a)(b,2),p=f[0],v=f[1];return r?c.a.createElement("div",{className:"dislike_popup"},c.a.createElement("div",{className:"dislike_inner"},c.a.createElement("button",{className:"close_btn",onClick:function(){return i((function(e){return!e}))}},"close"),c.a.createElement("label",null,"Title"),c.a.createElement("input",{onChange:function(e){d(e.currentTarget.value)},value:m}),c.a.createElement("label",null,"Description"),c.a.createElement("textarea",{onChange:function(e){v(e.currentTarget.value)},value:p}),c.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault();var n={title:m,description:p,user:l.userData._id,sceneId:a,gameId:t};g.a.post("/api/complaint/save",n).then((function(e){e.data.success?(O.a.success("\uac10\uc0ac\ud569\ub2c8\ub2e4. \uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),i((function(e){return!e}))):O.a.error("\uc2e0\uace0\ud558\ub294\ub370 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}))}},"\uc2e0\uace0\ud558\uae30"))):""};a(1504);function ze(){var e=document.getElementsByClassName("HistoryMap_inner")[0],t=window.getComputedStyle(e).getPropertyValue("transform"),a="none"!==t?parseInt(t.split(",")[4]):0;e.style.transform="translate(".concat(a+250,"px, 0px)")}function Re(){var e=document.getElementsByClassName("HistoryMap_inner")[0],t=window.getComputedStyle(e).getPropertyValue("transform"),a="none"!==t?parseInt(t.split(",")[4]):0;e.style.transform="translate(".concat(a-250,"px, 0px)")}var Ae=[],He=1;var Ue=function(e){var t=e.userhistory,a=e.setTrigger,r=e.setScene,i=e.history,l=i.gameId,s=i.sceneId,o=Object(n.useState)([]),m=Object(u.a)(o,2),d=m[0],b=m[1],f=Object(n.useState)(!1),p=Object(u.a)(f,2),v=p[0],E=p[1];Object(n.useEffect)((function(){if(e.trigger)return g.a.get("/api/game/simple-scene-info").then((function(e){Ae=e.data.sceneinfo,b(Ae)})),function(){b([])}}),[e.trigger]);var h=d.map((function(e,t){return t===d.length-1?c.a.createElement("div",{className:"HistoryMap_scene",key:t+1,style:{border:"0.2em orange solid"}},c.a.createElement("div",{className:"HistoryMap_scene_num"}," #",t+1),c.a.createElement("img",{className:"HistoryMap_scene_img",src:e.background}),c.a.createElement("div",{className:"HistoryMap_scene_name"},e.name,":"),c.a.createElement("div",{className:"HistoryMap_scene_text"},'"',e.script,'"')):c.a.createElement("div",{className:"HistoryMap_scene",key:t+1,onClick:function(){return He=t+1,void E(!0)}},c.a.createElement("div",{className:"HistoryMap_scene_num"}," #",t+1),c.a.createElement("img",{className:"HistoryMap_scene_img",src:e.background}),c.a.createElement("div",{className:"HistoryMap_scene_name"},e.name,":"),c.a.createElement("div",{className:"HistoryMap_scene_text"},'"',e.script,'"'))}));return e.trigger?c.a.createElement("div",{className:"HistoryMap_popup"},c.a.createElement("div",{className:"close_btn",onClick:function(){a(!1)}},c.a.createElement(B,{className:"close_btn",src:"close_2",width:"45",height:"50",color:"#F5F5F5"})),c.a.createElement("div",{className:"HistoryMap-toleft_btn",onClick:ze},c.a.createElement(B,{src:"arrow_1",width:"100%",height:"100%",color:"#F5F5F5"})),c.a.createElement("div",{className:"HistoryMap-toright_btn",onClick:Re},c.a.createElement(B,{src:"arrow_1",width:"100%",height:"100%",color:"#F5F5F5"})),c.a.createElement("div",{className:"HistoryMap_inner",style:{width:15*Ae.length+"%"}},h),c.a.createElement(w.a,{title:"\uacbd\uace0",visible:v,onOk:function(){!function(e){var t=e.userhistory,a=e.gameId,n=e.sceneId,c=e.targetScene,r=e.setScene,i={data:{sceneIndex:c-1}};g.a.post("/api/game/refreshHistory",i).then((function(e){if(e.data.success){for(var i=document.getElementsByClassName("close_btn"),l=i.length-1;l>=0;l--)i[l].click();r({}),t.replace({pathname:"/gameplay",state:{sceneId:n[c-1],gameId:a}})}else O.a.error("Scene \ubcc0\uacbd \uc694\uccad \uc2e4\ud328")}))}({userhistory:t,gameId:l,sceneId:s,targetScene:He,setScene:r}),E(!1)},onCancel:function(){E(!1)},getContainer:".gamePlay__container",centered:!0},c.a.createElement("p",null,He," \ubc88\uc9f8 \uc52c\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4. \ub3cc\uc544\uac00\ub824\ub294 \uc52c\uae4c\uc9c0\uc758 \uae30\ub85d\uc740 \uc0ad\uc81c\ub429\ub2c8\ub2e4."))):null},Ge=(a(1505),0),Ve=1,We=2,Xe=3,qe=4,Qe=5,Ye=6,Ke=function(){switch(Object(E.c)((function(e){return e.gameplay.loadingType}))){case Ge:return null;case Ve:return c.a.createElement("div",{style:{animation:"1.5s ease-out 0s 1 basic"},className:"loading_page"},c.a.createElement(ee.a,{icon:te.h,className:"loading_icon"}));case We:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideLeft"},className:"loading_page"});case Xe:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideRight"},className:"loading_page"});case qe:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideUp"},className:"loading_page"});case Qe:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 slideDown"},className:"loading_page"});case Ye:return c.a.createElement("div",{style:{animation:"1s ease-out 0s 1 blackIn"},className:"loading_page"});default:return null}};function Ze(e){return{type:"load_empty_num",payload:void 0!==e.emptyNum?e.emptyNum:g.a.get("/api/game/getSceneInfo/".concat(e.sceneId)).then((function(e){if(e.data.success)return e.data.scene.sceneTmp.emptyNum}))}}function Je(){if("undefined"!==typeof document.fullscreenElement)return"fullscreenElement";if("undefined"!==typeof document.mozFullScreenElement)return"mozFullScreenElement";if("undefined"!==typeof document.msFullscreenElement)return"msFullscreenElement";if("undefined"!==typeof document.webkitFullscreenElement)return"webkitFullscreenElement";throw new Error("fullscreenElement is not supported by this browser")}a(1506);var $e=a(765),et=a.n($e),tt=a(764),at=a.n(tt),nt=a(763),ct=a.n(nt),rt=new Audio;rt.volume=.5;var it=new Audio;it.volume=.5;var lt=function(e){var t,a,r,i=Object(m.g)().state,l=i.gameId,s=i.sceneId,o=e.history,d=Object(E.b)(),b=Object(E.c)((function(e){return e.user})),f=Object(E.c)((function(e){return e.gameplay.isPause})),p=Object(n.useState)(window.innerWidth),v=Object(u.a)(p,2),h=v[0],_=v[1],y=Object(n.useState)(window.innerHeight),j=Object(u.a)(y,2),N=j[0],k=j[1],S=Object(n.useState)(0),w=Object(u.a)(S,2),x=w[0],C=w[1],I=Object(n.useState)({}),L=Object(u.a)(I,2),T=L[0],D=L[1],B=Object(n.useState)(!1),M=Object(u.a)(B,2),F=M[0],P=M[1],z=Object(n.useState)({}),R=Object(u.a)(z,2),A=R[0],U=R[1],G=Object(n.useState)(!1),V=Object(u.a)(G,2),W=V[0],X=V[1],q=Object(n.useState)(!1),Q=Object(u.a)(q,2),Y=Q[0],K=Q[1],Z=Object(n.useState)(0),J=Object(u.a)(Z,2),$=J[0],ae=J[1],ne=Object(n.useState)(0),ce=Object(u.a)(ne,2),re=ce[0],ie=ce[1],le=Object(n.useState)(!1),se=Object(u.a)(le,2),oe=se[0],ue=se[1],me=Object(E.c)((function(e){return e.sync.prevSceneId})),de=Object(n.useRef)(null);try{var be=function(e){var t=c.a.useState(null!=document[Je()]),a=Object(u.a)(t,2),n=a[0],r=a[1];return c.a.useLayoutEffect((function(){return document.onfullscreenchange=function(){return r(null!=document[Je()])},function(){return document.onfullscreenchange=void 0}})),[n,function(){null!=e.current&&e.current.requestFullscreen().then((function(){r(null!=document[Je()])})).catch((function(){r(!1)}))}]}(de),fe=Object(u.a)(be,2);t=fe[0],a=fe[1]}catch(ot){r="Fullscreen not supported",t=!1,a=void 0}_e("Enter",Ve),_e("Space",Ve),_e("Digit1",We),_e("Digit2",We),_e("Digit3",We),_e("Digit4",We),Object(n.useEffect)((function(){ca.off("accept_final_change"),ca.on("accept_final_change",(function(e){var t=e.sceneId,a=e.title,n=T.nextList?Object(Ee.a)(T.nextList):[];n.push({sceneId:t,script:a});var c=Object(ve.a)(Object(ve.a)({},T),{},{nextList:n});D(c)}))}),[T]);var ge=Object(n.useState)(.5),pe=Object(u.a)(ge,2),ye=pe[0],Oe=pe[1],ke=Object(n.useState)(!1),Se=Object(u.a)(ke,2),we=Se[0],xe=Se[1],Ce=Object(n.useRef)(.5),Ie=function(e){Oe(e),xe(0===e),rt.volume=e,it.volume=e},Le=Object(n.useState)(!0),Te=Object(u.a)(Le,2),De=Te[0],Be=Te[1];function ze(e){var t,a,n,c,r;(De&&Be(!1),null===T||void 0===T||null===(t=T.cutList[e])||void 0===t?void 0:t.bgm.music)&&(e>0&&T.cutList[e-1].bgm.music==(null===(n=T.cutList[e])||void 0===n?void 0:n.bgm.music)||(rt.pause(),rt.src=null===(c=T.cutList[e])||void 0===c?void 0:c.bgm.music,rt.play()));(null===T||void 0===T||null===(a=T.cutList[e])||void 0===a?void 0:a.sound.music)&&(it.pause(),it.src=null===(r=T.cutList[e])||void 0===r?void 0:r.sound.music,it.play())}var Re=Object(n.useState)(!0),Ae=Object(u.a)(Re,2),He=Ae[0],Ge=Ae[1];function Ve(e){var t,a;He||f||(x<(null===T||void 0===T||null===(t=T.cutList)||void 0===t?void 0:t.length)-1?(ze(x+1),C(x+1),Ge(!0)):x==(null===T||void 0===T||null===(a=T.cutList)||void 0===a?void 0:a.length)-1&&K(!0))}function We(e){if(x===T.cutList.length-1&&!f)if(T.nextList[parseInt(e.key)-1])o.replace({pathname:"/gameplay",state:{sceneId:T.nextList[parseInt(e.key)-1].sceneId,gameId:l}});else if(parseInt(e.key)-1===T.nextList.length){d(Ne(!0)),e.preventDefault();var t=document.getElementById("choice");t&&t.click()}}Object(n.useEffect)((function(){if(b&&b.userData){var e={objectId:s,userId:b.userData._id};g.a.post("/api/thumbsup/count",e).then((function(e){e.data.success&&(ue(e.data.isClicked),ie(e.data.thumbsup))}));var t={userId:b.userData._id,objectId:s};g.a.post("/api/view/",t).then((function(e){e.data.success&&ae(e.data.view)}))}}),[s,b]),Object(n.useEffect)((function(){ca.emit("leave room",{room:me}),ca.emit("room",{room:s}),d({type:"SAVE_PREV_SCENE",payload:{prevSceneId:s}.prevSceneId}),ca.off("empty_num_changed"),ca.on("empty_num_changed",(function(e){d(Ze({sceneId:s,emptyNum:e.emptyNum}))})),ca.emit("validate_empty_num",{scene_id:s})}),[s]),Object(n.useEffect)((function(){d(H(!1))}),[]),Object(n.useEffect)((function(){d(Ne(!(!W&&!F)))}),[W,F]),Object(n.useEffect)((function(){K(!1),g.a.get("/api/game/getnextscene/".concat(l,"/").concat(s)).then((function(t){if(t.data.success){var a={gameId:l,sceneId:t.data.sceneIdList};Ge(!0),U(a),C(0),rt.pause(),it.pause(),Be(!0),D(t.data.scene),d(Ne(!1)),d(je(0)),d(je(6))}else O.a.error("\uc798\ubabb\ub41c \uc811\uadfc\uc785\ub2c8\ub2e4. \ud55c ID\ub85c\ub294 \ud558\ub098\uc758 \uc2a4\ud1a0\ub9ac\ub9cc\uc744 \uc9c4\ud589\ud574\uc8fc\uc138\uc694."),e.history.replace("/game/".concat(l))}))}),[s]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){_(window.innerWidth),k(window.innerHeight)}))}),[window.innerWidth,window.inner]);var Xe,qe,Qe,Ye,$e,tt,nt,lt,st=t?0:.1;return Xe=.5625*h>N?{width:"".concat(N*(1-2*st)/.5625,"px"),height:"".concat(N*(1-2*st),"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(h*(1-2*st),"px"),height:"".concat(h*(1-2*st)*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")},Object(n.useEffect)((function(){return d(Ze({sceneId:s})),function(){rt.pause(),it.pause()}}),[]),void 0!==(null===T||void 0===T?void 0:T.cutList)?(0==x&&De&&ze(0),c.a.createElement("div",{className:"".concat(t?"gamePlay__container gamePlay__container_fullscreen":"gamePlay__container"),ref:de},c.a.createElement("div",{className:"".concat(t?"gamePlay__mainContainer_fullscreen":"gamePlay__mainContainer")},c.a.createElement("div",{className:"".concat(t?"backgroundImg_container_fullscreen":"backgroundImg_container"),style:Xe,onClick:function(e){return Ve()}},c.a.createElement(Ke,null),T.cutList[x]&&(null===(qe=T.cutList[x])||void 0===qe?void 0:qe.background)?c.a.createElement("img",{className:"gamePlay_backgroundImg",src:null===(Qe=T.cutList[x])||void 0===Qe?void 0:Qe.background,alt:"Network Error"}):c.a.createElement("div",null),c.a.createElement(he,{characterList:null===T||void 0===T||null===(Ye=T.cutList[x])||void 0===Ye?void 0:Ye.characterList}),x===T.cutList.length-1?c.a.createElement(Fe,{game_id:l,cut_name:null===($e=T.cutList[x])||void 0===$e?void 0:$e.name,cut_script:null===(tt=T.cutList[x])||void 0===tt?void 0:tt.script,scene_depth:T.depth,scene_id:T._id,scene_next_list:T.nextList,setIsTyping:Ge,isTyping:He,isEnding:T.isEnding,isLastMotion:Y,theme:T.theme,setScene:D}):c.a.createElement(Me,{cut_name:null===(nt=T.cutList[x])||void 0===nt?void 0:nt.name,cut_script:null===(lt=T.cutList[x])||void 0===lt?void 0:lt.script,setIsTyping:Ge,isTyping:He,theme:T.theme}),c.a.createElement(Ue,{userhistory:o,history:A,trigger:W,setTrigger:X,setScene:D}))),c.a.createElement("div",{className:"gamePlay__btn_container"},c.a.createElement("div",{className:"gamePlay__btn",onClick:function(){we?(xe(!1),Ie(Ce.current)):(Ce.current=ye,xe(!0),Ie(0))}},we?c.a.createElement(at.a,null):c.a.createElement(et.a,null)),c.a.createElement("div",{style:{width:"80px"}},c.a.createElement(ct.a,{min:0,max:1,step:.02,value:ye,onChange:function(e){Ie(e)}})),c.a.createElement("div",null,x===T.cutList.length-1&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:oe?"gamePlay__btnClicked":"gamePlay__btn",onClick:function(){if(b&&b.userData){var e={userId:b.userData._id,objectId:s};g.a.post("/api/thumbsup/",e).then((function(e){e.data.success&&(ue(e.data.isClicked),ie(e.data.thumbsup))}))}else O.a.error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")}},"\uc88b\uc544\uc694: ",re),c.a.createElement("button",{className:"gamePlay__btn"},"\uc870\ud68c\uc218: ",$)),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){return X((function(e){return!e}))}},"\ubbf8\ub2c8\ub9f5"),c.a.createElement("button",{className:"gamePlay__btn",onClick:function(){return P((function(e){return!e}))}},"\uc2e0\uace0")),r?c.a.createElement("button",{onClick:function(){return alert("Fullscreen is unsupported by this browser, please try another browser.")},className:"gamePlay__btn"},r):t?c.a.createElement("button",{onClick:function(){return document.exitFullscreen()},className:"gamePlay__btn"},c.a.createElement(ee.a,{icon:te.c})):c.a.createElement("button",{onClick:a,className:"gamePlay__btn"},c.a.createElement(ee.a,{icon:te.d}))),c.a.createElement(Pe,{sceneId:s,gameId:l,trigger:F,setTrigger:P}))):c.a.createElement("div",{className:"loader_container"},c.a.createElement("div",{className:"loader"},"Loading..."))},st=a(1553);a(743);var ot=function(e){var t=e.imgUrl,a=e.setBackgroundImg;return c.a.createElement("div",{className:"backSidebar_image_container",onClick:function(){a(t)}},c.a.createElement("img",{src:t,alt:"img",className:"backSidebar_image"}))};var ut=Object(n.memo)((function(e){var t,a=e.gameDetail,n=e.setBackgroundImg,r=e.onEssetModal,i=e.isFirstScene,l=e.isWriter,s=a.background.map((function(e,t){return c.a.createElement("div",{className:"backSidebar_box",key:"".concat(t)},c.a.createElement(ot,{imgUrl:e.image,setBackgroundImg:n}))}));return c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"backSidebar__container"},0===(null===a||void 0===a||null===(t=a.background)||void 0===t?void 0:t.length)&&c.a.createElement("div",null,(i.current||l)&&c.a.createElement(st.a,{onClick:r,className:"sidebar_add_esset_btn"}),c.a.createElement("div",{className:"sidebar_line"})),s))}));function mt(e){return{type:"select_character",payload:e}}function dt(e){for(var t,a=e.oldArray,n=e.index,c=0;c<a.length;c++)if(a[c].index===n){O.a.info("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),a.splice(c,1),t=Object(Ee.a)(a);break}return{type:"pop_character",payload:t}}function bt(e){for(var t,a=e.oldArray,n=e.characterSchema,c=0;c<(null===a||void 0===a?void 0:a.length);c++)if(a[c].index===n.index){t=[].concat(Object(Ee.a)(a.slice(0,c)),[Object(ve.a)(Object(ve.a)({},a[c]),{},{image:n.image})],Object(Ee.a)(a.slice(c+1,4)));break}return!t&&(null===a||void 0===a?void 0:a.length)>=3&&(O.a.info("\uc778\ubb3c\uc740 \ucd5c\ub300 \uc138\uba85\uae4c\uc9c0 \ucd94\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4."),t=a),{type:"push_character",payload:t=t||[].concat(Object(Ee.a)(a||[]),[n])}}function ft(e){return{type:"set_character_list",payload:e.CharacterList}}var gt=function(e){var t=e.character,a=e.index,n=Object(E.b)(),r=Object(E.c)((function(e){return e.character.CharacterList})),i=Object(E.c)((function(e){return e.character.characterSelected})),l=null===r||void 0===r?void 0:r.some((function(e){return e.index===a})),s=l?"selected":"";return c.a.createElement("div",{className:"characterSidebar_box ".concat(s),key:"".concat(a)},c.a.createElement("div",{className:"characterSidebar_image_box",onClick:function(){var e={index:a,image:t.image_array[0],posX:30,posY:15,reverse:0,size:90},c={oldArray:r,characterSchema:e};n(mt(Object(ve.a)(Object(ve.a)({},t),{},{index:a}))),l&&(null===i||void 0===i?void 0:i.index)===a?n(dt({oldArray:r,index:a})):n(bt(c))}},c.a.createElement("img",{src:t.image_array[0],alt:"img",className:"characterSidebar_image"})))};a(1509);var pt=Object(n.memo)((function(e){var t,a=e.gameDetail,n=e.setName,r=e.onEssetModal,i=e.isFirstScene,l=e.isWriter,s=a.character.map((function(e,t){return c.a.createElement(gt,{character:e,key:t,index:t,setName:n})}));return c.a.createElement("div",null,(i.current||l)&&c.a.createElement(st.a,{onClick:r,className:0===(null===a||void 0===a||null===(t=a.character)||void 0===t?void 0:t.length)?"charSidebar_add_esset_btn":"sidebar_add_esset_btn_side"}),c.a.createElement("div",{className:"characterSidebar__container"},s),c.a.createElement("div",{className:"characterSidebar_line"}))}));a(744);var vt=function(e){var t=e.bgm_audio,a=e.bgm,n=e.setBgmFile;return c.a.createElement("div",{className:"bgmSidebar_box",onClick:function(){n(a),t.src=a.music,t.play()}},a.name)};var Et=Object(n.memo)((function(e){var t,a=e.gameDetail,n=e.bgm_audio,r=e.setBgmFile,i=e.onEssetModal,l=e.isFirstScene,s=e.isWriter,o=a.bgm.map((function(e,t){return c.a.createElement("div",{className:"bgmSidebar_box",key:"".concat(t)},c.a.createElement(vt,{bgm_audio:n,bgm:e,setBgmFile:r}))}));return c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"bgmSidebar__container"},0===(null===a||void 0===a||null===(t=a.bgm)||void 0===t?void 0:t.length)&&c.a.createElement("div",null,(l.current||s)&&c.a.createElement(st.a,{onClick:i,className:"sidebar_add_esset_btn"}),c.a.createElement("div",{className:"sidebar_line"})),c.a.createElement("div",null,o)))}));var ht=function(e){var t=e.sound_audio,a=e.sound,n=e.setSoundFile;return c.a.createElement("div",{className:"bgmSidebar_box",onClick:function(){n(a),t.src=a.music,t.play()}},a.name)};var _t=Object(n.memo)((function(e){var t,a=e.gameDetail,n=e.sound_audio,r=e.setSoundFile,i=e.onEssetModal,l=e.isFirstScene,s=e.isWriter,o=a.sound.map((function(e,t){return c.a.createElement("div",{className:"bgmSidebar_box",key:"".concat(t)},c.a.createElement(ht,{sound_audio:n,sound:e,setSoundFile:r}))}));return c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"bgmSidebar__container"},0===(null===a||void 0===a||null===(t=a.sound)||void 0===t?void 0:t.length)&&c.a.createElement("div",null,(l.current||s)&&c.a.createElement(st.a,{onClick:i,className:"sidebar_add_esset_btn"}),c.a.createElement("div",{className:"sidebar_line"})),c.a.createElement("div",null,o)))})),yt=(a(215),function(e){var t=e.setTag,a=e.tag;return c.a.createElement("div",{className:"tabs"},c.a.createElement("div",{className:"".concat(1===a?"tab is-selected":"tab"),onClick:function(){return t(1)}},"\uce90\ub9ad\ud130"),c.a.createElement("div",{className:"".concat(2===a?"tab is-selected":"tab"),onClick:function(){return t(2)}},"\ubc30\uacbd"),c.a.createElement("div",{className:"".concat(3===a?"tab is-selected":"tab"),onClick:function(){return t(3)}},"\ubc30\uacbd\uc74c\uc545"),c.a.createElement("div",{className:"".concat(4===a?"tab is-selected":"tab"),onClick:function(){return t(4)}},"\ud6a8\uacfc\uc74c"))}),Ot=a(1554),jt=a(1555);a(1510);var Nt=function(e){var t,a=e.onDrop,n=e.multiple,r=e.maxSize,i=e.accept,l=e.blobURL,s=e.type,o=e.icon;return"background"===s||"thumbnail"===s?t="16 : 9 \ube44\uc728\uc744 \uad8c\uc7a5\ud569\ub2c8\ub2e4.":"character"===s?t="\ubc30\uacbd\uc774 \uc5c6\ub294 \uc0ac\uc9c4\uc744 \uad8c\uc7a5\ud569\ub2c8\ub2e4.":"bgm"!==s&&"sound"!==s||(t="\uc74c\uc6d0\uc744 \uc5c5\ub85c\ub4dc \ud574\uc8fc\uc138\uc694."),c.a.createElement(me.a,{onDrop:a,multiple:n,maxSize:r,accept:i},(function(e){var a=e.getRootProps,n=e.getInputProps;return c.a.createElement("div",Object.assign({className:"dropzone"},a()),c.a.createElement("input",n()),l?c.a.createElement("div",{className:"thumbnail__container"},c.a.createElement("img",{className:"thumbnail__img",src:l,alt:"thumbnail"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("p",{className:"thumbnail__msg"},c.a.createElement("b",null,"\ud30c\uc77c \uc5c5\ub85c\ub4dc")),"  "),"image"===o&&c.a.createElement(Ot.a,{className:"dropzone-icon"}),"audio"===o&&c.a.createElement(jt.a,{className:"dropzone-icon"}),"file"===o&&c.a.createElement(st.a,{className:"dropzone-icon"}),c.a.createElement("div",null,c.a.createElement("p",{className:"thumbnail__msg"},c.a.createElement("b",null,t)))))}))};a(1511);var kt=function(e){var t,a,r,i,l,s=e.blobGame,o=e.setBlobGame,m=e.charPageNum,d=e.setCharFileQueue,b=e.setCharBlobList,f=Object(n.useState)(""),g=Object(u.a)(f,2),p=g[0],v=g[1],E=Object(n.useState)(""),h=Object(u.a)(E,2),_=h[0],y=h[1],j=Object(n.useState)(0),N=Object(u.a)(j,2),k=N[0],S=N[1],w=Object(n.useRef)(0),C=function(e){o((function(t){return t.character[m.current].name=e.currentTarget.value,t})),S((function(e){return e+1}))},I=function(e){o((function(t){return t.character[m.current].description=e.currentTarget.value,t})),S((function(e){return e+1}))},L=function(e){for(var t=function(){if(!e[a])return O.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694."),{v:void 0};var t=URL.createObjectURL(e[a]);b((function(e){return[].concat(Object(Ee.a)(e),[t])})),"-1"===w.current?(o((function(e){return e.character=[].concat(Object(Ee.a)(e.character),[{name:"",description:"",image_array:[t]}]),e})),w.current=s.character.length-1):o((function(e){return e.character[w.current].image_array=[].concat(Object(Ee.a)(e.character[w.current].image_array),[t]),e}))},a=0;a<e.length;a++){var n=t();if("object"===typeof n)return n.v}d((function(t){return[].concat(Object(Ee.a)(t),[{index:Number(w.current),array:e}])})),S((function(e){return e+1}))};return Object(n.useEffect)((function(){if(s.character&&m.current<s.character.length){v((function(){var e=s.character[m.current].image_array[0];return c.a.createElement("div",null,c.a.createElement("div",{className:"characterTab_profile_image"},c.a.createElement("img",{className:"characterTab_image",src:e,alt:"img"})),c.a.createElement(x.a,null,c.a.createElement("input",{onChange:C,value:s.character[m.current].name,className:"characterTab_profile_name",placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),c.a.createElement("textarea",{onChange:I,value:s.character[m.current].description,className:"characterTab_profile_text",placeholder:"\uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})))}));var e=s.character[m.current].image_array.map((function(e,t){return c.a.createElement("div",{id:m.current,key:t,className:"characterTab_cards"},c.a.createElement("img",{className:"characterTab_image",src:e,alt:"img"}))}));y(e)}else v(""),y("")}),[k,s]),we("mousedown",(function(e){for(var t=0;t<e.path.length;t++)if(e.path[t].id)return void(w.current=e.path[t].id)})),c.a.createElement("div",{className:"characterTab-container"},(null===(t=s.character)||void 0===t?void 0:t.length)>0&&(null===(a=s.character)||void 0===a?void 0:a.length)!==m.current&&c.a.createElement("div",null,c.a.createElement("div",null,p),c.a.createElement("div",{className:"characterTab_cards_Box"},_),c.a.createElement("div",{className:"characterTab_char_dropzone",id:m.current},c.a.createElement(Nt,{onDrop:L,multiple:!0,maxSize:10485761,accept:"image/*",type:"character",icon:"image"})),s.character&&c.a.createElement("div",{className:"characterTab_pagenum"},m.current+1,"/",s.character.length)),(null===(r=s.character)||void 0===r?void 0:r.length)===m.current&&c.a.createElement("div",{className:"characterTab_empty_dropzone",id:-1},c.a.createElement(Nt,{onDrop:L,multiple:!0,maxSize:10485761,accept:"image/*",type:"character",icon:"image"}),c.a.createElement("div",{className:"characterTab_instruct"},"\uce90\ub9ad\ud130\ub97c \ucd94\uac00\ud574\uc8fc\uc138\uc694")),0!==m.current&&c.a.createElement("div",{className:"characterTab_leftarrow",onClick:function(){m.current--,S((function(e){return e+1}))}},c.a.createElement(B,{src:"arrow_1",width:"50",height:"50",color:"#222831"})),(null===(i=s.character)||void 0===i?void 0:i.length)>0&&(null===s||void 0===s||null===(l=s.character)||void 0===l?void 0:l.length)!==m.current&&c.a.createElement("div",{className:"characterTab_rightarrow",onClick:function(){m.current++,S((function(e){return e+1}))}},c.a.createElement(B,{src:"arrow_1",width:"50",height:"50",color:"#222831"})))};a(1512);var St=function(e){var t=e.gameDetail,a=e.setFileQueue,r=e.setTypeQueue,i=e.setBackBlobList,l=e.backBlobList,s=e.isInfo,o=Object(n.useState)(""),m=Object(u.a)(o,2),d=m[0],b=m[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),p=g[0],v=g[1];return Object(n.useEffect)((function(){t.background&&b(t.background.map((function(e,t){return c.a.createElement("div",{className:"backgroundTab_image_box",key:t},c.a.createElement("img",{className:"backgroundTab_image",src:e.image,alt:"img"}))})))}),[t]),Object(n.useEffect)((function(){l&&v(l.map((function(e,t){return c.a.createElement("div",{className:"backgroundTab_image_box",key:t},c.a.createElement("img",{className:"backgroundTab_image",src:e,alt:"img"}))})))}),[l]),s?c.a.createElement("div",{className:"backgroundTab_container_info"},c.a.createElement("div",{className:"backgroundTab_Box_info"},c.a.createElement("div",null,d," ",p))):c.a.createElement("div",{className:"backgroundTab_container"},c.a.createElement("div",{className:"backgroundTab_dropzone"},c.a.createElement(Nt,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void O.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(Ee.a)(a),[e[t]])})),r((function(e){return[].concat(Object(Ee.a)(e),[1])})),i((function(a){return[].concat(Object(Ee.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"image/*",type:"background",icon:"image"})),c.a.createElement("div",{className:"backgroundTab_Box"},c.a.createElement("div",null,d," ",p)))};a(745);var wt=function(e){var t=e.gameDetail,a=e.setFileQueue,r=e.setTypeQueue,i=e.setBgmBlobList,l=e.bgmBlobList,s=e.setBgmBlobNames,o=e.bgmBlobNames,m=Object(n.useState)([]),d=Object(u.a)(m,2),b=d[0],f=d[1],g=Object(n.useState)([]),p=Object(u.a)(g,2),v=p[0],E=p[1];return Object(n.useEffect)((function(){t.bgm&&f(t.bgm.map((function(e,t){return c.a.createElement("div",{className:"bgmTab_text_box",key:t},e.name)})))}),[t]),Object(n.useEffect)((function(){l&&E(l.map((function(e,t){return c.a.createElement("div",{className:"bgmTab_text_box",key:t},o[t].name)})))}),[l]),c.a.createElement("div",{className:"bgmTab_container"},c.a.createElement("div",{className:"bgmTab_dropzone"},c.a.createElement(Nt,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void O.a.error("10MB \uc774\ud558\uc758 \uc74c\uc6d0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(Ee.a)(a),[e[t]])})),r((function(e){return[].concat(Object(Ee.a)(e),[2])})),s((function(a){return[].concat(Object(Ee.a)(a),[e[t]])})),i((function(a){return[].concat(Object(Ee.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"audio/*",type:"bgm",icon:"audio"})),c.a.createElement("div",{className:"bgmTab_Box"},0!==b&&c.a.createElement("div",null,b),0!==v&&c.a.createElement("div",null,v)))};var xt=function(e){var t=e.gameDetail,a=e.setFileQueue,r=e.setTypeQueue,i=e.setSoundBlobList,l=e.soundBlobList,s=e.setSoundBlobNames,o=e.soundBlobNames,m=Object(n.useState)([]),d=Object(u.a)(m,2),b=d[0],f=d[1],g=Object(n.useState)([]),p=Object(u.a)(g,2),v=p[0],E=p[1];return Object(n.useEffect)((function(){t.sound&&f(t.sound.map((function(e,t){return c.a.createElement("div",{className:"bgmTab_text_box",key:t},e.name)})))}),[t]),Object(n.useEffect)((function(){l&&E(l.map((function(e,t){return c.a.createElement("div",{className:"bgmTab_text_box",key:t},o[t].name)})))}),[l]),c.a.createElement("div",{className:"bgmTab_container"},c.a.createElement("div",{className:"bgmTab_dropzone"},c.a.createElement(Nt,{onDrop:function(e){for(var t=0;t<e.length;t++){if(!e[t])return void O.a.error("10MB \uc774\ud558\uc758 \uc74c\uc6d0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");a((function(a){return[].concat(Object(Ee.a)(a),[e[t]])})),r((function(e){return[].concat(Object(Ee.a)(e),[3])})),s((function(a){return[].concat(Object(Ee.a)(a),[e[t]])})),i((function(a){return[].concat(Object(Ee.a)(a),[URL.createObjectURL(e[t])])}))}},multiple:!0,maxSize:10485761,accept:"audio/*",type:"sound",icon:"audio"})),c.a.createElement("div",{className:"bgmTab_Box"},0!==b&&c.a.createElement("div",null,b),0!==v&&c.a.createElement("div",null,v)))},Ct=a(454),It=a.n(Ct),Lt=(a(156),function(e){var t=e.gameDetail,a=e.gameId,r=e.visible,i=e.setTag,l=e.tag,s=e.setReload,o=Object(n.useState)([]),m=Object(u.a)(o,2),d=m[0],b=m[1],f=Object(n.useState)([]),p=Object(u.a)(f,2),v=p[0],E=p[1],h=Object(n.useState)([]),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)([]),k=Object(u.a)(N,2),S=k[0],x=k[1],C=Object(n.useState)([]),I=Object(u.a)(C,2),L=I[0],T=I[1],D=Object(n.useState)([]),B=Object(u.a)(D,2),M=B[0],F=B[1],P=Object(n.useState)([]),z=Object(u.a)(P,2),R=z[0],A=z[1],H=Object(n.useState)([]),U=Object(u.a)(H,2),G=U[0],V=U[1],W=Object(n.useRef)(0),X=Object(n.useState)([]),q=Object(u.a)(X,2),Q=q[0],Y=q[1],K=Object(n.useState)([]),Z=Object(u.a)(K,2),J=Z[0],$=Z[1];Object(n.useEffect)((function(){t&&V(It.a.cloneDeep(t))}),[t]);var ee=function(){J.forEach((function(e){e&&URL.revokeObjectURL(e)})),y.forEach((function(e){e&&URL.revokeObjectURL(e)})),S.forEach((function(e){e&&URL.revokeObjectURL(e)})),M.forEach((function(e){e&&URL.revokeObjectURL(e)}))},te=!1,ae=function(){var e,t;Q.length?function(){var a=Array.from({length:G.character.length},(function(){return 0})),n=new FormData;for(e=0;e<G.character.length;e++)for(t=0;t<Q.length;t++)Q[t].index===e&&(a[e]+=Q[t].array.length,Q[t].array.forEach((function(e){n.append("files",e)})));g.a.post("/api/game/uploadfile",n,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?ne(a,e.data.files):alert("\uce90\ub9ad\ud130 DB \uc5c5\ub85c\ub4dc \uc2e4\ud328")}))}():ne(null,null)},ne=function(e,n){for(var c=0,r=0;r<G.character.length;r++)if(t.character[r]||t.character.push({name:"",description:"",image_array:[]}),t.character[r].name=G.character[r].name,t.character[r].description=G.character[r].description,e){for(var l=c;l<c+e[r];l++)t.character[r].image_array.push(n[l].location);c+=e[r]}var o={gameId:a,character:t.character};g.a.post("/api/game/putCharDB",o).then((function(e){e.data.success?d.length||(s((function(e){return e+1})),i(0)):O.a.error("DB \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328")}))},ce=function(){var e=new FormData;d.forEach((function(t){e.append("files",t)}));g.a.post("/api/game/uploadfile",e,{header:{encrpyt:"multipart/form-data"}}).then((function(e){e.data.success?re(e.data.files):alert("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}))},re=function(e){for(var t={gameId:a,background:[],bgm:[],sound:[]},n=0;n<e.length;n++)switch(v[n]){case 1:t.background.push({name:e[n].originalname,image:e[n].location});break;case 2:t.bgm.push({name:e[n].originalname,music:e[n].location});break;case 3:t.sound.push({name:e[n].originalname,music:e[n].location});break;default:O.a.error("\uc815\uc758\ub418\uc9c0 \uc54a\uc740 \uc5c5\ub85c\ub4dc \ubc84\ud2bc\uc785\ub2c8\ub2e4.")}g.a.post("/api/game/putDB",t).then((function(e){e.data.success?(s((function(e){return e+1})),i(0)):O.a.error("DB \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328")}))};return c.a.createElement(w.a,{className:"scenemake_modal",visible:r,okText:"Upload",onCancel:function(){ee(),i(0)},onOk:function(){te||(te=!0,ee(),ae(),d.length&&ce())},width:1500,closable:!1,keyboard:!1,maskClosable:!1,style:{top:50}},c.a.createElement("div",{className:"sceenmake_modal_container"},c.a.createElement(yt,{setTag:i,tag:l}),1===l&&c.a.createElement(kt,{blobGame:G,setBlobGame:V,charPageNum:W,setCharFileQueue:Y,setCharBlobList:$}),2===l&&c.a.createElement(St,{gameDetail:t,setFileQueue:b,setTypeQueue:E,setBackBlobList:j,backBlobList:y}),3===l&&c.a.createElement(wt,{gameDetail:t,setFileQueue:b,setTypeQueue:E,setBgmBlobList:x,bgmBlobList:S,setBgmBlobNames:T,bgmBlobNames:L}),4===l&&c.a.createElement(xt,{gameDetail:t,setFileQueue:b,setTypeQueue:E,setSoundBlobList:F,soundBlobList:M,setSoundBlobNames:A,soundBlobNames:R})))}),Tt=(a(1513),S.a.TextArea,[{value:0,label:"\uc0b4\uc544\ub0a8\uae30"},{value:1,label:"\ub85c\ub9e8\uc2a4"},{value:2,label:"\uc2a4\ud1a0\ub9ac"},{value:3,label:"\ucd94\ub9ac"},{value:4,label:"\ubcd1\ub9db"}]),Dt=function(e){var t=e.gameId,a=e.visible,r=e.setUploadModalState,i=e.onSubmit_saveScene,l=e.defaultTitle,m=e.defaultDescription,d=Object(E.c)((function(e){return e.user})),b=Object(n.useState)({defaultTitle:l}),f=Object(u.a)(b,2),p=f[0],v=f[1],h=Object(n.useState)({defaultDescription:m}),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)(0),k=Object(u.a)(N,2),S=k[0],C=(k[1],Object(n.useState)(Tt[0].label)),I=Object(u.a)(C,2),L=I[0],T=I[1],D=Object(n.useState)(""),B=Object(u.a)(D,2),M=B[0],F=B[1],P=Object(n.useState)([]),z=Object(u.a)(P,2),R=z[0],A=z[1];Object(n.useEffect)((function(){v(l),j(m)}),[l,m]);var H=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==p&&""!==y&&""!==M){e.next=4;break}return O.a.error("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),e.abrupt("return");case 4:U(),i();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return URL.revokeObjectURL(M),t=new FormData,a={header:{encrpyt:"multipart/form-data"}},R.forEach((function(e){t.append("files",e)})),e.next=6,g.a.post("/api/game/uploadfile",t,a).then((function(e){e.data.success?G(e.data.files[0].location):O.a.error("\uc5c5\ub85c\ub4dc \uc2e4\ud328")}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={gameId:t,creator:d.userData._id,title:p,description:y,thumbnail:a,privacy:S,category:L,writer:[d.userData._id]},e.next=3,g.a.post("/api/game/uploadgameInfo",n).then((function(e){e.data.success||O.a.error("game\uc81c\uc791 \uc2e4\ud328")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(w.a,{className:"scenemake_modal",visible:a,okText:"\uc5c5\ub85c\ub4dc",cancelText:"\ucde8\uc18c",onCancel:function(){M&&URL.revokeObjectURL(M),r(!1)},onOk:H,width:1e3,centered:!0,closable:!1,style:{top:10},bodyStyle:{height:"590px"}},c.a.createElement("div",{className:"scenemake_modal_form_container"},c.a.createElement("h4",null,c.a.createElement("b",null,"\uac8c\uc784 \uc5c5\ub85c\ub4dc")),c.a.createElement(x.a,{onSubmit:H},c.a.createElement("div",{className:"scenemake_modal_form"},c.a.createElement("div",{className:"scenemake_dropzone_container"},c.a.createElement(Nt,{onDrop:function(e){e[0]?(URL.revokeObjectURL(M),F(URL.createObjectURL(e[0])),A(e)):O.a.error("10MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.")},multiple:!1,maxSize:10485761,accept:"image/*",blobURL:M,type:"thumbnail",icon:"image"}))),c.a.createElement("div",{className:"scenemake_modal_detail"},c.a.createElement("div",{className:"scenemake_modal_detail_title_container"},c.a.createElement("h4",null,c.a.createElement("b",null,"\uc81c\ubaa9")),c.a.createElement("textarea",{maxLength:30,className:"scenemake_modal_detail_title",onChange:function(e){v(e.currentTarget.value.substr(0,50))},value:p})),c.a.createElement("div",{className:"scenemake_modal_detail_description_container"},c.a.createElement("h4",null,c.a.createElement("b",null,"\uac8c\uc784 \uc124\uba85")),c.a.createElement("textarea",{maxLength:1e3,className:"scenemake_modal_detail_description",rows:"4",onChange:function(e){j(e.currentTarget.value)},value:y})),c.a.createElement("div",{className:"scenemake_modal_detail_category_container"},c.a.createElement("select",{className:"scenemake_modal_category",onChange:function(e){var t=e.currentTarget.value;T(e.currentTarget[t].text)}},Tt.map((function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)}))))))))},Bt=(a(1514),function(e){var t=e.isEnding,a=e.visible,r=e.setEndingModalState,i=e.onSubmit_saveScene,l=Object(n.useState)(!1),s=Object(u.a)(l,2),o=s[0],m=s[1],d=function(){r(!1)};return c.a.createElement(w.a,{className:"scenemake_modal",title:"\uc9c4\ud589 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",visible:a,width:900,onCancel:d,centered:!0,closable:!1,footer:null,bodyStyle:{height:"370px",display:"flex",justifyContent:"space-around"}},c.a.createElement("div",{className:"ending_modal_cancel_btn",onClick:d},"X"),c.a.createElement("div",{className:"ending_modal_choice_btn",onClick:function(e){e.preventDefault(),t.current=!1,i(),r(!1)}},c.a.createElement(M,null),"\uc120\ud0dd\uc758 \uae38"),c.a.createElement("div",{className:"ending_modal_ending_btn",onClick:function(){return m(!0)}},c.a.createElement(F,null),"\uc5d4\ub529"),c.a.createElement(w.a,{visible:o,onOk:function(e){e.preventDefault(),t.current=!0,i()},onCancel:function(){return m(!1)},centered:!0,closable:!1,width:650,bodyStyle:{height:"170px",display:"flex"}},c.a.createElement("div",{className:"ending_modal_warning_sign"},c.a.createElement("svg",{color:"#faad14",viewBox:"64 64 896 896",focusable:"false",className:"","data-icon":"exclamation-circle",width:"20px",height:"20px",fill:"currentColor","aria-hidden":"true"},c.a.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}),c.a.createElement("path",{d:"M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}))),c.a.createElement("div",{className:"ending_modal_warning_textarea"},c.a.createElement("h2",null,"\uc8fc\uc758!"),c.a.createElement("br",null),c.a.createElement("h3",null,"ENDING \uccb4\ud06c \uc2dc, \uc774 \uac8c\uc784\uc758 \uc5d4\ub529\uc73c\ub85c \uc5c5\ub85c\ub4dc \ub429\ub2c8\ub2e4."),c.a.createElement("h3",null,"\ub530\ub77c\uc11c \uc774 \uc52c\uc5d0 \uc5f0\uacb0\ub418\ub294 \uc52c\uc744 \ub354\uc774\uc0c1 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))))}),Mt=(a(1515),{}),Ft=function(e,t,a,n){e in Mt||(Mt[e]={}),t in Mt[e]||(Mt[e][t]=[]),Mt[e][t].push([a,n]),e.addEventListener(t,a,n)},Pt=function(e,t){if(e in Mt){var a=Mt[e];if(t in a)for(var n=a[t],c=n.length;c--;){var r=n[c];e.removeEventListener(t,r[0],r[1])}}};var zt=Object(n.memo)((function(e){var t=Object(E.b)(),a=Object(E.c)((function(e){return e.character.CharacterList})),r=e.charSchema,i=e.GameCharacterList,l=e.index,s=Object(n.useRef)(),o=Object(n.useRef)(),m=Object(n.useState)(!0),d=Object(u.a)(m,2),b=d[0],f=(d[1],Object(n.useState)(!0)),g=Object(u.a)(f,2),p=g[0],v=g[1],_=Object(n.useState)(!1),y=Object(u.a)(_,2),O=y[0],j=y[1],N=Object(n.useState)(0),k=Object(u.a)(N,2),S=k[0],w=k[1],x=document.getElementById("backgroundImg_container"),C=[0,0],I=!1;function L(e){var t=[e.pageX,e.pageY];if(I&&b&&p){if(C[0]-e.pageX>3||C[1]-e.pageY>3||C[0]-e.pageX<-3||C[1]-e.pageY<-3){var a=x.offsetWidth,n=x.offsetHeight,c=Number(s.current.style.left.replace(/%/g,"")),r=Number(o.current.style.top.replace(/%/g,"").replace(/px/g,"")),i=c+100*(e.pageX-C[0])/a,u=r+100*(e.pageY-C[1])/n;s.current.style.left=String(i)+"%",o.current.style.top=String(u)+"%",C=t}}else if(I&&b&&O&&(C[0]-e.pageX>7||C[0]-e.pageX<-7)){var m=document.getElementById("".concat(l)).offsetWidth,d=Number(o.current.style.height.replace(/%/g,"")),f=0;(f=(C[0],d*(m-1*(C[0]-t[0]))/m))>20&&(o.current.style.height=String(f)+"%"),C=t}w(document.getElementById("".concat(l)).offsetWidth),e.stopPropagation(),e.preventDefault()}h((function(){var e;return w(null===(e=document.getElementById("".concat(l)))||void 0===e?void 0:e.offsetWidth)})),Object(n.useEffect)((function(){return function(){var e;w(null===(e=document.getElementById("".concat(l)))||void 0===e?void 0:e.offsetWidth)}}),[a]),Object(n.useEffect)((function(){if(x)return w(document.getElementById("".concat(l)).offsetWidth),function(){Pt(x,"mousemove"),Pt(x,"mouseup")}}),[a]);var T=function(e){x&&(Ft(x,"mousemove",L,!1),Ft(x,"mouseup",D,!1),C=[e.pageX,e.pageY],I=!0,t(mt(Object(ve.a)(Object(ve.a)({},i[r.index]),{},{index:r.index}))))},D=function(e){Pt(x,"mousemove"),Pt(x,"mouseup"),t(function(e){var t=e.oldArray,a=e.data,n=e.index;return{type:"update_character",payload:[].concat(Object(Ee.a)(t.slice(0,n)),[Object(ve.a)(Object(ve.a)({},t[n]),a)],Object(Ee.a)(t.slice(n+1,4)))}}({oldArray:a,data:{posX:Number(s.current.style.left.replace(/%/g,"")),posY:Number(o.current.style.top.replace(/%/g,"").replace(/px/g,"")),size:Number(o.current.style.height.replace(/%/g,""))},index:l})),C=[e.pageX,e.pageY],I=!1,j(!1),v(!0)},B=function(e){t(function(e){for(var t=e.oldArray,a=e.index,n=e.num,c=t.length-1,r=Object(Ee.a)(t),i=1;i<c+1;i++)if(r[i].index===a)if("double"===n){var l=[r[0],r[i]];r[i]=l[0],r[0]=l[1]}else{var s=[r[i-1],r[i]];r[i]=s[0],r[i-1]=s[1]}return{type:"order_character",payload:r}}({oldArray:a,index:r.index,num:e}))};return c.a.createElement("div",{ref:s,key:l,className:"CharacterBlock",style:{left:"".concat(r.posX,"%")}},c.a.createElement("div",{ref:o,className:"character__container",style:{height:"".concat(r.size,"%"),top:"".concat(r.posY,"%")}},c.a.createElement("img",{onMouseDown:T,className:"characterImg_clicked",id:"".concat(l),src:r.image,alt:"img"}),S&&c.a.createElement(c.a.Fragment,null,c.a.createElement(ee.a,{icon:te.i,className:"bttn btn_character_delete",style:{left:"".concat(S-17,"px")},onClick:function(){t(dt({oldArray:a,index:r.index}))}}),c.a.createElement(ee.a,{icon:te.a,className:"bttn btn_character_Doubledown",style:{left:"".concat(S-34,"px")},onClick:function(){B("double")}}),c.a.createElement(ee.a,{icon:te.b,className:"bttn btn_character_down",style:{left:"".concat(S-51,"px")},onClick:function(){return B("")}}),c.a.createElement("div",{className:"".concat(O?"bttn btn_sizing_clicked":"bttn btn_sizing"),onMouseOver:function(e){v(!1),j(!0)},onMouseOut:function(e){v(!0),j(!1)},onMouseDown:T,style:{left:"".concat(S-3,"px")}}))))})),Rt=(a(1516),Object(n.memo)((function(e){var t=e.GameCharacterList,a=Object(E.c)((function(e){return e.character.CharacterList})),n=null===a||void 0===a?void 0:a.map((function(e,a){return c.a.createElement("div",{key:e.index},c.a.createElement(zt,{GameCharacterList:t,index:a,charSchema:e}))}));return(null===a||void 0===a?void 0:a.length)>0&&c.a.createElement("div",{className:"CharacterBlocks",id:"CharacterBlocks"},n)})));a(1517);var At=Object(n.memo)((function(e){var t,a=e.setName,n=e.character,r=e.GameCharacterList,i=Object(E.b)(),l=Object(E.c)((function(e){return e.character.CharacterList})),s=(null===l||void 0===l||l.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",{className:"characterList_Info",onClick:function(){!function(e){a(r[e].name),i(mt(Object(ve.a)(Object(ve.a)({},r[e]),{},{index:e})))}(e.index)}},c.a.createElement("img",{src:null===e||void 0===e?void 0:e.image,alt:"",className:"characterList_image_height"})),c.a.createElement("div",null,null===e||void 0===e?void 0:e.name,"\uc774\ub984 \uc0ad\uc81c"))})),null===n||void 0===n||null===(t=n.image_array)||void 0===t?void 0:t.map((function(e,t){return c.a.createElement("div",{key:t,className:"image_array__box",onClick:function(){!function(e,t){var c={index:n.index,image:t,posX:30,posY:15,reverse:0,size:90};i(bt({oldArray:l,characterSchema:c})),a(null===n||void 0===n?void 0:n.name)}(0,e)}},c.a.createElement("img",{src:e,alt:"",className:"image_array_image"}))})));return c.a.createElement("div",{className:"image_array__container"},s)}));a(1518);var Ht=Object(n.memo)((function(e){var t=e.GameCharacterList,a=e.setName,r=Object(E.b)(),i=Object(E.c)((function(e){return e.character.CharacterList})),l=Object(E.c)((function(e){return e.character}));h((function(){r({type:"detach_character"})}));var s=Object(n.useState)(!1),o=Object(u.a)(s,2),m=(o[0],o[1]);return Object(n.useEffect)((function(){for(var e=0,t=0;t<(null===i||void 0===i?void 0:i.length);t++)if(i[t].index===l.characterSelected.index){e=1;break}m(1===e)}),[l,i]),c.a.createElement("div",null,c.a.createElement("div",{className:"modal"},c.a.createElement(At,{setName:a,GameCharacterList:t,character:l.characterSelected})))}));a(746),a(1519);var Ut=Object(n.memo)((function(e){var t=e.CutList,a=e.CutNumber,n=e.displayCut,r=e.setCutNumber,i=e.Hover,l=(e.setHover,e.EmptyCutList),s=e.saveCut,o=function(e){if(a>29)return n(e),void r(e);a!==e&&(s(),n(e),r(e))},u=t.map((function(e,t){return a===t?c.a.createElement("div",{className:"scene__CurrentSceneBox",key:"".concat(t)}):i?c.a.createElement("div",{className:"scene__SceneBox_color",key:"".concat(t),onMouseOver:function(){return o(t)}}):c.a.createElement("div",{className:"scene__SceneBox_color",key:"".concat(t),onClick:function(){return o(t)}})})),m=l.map((function(e,n){return a-t.length===n?c.a.createElement("div",{className:"scene__CurrentSceneBox",key:"".concat(n)}):c.a.createElement("div",{className:"scene__EmptySceneBox",key:"".concat(n)})}));return c.a.createElement("div",{className:"box sceneBox"},u,m)})),Gt=a(767),Vt=a.n(Gt),Wt=a(1556),Xt=a(1557),qt=(a(187),new Audio),Qt=new Audio,Yt=a(156),Kt=function(e){var t,a=Object(E.b)(),r=Object(m.f)(),i=Object(m.g)(),l=i.state,d=l.gameId,b=l.sceneId;void 0===i.state&&window.history.back(),O.a.config({maxCount:2});var f,p=Object(E.c)((function(e){return e.user})),v=Object(E.c)((function(e){return e.character.CharacterList})),h=Object(n.useState)(window.innerWidth),_=Object(u.a)(h,2),y=_[0],j=_[1],N=Object(n.useState)(window.innerHeight),k=Object(u.a)(N,2),S=k[0],w=k[1],x=Object(n.useState)({}),C=Object(u.a)(x,2),I=(C[0],C[1]),L=Object(n.useState)(0),T=Object(u.a)(L,2),D=T[0],M=T[1],F=Object(n.useState)(!1),P=Object(u.a)(F,2),z=P[0],R=P[1],A=Object(n.useState)(!1),U=Object(u.a)(A,2),G=U[0],V=U[1],W=Object(n.useState)(0),X=Object(u.a)(W,2),q=X[0],Q=X[1],Y=Object(n.useState)(!0),K=Object(u.a)(Y,2),Z=K[0],J=K[1],$=Object(n.useState)("".concat(Yt.STORAGE,"/uploads/defaultBackground.png")),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(u.a)(ne,2),re=ce[0],ie=ce[1],le=Object(n.useState)(""),se=Object(u.a)(le,2),oe=se[0],ue=se[1],me=Object(n.useState)(null),de=Object(u.a)(me,2),be=de[0],fe=de[1],ge=Object(n.useState)({name:"",music:""}),pe=Object(u.a)(ge,2),ve=pe[0],he=pe[1],ye=Object(n.useState)({name:"",music:""}),Oe=Object(u.a)(ye,2),Ne=Oe[0],ke=Oe[1],Se=Object(n.useRef)(!1),we=Object(n.useState)(0),xe=Object(u.a)(we,2),Ce=xe[0],Ie=xe[1],Le=Object(n.useState)(0),Te=Object(u.a)(Le,2),De=Te[0],Be=Te[1],Fe=Object(n.useState)(!1),Pe=Object(u.a)(Fe,2),ze=Pe[0],Re=Pe[1],Ae=Object(n.useState)([]),He=Object(u.a)(Ae,2),Ue=He[0],Ge=He[1],Ve=Object(n.useState)(Array.from({length:30},(function(){return 0}))),We=Object(u.a)(Ve,2),Xe=We[0],qe=We[1];!function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],r=a[1];c||(e(),r(!0))}((function(){a(ft({CharacterList:[]}))})),Object(n.useEffect)((function(){a(H(!1))}),[]),Object(n.useEffect)((function(){var t,a,n,c;p.userData&&(ca.emit("leave room",{room:null===(t=p.userData)||void 0===t||null===(a=t._id)||void 0===a?void 0:a.toString()}),ca.emit("room",{room:null===(n=p.userData)||void 0===n||null===(c=n._id)||void 0===c?void 0:c.toString()}));ca.off("timeout_making"),ca.on("timeout_making",(function(t){e.history.replace("/")}))}),[p]),Object(n.useEffect)((function(){Object(o.a)(s.a.mark((function t(){var n,c,r,i,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("/api/game/getSceneInfo/".concat(b));case 2:return n=t.sent,t.next=5,g.a.post("/api/game/scene/validate",{sceneId:b,gameId:d,isMaking:!0});case 5:if(c=t.sent,!n.data.success||!c.data.success){t.next=10;break}f=n.data.scene,t.next=12;break;case 10:return e.history.replace("/"),t.abrupt("return");case 12:fe(f.writer),r=new Date(f.createdAt).getTime()+36e5,Ie(r),f.cutList.length?(f.isFirst&&(Se.current=!0),Ge(f.cutList),i=f.cutList[0],a(ft({CharacterList:i.characterList})),ae(i.background),ue(i.name),ie(i.script),Be(f.cutList.length-1),a(je(0)),a(je(1))):f.isFirst?Se.current=!0:(l={sceneId:f.prevSceneId},g.a.post("/api/scene/scenedetail",l).then((function(e){if(e.data.success){var t=e.data.lastCut;a(ft({CharacterList:t.characterList})),ae(t.background),ue(t.name),a(je(0)),a(je(1))}else O.a.error("\uc774\uc804 Scene\uc758 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))),Q((function(e){return e+1}));case 17:case"end":return t.stop()}}),t)})))()}),[]);var Qe=Object(n.useRef)(),Ye=Object(n.useRef)(),Ze=Object(n.useRef)(),Je=Object(n.useRef)(),$e=Object(n.useRef)(),et=Object(n.useRef)(),tt=function(e){at(),e.current.style.display="block"},at=function(){Qe.current.style.display="none",Ye.current.style.display="none",Ze.current.style.display="none",Je.current.style.display="none"},nt=Object(n.useRef)(1),ct=function(){J(!Z)};_e("Enter",(function(e){et.current===document.activeElement?$e.current.focus():$e.current===document.activeElement&&lt(e)}));var rt=function(){var e={characterList:v,background:te,script:re,name:oe,bgm:ve,sound:Ne};ke({name:"",music:""}),Ge((function(t){return[].concat(Object(Ee.a)(t.slice(0,De)),[e],Object(Ee.a)(t.slice(De+1,31)))})),Ue.length===De&&qe((function(e){return Object(Ee.a)(e.slice(0,Xe.length-1))}))},it=function(e){var t,n,c,r,i,l,s,o,u,m;(a(ft({CharacterList:null===(t=Ue[e])||void 0===t?void 0:t.characterList})),ae(null===(n=Ue[e])||void 0===n?void 0:n.background),ie(null===(c=Ue[e])||void 0===c?void 0:c.script),ue(null===(r=Ue[e])||void 0===r?void 0:r.name),he(null===(i=Ue[e])||void 0===i?void 0:i.bgm),ke(null===(l=Ue[e])||void 0===l?void 0:l.sound),null===(s=Ue[e])||void 0===s?void 0:s.bgm.music)?(qt.src=null===(u=Ue[e])||void 0===u?void 0:u.bgm.music,qt.play()):qt.pause();(null===(o=Ue[e])||void 0===o?void 0:o.sound.music)?(Qt.src=null===(m=Ue[e])||void 0===m?void 0:m.sound.music,Qt.play()):Qt.pause()},lt=function(e){e.preventDefault(),De>=29?O.a.error("\ub354\uc774\uc0c1 Cut\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):(24===De&&O.a.warning("\uc0dd\uc131 \uac00\ub2a5\ud55c Cut\uc774 5\uac1c \ub0a8\uc558\uc2b5\ub2c8\ub2e4."),rt(),De<Ue.length-1?it(De+1):ie(""),Be((function(e){return e+1})),$e.current.focus())},st=Object(n.useRef)(!1),ot=function(){var t=Object(o.a)(s.a.mark((function t(n){var c,i,l,o,u,m=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=m.length>1&&void 0!==m[1]?m[1]:0,!(Ue.length<1||1===Ue.length&&Ue[De])){t.next=4;break}return O.a.error("\ucd5c\uc18c 2\uac1c\uc758 \ucef7\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694."),t.abrupt("return");case 4:if(qt.pause(),i={characterList:v,background:te,script:re,name:oe,bgm:ve,sound:Ne},l=[].concat(Object(Ee.a)(Ue.slice(0,De)),[i],Object(Ee.a)(Ue.slice(De+1,31))),!(c||st||window.confirm("\uac8c\uc784 \uc81c\uc791\uc744 \uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){t.next=26;break}return o={cutList:l,isEnding:st.current,gameId:d,sceneId:b,isTmp:c},t.next=11,g.a.post("/api/scene/save",o);case 11:if(!(u=t.sent).data.success){t.next=17;break}a({type:"detach_character"}),O.a.loading("\uac8c\uc784 \uc5c5\ub85c\ub4dc \uc911..",1).then((function(){c?O.a.success("\uc5c5\ub85c\ub4dc \uc131\uacf5."):O.a.success("\uac8c\uc784 \uc81c\uc791\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",1)})).then((function(){!c&&Se.current?r.replace("/game/".concat(d)):c||(ca.emit("final_submit",{prevSceneId:u.data.scene.prevSceneId,sceneId:u.data.scene._id,title:u.data.scene.title,userId:p.userData._id.toString()}),r.replace({pathname:"/gameplay",state:{sceneId:u.data.scene._id,gameId:d}}))})),t.next=24;break;case 17:if("expired"!==u.data.msg){t.next=23;break}return O.a.error("\uc81c\uc791 \uc720\ud6a8\uae30\uac04\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4..",1),e.history.replace({pathname:"/gameplay",state:{sceneId:u.data.prevSceneId,gameId:d}}),t.abrupt("return");case 23:O.a.error("DB\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4.");case 24:t.next=27;break;case 26:O.a.error("\uc81c\ucd9c \ucde8\uc18c");case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),mt=function(){M(nt.current)},bt=Object(n.useState)([]),gt=Object(u.a)(bt,2),vt=gt[0],ht=gt[1],yt=Object(n.useState)([]),Ot=Object(u.a)(yt,2),Nt=Ot[0],kt=Ot[1];Object(n.useEffect)((function(){g.a.post("/api/game/getgamedetail",{gameId:d}).then((function(e){e.data.success?ht(e.data.gameDetail):alert("\uac8c\uc784 \uc815\ubcf4\ub97c \ub85c\ub529\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[q,d]);var St=(null===be||void 0===be?void 0:be.toString())===(null===(t=p.userData)||void 0===t?void 0:t._id.toString());Object(n.useEffect)((function(){if(vt.character){var e=c.a.createElement("div",{className:"sideBar"},c.a.createElement("div",{ref:Qe},c.a.createElement(Ht,{reload:q,setName:ue,GameCharacterList:vt.character}),c.a.createElement(pt,{gameDetail:vt,setName:ue,onEssetModal:mt,isFirstScene:Se,isWriter:St})),c.a.createElement("div",{ref:Ye,style:{display:"none"}},c.a.createElement(ut,{gameDetail:vt,setBackgroundImg:ae,onEssetModal:mt,isFirstScene:Se,isWriter:St})),c.a.createElement("div",{ref:Ze,style:{display:"none"}},c.a.createElement(Et,{gameDetail:vt,bgm_audio:qt,setBgmFile:he,onEssetModal:mt,isFirstScene:Se,isWriter:St})),c.a.createElement("div",{ref:Je,style:{display:"none"}},c.a.createElement(_t,{gameDetail:vt,sound_audio:Qt,setSoundFile:ke,onEssetModal:mt,isFirstScene:Se,isWriter:St})));kt(e)}}),[vt,v,q]),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){j(window.innerWidth),w(window.innerHeight)})),I(.5625*y>S?{width:"".concat(.8*S/.5625,"px"),height:"".concat(.8*S,"px"),minWidth:"".concat(300/.5625,"px"),minHeight:"".concat(300,"px")}:{width:"".concat(.8*y,"px"),height:"".concat(.8*y*.5625,"px"),minWidth:"".concat(300,"px"),minHeight:"".concat(168.75,"px")})}),[window.innerWidth,window.innerHeight]);Object(n.useEffect)((function(){return function(){qt.pause(),Qt.pause()}}),[]);var wt=Object(n.useRef)({tab:1,page:0});return(null===vt||void 0===vt?void 0:vt.title)?c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title"},c.a.createElement("div",null,c.a.createElement("span",null,"[",null===vt||void 0===vt?void 0:vt.title,"]"),c.a.createElement(Vt.a,{format:"HH:mm:ss",date:Ce,timezone:"Asia/Seoul"})),c.a.createElement("div",{className:"title-btn",onClick:function(){return M(5)}},"\uc0c1\uc138\uc815\ubcf4")),c.a.createElement(Ut,{CutList:Ue,CutNumber:De,displayCut:it,setCutNumber:Be,Hover:ze,setHover:Re,EmptyCutList:Xe,saveCut:rt}),c.a.createElement("div",{className:"scene"},c.a.createElement("div",{className:"scene left-arrow",onClick:function(){0!==De&&(rt(),it(De-1),Be(De-1))}},c.a.createElement(B,{src:"arrow_1",width:"50",height:"50",color:"#F5F5F5"})),c.a.createElement("div",{className:"backgroundImg",id:"backgroundImg_container",style:{overflow:"hidden"}},c.a.createElement("img",{className:"backgroundImg",src:"".concat(te),alt:"img"}),c.a.createElement(Rt,{GameCharacterList:vt.character,onRemovech_aracter:function(e){a(dt({oldArray:v,index:e}))}}),Z&&re&&c.a.createElement(Me,{cut_name:oe||"\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",cut_script:re||"\ub300\uc0ac\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",setIsTyping:null,isTyping:null,theme:null}),c.a.createElement("div",{className:"scene__sound_container"},(null===ve||void 0===ve?void 0:ve.name)?c.a.createElement("div",{onClick:function(){qt.paused?qt.play():qt.pause(),Q((function(e){return e+1}))}},ve.name&&qt.paused&&c.a.createElement(jt.a,{style:{fontSize:"20px"}}),ve.name&&!qt.paused&&c.a.createElement(Wt.a,{style:{fontSize:"20px"}}),c.a.createElement("div",{className:"scene__sound_name"},ve.name)):c.a.createElement("div",null,c.a.createElement(Xt.a,{style:{fontSize:"20px"}}),c.a.createElement("div",{className:"scene__sound_name"},"BGM")),(null===Ne||void 0===Ne?void 0:Ne.name)?c.a.createElement("div",{onClick:function(){Qt.paused?Qt.play():Qt.pause(),Q((function(e){return e+1}))}},Ne.name&&Qt.paused&&c.a.createElement(jt.a,{style:{fontSize:"20px"}}),Ne.name&&!Qt.paused&&c.a.createElement(Wt.a,{style:{fontSize:"20px"}}),c.a.createElement("div",{className:"scene__sound_name"},Ne.name)):c.a.createElement("div",null,c.a.createElement(Xt.a,{style:{fontSize:"20px"}}),c.a.createElement("div",{className:"scene__sound_name"},"Sound")))),c.a.createElement("div",{className:"scene right-arrow",onClick:De<29&&lt},c.a.createElement(B,{src:"arrow_1",width:"50",height:"50",color:De<29?"#F5F5F5":"black"}))),c.a.createElement("div",{className:"scene__btn_top"},(Se.current||St)&&c.a.createElement("div",{className:"scene_btn scene_btn_red",onClick:mt},"\uc5d0\uc14b \ucd94\uac00"),c.a.createElement("div",{className:"scene_btn",onClick:function(){window.confirm("\uac8c\uc784 \uc81c\uc791\uc744 \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&g.a.delete("/api/scene",{data:{gameId:d,sceneId:b,isFirst:Se.current,userId:p.userData._id}}).then((function(t){t.data.success&&(0==Se.current?(ca.emit("empty_num_increase",{scene_id:t.data.prevSceneId,user_id:p.userData._id}),e.history.push("/game/".concat(d))):e.history.push("/"))}))}},"\uc81c\uc791 \ucde8\uc18c"),c.a.createElement("div",{className:"scene_btn",onClick:function(e){ot(e,1)}},"\uc784\uc2dc \uc800\uc7a5"),c.a.createElement("div",{className:"scene_btn scene_btn_blue",onClick:function(){q&&(Se.current?R(!0):V(!0))}},"\uc644\ub8cc")),c.a.createElement("div",{className:"btn_side"},c.a.createElement("div",{className:1===nt.current?"scene_side_btn light":"scene_side_btn",onClick:function(){"none"===Qe.current.style.display&&(tt(Qe),Q((function(e){return e+1})),nt.current=1)}},"\uce90\ub9ad\ud130"),c.a.createElement("div",{className:2===nt.current?"scene_side_btn light":"scene_side_btn",onClick:function(){"none"===Ye.current.style.display&&(tt(Ye),Q((function(e){return e+1})),nt.current=2)}},"\ubc30\uacbd"),c.a.createElement("div",{className:3===nt.current?"scene_side_btn light":"scene_side_btn",onClick:function(){"none"===Ze.current.style.display&&(tt(Ze),Q((function(e){return e+1})),nt.current=3)}},"\ubc30\uacbd\uc74c"),c.a.createElement("div",{className:4===nt.current?"scene_side_btn light":"scene_side_btn",onClick:function(){"none"===Je.current.style.display&&(tt(Je),Q((function(e){return e+1})),nt.current=4)}},"\ud6a8\uacfc\uc74c")),0!==Nt&&Nt,c.a.createElement("div",{className:"textbox_name"},c.a.createElement("div",{className:"textbox__name_block_btn"},c.a.createElement(B,{src:"arrow_1",width:"15",height:"25",color:"#FFFFFF"}))),c.a.createElement("input",{onChange:function(e){ue(e.currentTarget.value)},placeholder:"\uc774\ub984",value:oe,ref:et,className:"textbox_name"}),c.a.createElement("div",{className:"textbox_bottom"},c.a.createElement("div",{className:"enter",onClick:lt},"Enter",c.a.createElement("br",null),re.length,"/",50),c.a.createElement("textarea",{onChange:function(e){51===e.currentTarget.value.length?O.a.error({content:"\uae00\uc790 \uc218 \uc81c\ud55c\uc744 \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4."}):"\n"!==e.currentTarget.value[e.currentTarget.value.length-1]&&ie(e.currentTarget.value)},value:re,placeholder:"\ub300\uc0ac\uac00 \uc5c6\uc73c\uba74 \uc2a4\ud06c\ub9bd\ud2b8 \ucc3d\uc774 \ud45c\uc2dc\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",className:"textbox_script",maxLength:51,ref:$e})),c.a.createElement("div",{className:"options"},c.a.createElement("div",{className:"scene_btn",onClick:function(){if(Ue.length<=1)O.a.info("\uccab\ubc88\uc9f8 \ucef7 \uc785\ub2c8\ub2e4.");else{if(Ue.length-1<=De)return Ue[De]&&(Ge((function(e){return Object(Ee.a)(e.slice(0,De))})),qe((function(e){return[0].concat(Object(Ee.a)(e))}))),it(De-1),void Be(De-1);O.a.success("".concat(De+1,"\ubc88\uc9f8 \ucef7\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),Ge((function(e){return[].concat(Object(Ee.a)(e.slice(0,De)),Object(Ee.a)(e.slice(De+1,31)))})),qe((function(e){return[0].concat(Object(Ee.a)(e))})),it(De+1)}}},"\ucef7 \uc0ad\uc81c"),c.a.createElement("div",{className:"scene_btn",onClick:ct},"\ubc30\uacbd\uc74c \uc74c\uc18c\uac70"),c.a.createElement("div",{className:"scene_btn",onClick:ct},"\ud6a8\uacfc\uc74c \uc74c\uc18c\uac70"),c.a.createElement("div",{className:"scene_btn",onClick:ct},"\ud14c\ub9c8 \uc120\ud0dd")),c.a.createElement(Dt,{gameId:d,visible:z,setUploadModalState:R,onSubmit_saveScene:ot,defaultTitle:vt.title,defaultDescription:vt.description}),c.a.createElement(Bt,{isEnding:st,visible:G,setEndingModalState:V,onSubmit_saveScene:ot}),0!==D&&c.a.createElement(Lt,{gameDetail:vt,gameId:d,visible:Boolean(D),tag:D,setTag:M,setReload:Q,gameInfoIndex:wt})):c.a.createElement(Ke,null)},Zt=a(1548);var Jt=Object(m.h)((function(e){var t,a=Object(E.c)((function(e){return e.user})),n=Object(E.b)();return a.userData?a.userData.isAuth?a.userData.isAuth?c.a.createElement(Zt.a,{mode:e.mode},c.a.createElement(Zt.a.Item,{key:"profile"},(null===a||void 0===a||null===(t=a.userData)||void 0===t?void 0:t._id)?c.a.createElement(R.b,{to:"/profile/".concat(a.userData._id)},"\ud504\ub85c\ud544"):"\ud504\ub85c\ud544"),c.a.createElement(Zt.a.Item,{key:"logout"},c.a.createElement(R.b,{to:"/",onClick:function(){g.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?(n({type:"logout_user",payload:null}),e.history.push("/login")):alert("Log Out Failed")}))}},"\ub85c\uadf8\uc544\uc6c3"))):void 0:c.a.createElement(Zt.a,{mode:e.mode},c.a.createElement(Zt.a.Item,{key:"login"},c.a.createElement(R.b,{to:"/login"},"\ub85c\uadf8\uc778")),c.a.createElement(Zt.a.Item,{key:"register"},c.a.createElement(R.b,{to:"/register"},"\ud68c\uc6d0\uac00\uc785"))):null})),$t=a(1550);a(1525);var ea=Object(n.memo)((function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],i={};return i=Object(E.c)((function(e){return e.controlpage.navbarOn}))?{position:"fixed",zIndex:5,width:"100%"}:{position:"fixed",zIndex:5,width:"100%",opacity:0,animation:"0.8s ease-out 0s 1 hide"},c.a.createElement("nav",{className:"menu",style:i},c.a.createElement("div",{className:"menu__logo"},c.a.createElement(R.b,{to:"/"},"\uc774\uc5b4\ubd10")),c.a.createElement("div",{className:"menu__container"},c.a.createElement("div",{className:"menu_rigth"},c.a.createElement(Jt,{mode:"horizontal"})),c.a.createElement(ue.a,{className:"menu__mobile-button",type:"primary",onClick:function(){r(!0)}},c.a.createElement(X.a,{type:"align-right"})),c.a.createElement($t.a,{title:"\uc774\uc5b4\ubd10",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){r(!1)},visible:a},c.a.createElement(Jt,{mode:"inline"}))))}));a(1526);var ta=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{className:"footer-container"},c.a.createElement("div",{className:"footer-info"},c.a.createElement("p",null,"\ubcf8 \uc0ac\uc774\ud2b8\ub294 SW\uc815\uae00\uc0ac\uad00\ud559\uad50\uc5d0\uc11c\uc758 \uad50\uc721\uc801 \ubaa9\uc801\uc73c\ub85c \uc81c\uc791\ub418\uc5c8\uc73c\uba70, \uc5b4\ub5a0\ud55c \uc0c1\uc5c5\uc801 \uc774\uc775\ub3c4 \ucde8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),c.a.createElement("p",null,"\uc800\uc791\uad8c \ub4f1 \uae30\ud0c0 \ubb38\uc758\ub294 ",c.a.createElement("a",{onClick:function(){r(!0)}},"\uc774\uacf3"),"\uc73c\ub85c \ubb38\uc758 \uac00\ub2a5\ud569\ub2c8\ub2e4."),c.a.createElement(C,{isModalVisible:a,setIsModalVisible:r})),c.a.createElement("div",{className:"footer-icons"},c.a.createElement("div",{className:"jg-icon",onClick:function(){window.open("https://swjungle.net/")}},c.a.createElement("img",{className:"jg-img",src:"https://swjungle.net/static/image/logo.png"}))))};a(1527);var aa=function(){return c.a.createElement("div",{className:"portraitWarning"},c.a.createElement("p",null,"\uac00\ub85c \ud654\uba74\uc73c\ub85c \uc990\uaca8\uc8fc\uc138\uc694~ ",c.a.createElement(X.a,{type:"smile"})))},na=a(156),ca=b()(na.SOCKET,{transports:["websocket"]});window.onpopstate=function(){window.location.reload()};var ra=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(E.b)(),l=Object(n.useState)(window.matchMedia("(orientation: portrait)").matches),d=Object(u.a)(l,2),b=d[0],f=d[1],g=function(){window.matchMedia("(orientation: portrait)").matches!==b&&f(window.matchMedia("(orientation: portrait)").matches)};return h(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(v()).then((function(){r(!0)}));case 1:case"end":return e.stop()}}),e)})))),Object(n.useEffect)((function(){return window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[b]),a?c.a.createElement(n.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(ea,null),c.a.createElement("div",{className:"app"},c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/",component:_(G,null)}),c.a.createElement(m.a,{exact:!0,path:"/login",component:_(K,!1)}),c.a.createElement(m.a,{exact:!0,path:"/register",component:_(Z,!1)}),c.a.createElement(m.a,{exact:!0,path:"/passport/register",component:_(J,!1)}),c.a.createElement(m.a,{exact:!0,path:"/profile/:userId",component:_(ne,!0)}),c.a.createElement(m.a,{exact:!0,path:"/game/upload",component:_(pe,!0)}),c.a.createElement(m.a,{path:"/game/:gameId",component:_(se,null)}),c.a.createElement(m.a,{path:"/gameplay",component:b?aa:y(_(lt,null))}),c.a.createElement(m.a,{exact:!0,path:"/scene/make",component:b?aa:y(_(Kt,!0))}))),c.a.createElement(ta,null)):c.a.createElement(Ke,null)};function ia(){var e=Object(m.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var la=a(189),sa={navbarOn:!0},oa={loadingType:1,isPause:!1},ua={description:"",image:"",image_array:[],name:"",_id:"",index:-1},ma={index:-1},da={movingTarget:-1},ba=Object(la.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(ve.a)(Object(ve.a)({},e),{},{register:t.payload});case"login_user":return Object(ve.a)(Object(ve.a)({},e),{},{loginSuccess:t.payload});case"auth_user":return Object(ve.a)(Object(ve.a)({},e),{},{userData:t.payload});case"logout_user":return Object(ve.a)(Object(ve.a)({},e),{},{loginSuccess:t.payload});default:return e}},controlpage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"navbar_control":return Object(ve.a)(Object(ve.a)({},e),{},{navbarOn:t.payload});default:return e}},gameplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gameLoading_gamePlay":return Object(ve.a)(Object(ve.a)({},e),{},{loadingType:t.payload});case"pause_gamePlay":return Object(ve.a)(Object(ve.a)({},e),{},{isPause:t.payload});default:return e}},sync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load_empty_num":return Object(ve.a)(Object(ve.a)({},e),{},{emptyNum:t.payload});case"SAVE_PREV_SCENE":return Object(ve.a)(Object(ve.a)({},e),{},{prevSceneId:t.payload});default:return e}},character:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{characterSelected:ua,CharacterList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_character":return Object(ve.a)(Object(ve.a)({},e),{},{characterSelected:t.payload});case"detach_character":return Object(ve.a)(Object(ve.a)({},e),{},{characterSelected:ua});case"push_character":case"pop_character":case"update_character":case"set_character_list":case"order_character":return Object(ve.a)(Object(ve.a)({},e),{},{CharacterList:t.payload});default:return e}},characterDisplayed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{characterDisplayed:ma},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_displayed":return Object(ve.a)(Object(ve.a)({},e),{},{characterDisplayed:t.payload});default:return e}},movingTarget:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_movingtarget":case"detach_movingtarget":return Object(ve.a)(Object(ve.a)({},e),{},{movingTarget:t.payload});default:return e}}}),fa=a(768),ga=a.n(fa),pa=a(769);a(192).b.add(te.i);var va=Object(la.a)(ga.a,pa.a)(la.d);i.a.render(c.a.createElement(E.a,{store:va(ba,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},c.a.createElement(R.a,null,c.a.createElement(ia,null),c.a.createElement(ra,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},156:function(e,t,a){e.exports=a(1189)},215:function(e,t,a){},419:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=419},644:function(e,t,a){},740:function(e,t,a){},741:function(e,t,a){},743:function(e,t,a){},744:function(e,t,a){},745:function(e,t,a){},746:function(e,t,a){},774:function(e,t,a){e.exports=a(1531)}},[[774,1,2]]]);
//# sourceMappingURL=main.4fe1c746.chunk.js.map